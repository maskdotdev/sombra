import{p as a,R as P,w as It,x as Mt,y as mt,a as xe}from"./chunk-UIGDSWPH-BDZHJOlC.js";import{B as Pt,C as Z,a as ee,b as de,c as te,d as ae,e as Ae,A as gt,f as bt,g as vt,D as Bt,T as qt,h as Wt,i as zt,j as Ht}from"./query-utils-0jOdkSUS.js";import{c as he}from"./utils-CDN07tui.js";function Ie({className:e,...r}){return a.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:a.jsx("table",{"data-slot":"table",className:he("w-full caption-bottom text-sm",e),...r})})}function jt({className:e,...r}){return a.jsx("thead",{"data-slot":"table-header",className:he("[&_tr]:border-b",e),...r})}function Me({className:e,...r}){return a.jsx("tbody",{"data-slot":"table-body",className:he("[&_tr:last-child]:border-0",e),...r})}function le({className:e,...r}){return a.jsx("tr",{"data-slot":"table-row",className:he("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function Pe({className:e,...r}){return a.jsx("th",{"data-slot":"table-head",className:he("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function B({className:e,...r}){return a.jsx("td",{"data-slot":"table-cell",className:he("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}var we=e=>e.type==="checkbox",fe=e=>e instanceof Date,I=e=>e==null;const _t=e=>typeof e=="object";var E=e=>!I(e)&&!Array.isArray(e)&&_t(e)&&!fe(e),Qt=e=>E(e)&&e.target?we(e.target)?e.target.checked:e.target.value:e,$t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Jt=(e,r)=>e.has($t(r)),Gt=e=>{const r=e.constructor&&e.constructor.prototype;return E(r)&&r.hasOwnProperty("isPrototypeOf")},We=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function O(e){let r;const t=Array.isArray(e),l=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(We&&(e instanceof Blob||l))&&(t||E(e)))if(r=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Gt(e))r=e;else for(const d in e)e.hasOwnProperty(d)&&(r[d]=O(e[d]));else return e;return r}var Se=e=>/^\w*$/.test(e),S=e=>e===void 0,ze=e=>Array.isArray(e)?e.filter(Boolean):[],He=e=>ze(e.replace(/["|']|\]/g,"").split(/\.|\[/)),x=(e,r,t)=>{if(!r||!E(e))return t;const l=(Se(r)?[r]:He(r)).reduce((d,o)=>I(d)?d:d[o],e);return S(l)||l===e?S(e[r])?t:e[r]:l},X=e=>typeof e=="boolean",F=(e,r,t)=>{let l=-1;const d=Se(r)?[r]:He(r),o=d.length,f=o-1;for(;++l<o;){const h=d[l];let L=t;if(l!==f){const A=e[h];L=E(A)||Array.isArray(A)?A:isNaN(+d[l+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=L,e=e[h]}};const it={BLUR:"blur",FOCUS_OUT:"focusout"},Q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},re={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Kt=P.createContext(null);Kt.displayName="HookFormContext";var Yt=(e,r,t,l=!0)=>{const d={defaultValues:r._defaultValues};for(const o in e)Object.defineProperty(d,o,{get:()=>{const f=o;return r._proxyFormState[f]!==Q.all&&(r._proxyFormState[f]=!l||Q.all),e[f]}});return d};const Xt=typeof window<"u"?P.useLayoutEffect:P.useEffect;var q=e=>typeof e=="string",Zt=(e,r,t,l,d)=>q(e)?(l&&r.watch.add(e),x(t,e,d)):Array.isArray(e)?e.map(o=>(l&&r.watch.add(o),x(t,o))):(l&&(r.watchAll=!0),t),Be=e=>I(e)||!_t(e);function ce(e,r,t=new WeakSet){if(Be(e)||Be(r))return e===r;if(fe(e)&&fe(r))return e.getTime()===r.getTime();const l=Object.keys(e),d=Object.keys(r);if(l.length!==d.length)return!1;if(t.has(e)||t.has(r))return!0;t.add(e),t.add(r);for(const o of l){const f=e[o];if(!d.includes(o))return!1;if(o!=="ref"){const h=r[o];if(fe(f)&&fe(h)||E(f)&&E(h)||Array.isArray(f)&&Array.isArray(h)?!ce(f,h,t):f!==h)return!1}}return!0}var es=(e,r,t,l,d)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[l]:d||!0}}:{},je=e=>Array.isArray(e)?e:[e],at=()=>{let e=[];return{get observers(){return e},next:d=>{for(const o of e)o.next&&o.next(d)},subscribe:d=>(e.push(d),{unsubscribe:()=>{e=e.filter(o=>o!==d)}}),unsubscribe:()=>{e=[]}}};function wt(e,r){const t={};for(const l in e)if(e.hasOwnProperty(l)){const d=e[l],o=r[l];if(d&&E(d)&&o){const f=wt(d,o);E(f)&&(t[l]=f)}else e[l]&&(t[l]=o)}return t}var R=e=>E(e)&&!Object.keys(e).length,Qe=e=>e.type==="file",$=e=>typeof e=="function",De=e=>{if(!We)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},pt=e=>e.type==="select-multiple",$e=e=>e.type==="radio",ts=e=>$e(e)||we(e),Ue=e=>De(e)&&e.isConnected;function ss(e,r){const t=r.slice(0,-1).length;let l=0;for(;l<t;)e=S(e)?l++:e[r[l++]];return e}function rs(e){for(const r in e)if(e.hasOwnProperty(r)&&!S(e[r]))return!1;return!0}function k(e,r){const t=Array.isArray(r)?r:Se(r)?[r]:He(r),l=t.length===1?e:ss(e,t),d=t.length-1,o=t[d];return l&&delete l[o],d!==0&&(E(l)&&R(l)||Array.isArray(l)&&rs(l))&&k(e,t.slice(0,-1)),e}var is=e=>{for(const r in e)if($(e[r]))return!0;return!1};function Vt(e){return Array.isArray(e)||E(e)&&!is(e)}function qe(e,r={}){for(const t in e)Vt(e[t])?(r[t]=Array.isArray(e[t])?[]:{},qe(e[t],r[t])):S(e[t])||(r[t]=!0);return r}function ge(e,r,t){t||(t=qe(r));for(const l in e)Vt(e[l])?S(r)||Be(t[l])?t[l]=qe(e[l],Array.isArray(e[l])?[]:{}):ge(e[l],I(r)?{}:r[l],t[l]):t[l]=!ce(e[l],r[l]);return t}const lt={value:!1,isValid:!1},nt={value:!0,isValid:!0};var Ft=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?nt:{value:e[0].value,isValid:!0}:nt:lt}return lt},At=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:l})=>S(e)?e:r?e===""?NaN:e&&+e:t&&q(e)?new Date(e):l?l(e):e;const ot={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,ot):ot;function dt(e){const r=e.ref;return Qe(r)?r.files:$e(r)?Dt(e.refs).value:pt(r)?[...r.selectedOptions].map(({value:t})=>t):we(r)?Ft(e.refs).value:At(S(r.value)?e.ref.value:r.value,e)}var as=(e,r,t,l)=>{const d={};for(const o of e){const f=x(r,o);f&&F(d,o,f._f)}return{criteriaMode:t,names:[...e],fields:d,shouldUseNativeValidation:l}},Ne=e=>e instanceof RegExp,ve=e=>S(e)?e:Ne(e)?e.source:E(e)?Ne(e.value)?e.value.source:e.value:e,ct=e=>({isOnSubmit:!e||e===Q.onSubmit,isOnBlur:e===Q.onBlur,isOnChange:e===Q.onChange,isOnAll:e===Q.all,isOnTouch:e===Q.onTouched});const ut="AsyncFunction";var ls=e=>!!e&&!!e.validate&&!!($(e.validate)&&e.validate.constructor.name===ut||E(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===ut)),ns=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ft=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length))));const _e=(e,r,t,l)=>{for(const d of t||Object.keys(e)){const o=x(e,d);if(o){const{_f:f,...h}=o;if(f){if(f.refs&&f.refs[0]&&r(f.refs[0],d)&&!l)return!0;if(f.ref&&r(f.ref,f.name)&&!l)return!0;if(_e(h,r))break}else if(E(h)&&_e(h,r))break}}};function ht(e,r,t){const l=x(e,t);if(l||Se(t))return{error:l,name:t};const d=t.split(".");for(;d.length;){const o=d.join("."),f=x(r,o),h=x(e,o);if(f&&!Array.isArray(f)&&t!==o)return{name:t};if(h&&h.type)return{name:o,error:h};if(h&&h.root&&h.root.type)return{name:`${o}.root`,error:h.root};d.pop()}return{name:t}}var os=(e,r,t,l)=>{t(e);const{name:d,...o}=e;return R(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(f=>r[f]===(!l||Q.all))},ds=(e,r,t)=>!e||!r||e===r||je(e).some(l=>l&&(t?l===r:l.startsWith(r)||r.startsWith(l))),cs=(e,r,t,l,d)=>d.isOnAll?!1:!t&&d.isOnTouch?!(r||e):(t?l.isOnBlur:d.isOnBlur)?!e:(t?l.isOnChange:d.isOnChange)?e:!0,us=(e,r)=>!ze(x(e,r)).length&&k(e,r),fs=(e,r,t)=>{const l=je(x(e,t));return F(l,"root",r[t]),F(e,t,l),e};function yt(e,r,t="validate"){if(q(e)||Array.isArray(e)&&e.every(q)||X(e)&&!e)return{type:t,message:q(e)?e:"",ref:r}}var me=e=>E(e)&&!Ne(e)?e:{value:e,message:""},xt=async(e,r,t,l,d,o)=>{const{ref:f,refs:h,required:L,maxLength:A,minLength:p,min:b,max:g,pattern:M,validate:W,name:D,valueAsNumber:J,mount:ke}=e._f,j=x(t,D);if(!ke||r.has(D))return{};const se=h?h[0]:f,G=v=>{d&&se.reportValidity&&(se.setCustomValidity(X(v)?"":v||""),se.reportValidity())},C={},pe=$e(f),ne=we(f),Ee=pe||ne,H=(J||Qe(f))&&S(f.value)&&S(j)||De(f)&&f.value===""||j===""||Array.isArray(j)&&!j.length,ue=es.bind(null,D,l,C),K=(v,w,N,T=re.maxLength,U=re.minLength)=>{const Y=v?w:N;C[D]={type:v?T:U,message:Y,ref:f,...ue(v?T:U,Y)}};if(o?!Array.isArray(j)||!j.length:L&&(!Ee&&(H||I(j))||X(j)&&!j||ne&&!Ft(h).isValid||pe&&!Dt(h).isValid)){const{value:v,message:w}=q(L)?{value:!!L,message:L}:me(L);if(v&&(C[D]={type:re.required,message:w,ref:se,...ue(re.required,w)},!l))return G(w),C}if(!H&&(!I(b)||!I(g))){let v,w;const N=me(g),T=me(b);if(!I(j)&&!isNaN(j)){const U=f.valueAsNumber||j&&+j;I(N.value)||(v=U>N.value),I(T.value)||(w=U<T.value)}else{const U=f.valueAsDate||new Date(j),Y=Ve=>new Date(new Date().toDateString()+" "+Ve),be=f.type=="time",ye=f.type=="week";q(N.value)&&j&&(v=be?Y(j)>Y(N.value):ye?j>N.value:U>new Date(N.value)),q(T.value)&&j&&(w=be?Y(j)<Y(T.value):ye?j<T.value:U<new Date(T.value))}if((v||w)&&(K(!!v,N.message,T.message,re.max,re.min),!l))return G(C[D].message),C}if((A||p)&&!H&&(q(j)||o&&Array.isArray(j))){const v=me(A),w=me(p),N=!I(v.value)&&j.length>+v.value,T=!I(w.value)&&j.length<+w.value;if((N||T)&&(K(N,v.message,w.message),!l))return G(C[D].message),C}if(M&&!H&&q(j)){const{value:v,message:w}=me(M);if(Ne(v)&&!j.match(v)&&(C[D]={type:re.pattern,message:w,ref:f,...ue(re.pattern,w)},!l))return G(w),C}if(W){if($(W)){const v=await W(j,t),w=yt(v,se);if(w&&(C[D]={...w,...ue(re.validate,w.message)},!l))return G(w.message),C}else if(E(W)){let v={};for(const w in W){if(!R(v)&&!l)break;const N=yt(await W[w](j,t),se,w);N&&(v={...N,...ue(w,N.message)},G(N.message),l&&(C[D]=v))}if(!R(v)&&(C[D]={ref:se,...v},!l))return C}}return G(!0),C};const hs={mode:Q.onSubmit,reValidateMode:Q.onChange,shouldFocusError:!0};function ys(e={}){let r={...hs,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:$(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},l={},d=E(r.defaultValues)||E(r.values)?O(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:O(d),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},L,A=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...p};const g={array:at(),state:at()},M=r.criteriaMode===Q.all,W=s=>i=>{clearTimeout(A),A=setTimeout(s,i)},D=async s=>{if(!r.disabled&&(p.isValid||b.isValid||s)){const i=r.resolver?R((await ne()).errors):await H(l,!0);i!==t.isValid&&g.state.next({isValid:i})}},J=(s,i)=>{!r.disabled&&(p.isValidating||p.validatingFields||b.isValidating||b.validatingFields)&&((s||Array.from(h.mount)).forEach(n=>{n&&(i?F(t.validatingFields,n,i):k(t.validatingFields,n))}),g.state.next({validatingFields:t.validatingFields,isValidating:!R(t.validatingFields)}))},ke=(s,i=[],n,y,u=!0,c=!0)=>{if(y&&n&&!r.disabled){if(f.action=!0,c&&Array.isArray(x(l,s))){const m=n(x(l,s),y.argA,y.argB);u&&F(l,s,m)}if(c&&Array.isArray(x(t.errors,s))){const m=n(x(t.errors,s),y.argA,y.argB);u&&F(t.errors,s,m),us(t.errors,s)}if((p.touchedFields||b.touchedFields)&&c&&Array.isArray(x(t.touchedFields,s))){const m=n(x(t.touchedFields,s),y.argA,y.argB);u&&F(t.touchedFields,s,m)}(p.dirtyFields||b.dirtyFields)&&(t.dirtyFields=ge(d,o)),g.state.next({name:s,isDirty:K(s,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else F(o,s,i)},j=(s,i)=>{F(t.errors,s,i),g.state.next({errors:t.errors})},se=s=>{t.errors=s,g.state.next({errors:t.errors,isValid:!1})},G=(s,i,n,y)=>{const u=x(l,s);if(u){const c=x(o,s,S(n)?x(d,s):n);S(c)||y&&y.defaultChecked||i?F(o,s,i?c:dt(u._f)):N(s,c),f.mount&&D()}},C=(s,i,n,y,u)=>{let c=!1,m=!1;const _={name:s};if(!r.disabled){if(!n||y){(p.isDirty||b.isDirty)&&(m=t.isDirty,t.isDirty=_.isDirty=K(),c=m!==_.isDirty);const V=ce(x(d,s),i);m=!!x(t.dirtyFields,s),V?k(t.dirtyFields,s):F(t.dirtyFields,s,!0),_.dirtyFields=t.dirtyFields,c=c||(p.dirtyFields||b.dirtyFields)&&m!==!V}if(n){const V=x(t.touchedFields,s);V||(F(t.touchedFields,s,n),_.touchedFields=t.touchedFields,c=c||(p.touchedFields||b.touchedFields)&&V!==n)}c&&u&&g.state.next(_)}return c?_:{}},pe=(s,i,n,y)=>{const u=x(t.errors,s),c=(p.isValid||b.isValid)&&X(i)&&t.isValid!==i;if(r.delayError&&n?(L=W(()=>j(s,n)),L(r.delayError)):(clearTimeout(A),L=null,n?F(t.errors,s,n):k(t.errors,s)),(n?!ce(u,n):u)||!R(y)||c){const m={...y,...c&&X(i)?{isValid:i}:{},errors:t.errors,name:s};t={...t,...m},g.state.next(m)}},ne=async s=>{J(s,!0);const i=await r.resolver(o,r.context,as(s||h.mount,l,r.criteriaMode,r.shouldUseNativeValidation));return J(s),i},Ee=async s=>{const{errors:i}=await ne(s);if(s)for(const n of s){const y=x(i,n);y?F(t.errors,n,y):k(t.errors,n)}else t.errors=i;return i},H=async(s,i,n={valid:!0})=>{for(const y in s){const u=s[y];if(u){const{_f:c,...m}=u;if(c){const _=h.array.has(c.name),V=u._f&&ls(u._f);V&&p.validatingFields&&J([c.name],!0);const z=await xt(u,h.disabled,o,M,r.shouldUseNativeValidation&&!i,_);if(V&&p.validatingFields&&J([c.name]),z[c.name]&&(n.valid=!1,i))break;!i&&(x(z,c.name)?_?fs(t.errors,z,c.name):F(t.errors,c.name,z[c.name]):k(t.errors,c.name))}!R(m)&&await H(m,i,n)}}return n.valid},ue=()=>{for(const s of h.unMount){const i=x(l,s);i&&(i._f.refs?i._f.refs.every(n=>!Ue(n)):!Ue(i._f.ref))&&Ce(s)}h.unMount=new Set},K=(s,i)=>!r.disabled&&(s&&i&&F(o,s,i),!ce(Ve(),d)),v=(s,i,n)=>Zt(s,h,{...f.mount?o:S(i)?d:q(s)?{[s]:i}:i},n,i),w=s=>ze(x(f.mount?o:d,s,r.shouldUnregister?x(d,s,[]):[])),N=(s,i,n={})=>{const y=x(l,s);let u=i;if(y){const c=y._f;c&&(!c.disabled&&F(o,s,At(i,c)),u=De(c.ref)&&I(i)?"":i,pt(c.ref)?[...c.ref.options].forEach(m=>m.selected=u.includes(m.value)):c.refs?we(c.ref)?c.refs.forEach(m=>{(!m.defaultChecked||!m.disabled)&&(Array.isArray(u)?m.checked=!!u.find(_=>_===m.value):m.checked=u===m.value||!!u)}):c.refs.forEach(m=>m.checked=m.value===u):Qe(c.ref)?c.ref.value="":(c.ref.value=u,c.ref.type||g.state.next({name:s,values:O(o)})))}(n.shouldDirty||n.shouldTouch)&&C(s,u,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&ye(s)},T=(s,i,n)=>{for(const y in i){if(!i.hasOwnProperty(y))return;const u=i[y],c=s+"."+y,m=x(l,c);(h.array.has(s)||E(u)||m&&!m._f)&&!fe(u)?T(c,u,n):N(c,u,n)}},U=(s,i,n={})=>{const y=x(l,s),u=h.array.has(s),c=O(i);F(o,s,c),u?(g.array.next({name:s,values:O(o)}),(p.isDirty||p.dirtyFields||b.isDirty||b.dirtyFields)&&n.shouldDirty&&g.state.next({name:s,dirtyFields:ge(d,o),isDirty:K(s,c)})):y&&!y._f&&!I(c)?T(s,c,n):N(s,c,n),ft(s,h)&&g.state.next({...t,name:s}),g.state.next({name:f.mount?s:void 0,values:O(o)})},Y=async s=>{f.mount=!0;const i=s.target;let n=i.name,y=!0;const u=x(l,n),c=V=>{y=Number.isNaN(V)||fe(V)&&isNaN(V.getTime())||ce(V,x(o,n,V))},m=ct(r.mode),_=ct(r.reValidateMode);if(u){let V,z;const Fe=i.type?dt(u._f):Qt(s),oe=s.type===it.BLUR||s.type===it.FOCUS_OUT,Tt=!ns(u._f)&&!r.resolver&&!x(t.errors,n)&&!u._f.deps||cs(oe,x(t.touchedFields,n),t.isSubmitted,_,m),Te=ft(n,h,oe);F(o,n,Fe),oe?(!i||!i.readOnly)&&(u._f.onBlur&&u._f.onBlur(s),L&&L(0)):u._f.onChange&&u._f.onChange(s);const Re=C(n,Fe,oe),Rt=!R(Re)||Te;if(!oe&&g.state.next({name:n,type:s.type,values:O(o)}),Tt)return(p.isValid||b.isValid)&&(r.mode==="onBlur"?oe&&D():oe||D()),Rt&&g.state.next({name:n,...Te?{}:Re});if(!oe&&Te&&g.state.next({...t}),r.resolver){const{errors:st}=await ne([n]);if(c(Fe),y){const Ut=ht(t.errors,l,n),rt=ht(st,l,Ut.name||n);V=rt.error,n=rt.name,z=R(st)}}else J([n],!0),V=(await xt(u,h.disabled,o,M,r.shouldUseNativeValidation))[n],J([n]),c(Fe),y&&(V?z=!1:(p.isValid||b.isValid)&&(z=await H(l,!0)));y&&(u._f.deps&&(!Array.isArray(u._f.deps)||u._f.deps.length>0)&&ye(u._f.deps),pe(n,z,V,Re))}},be=(s,i)=>{if(x(t.errors,i)&&s.focus)return s.focus(),1},ye=async(s,i={})=>{let n,y;const u=je(s);if(r.resolver){const c=await Ee(S(s)?s:u);n=R(c),y=s?!u.some(m=>x(c,m)):n}else s?(y=(await Promise.all(u.map(async c=>{const m=x(l,c);return await H(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!y&&!t.isValid)&&D()):y=n=await H(l);return g.state.next({...!q(s)||(p.isValid||b.isValid)&&n!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:n}:{},errors:t.errors}),i.shouldFocus&&!y&&_e(l,be,s?u:h.mount),y},Ve=(s,i)=>{let n={...f.mount?o:d};return i&&(n=wt(i.dirtyFields?t.dirtyFields:t.touchedFields,n)),S(s)?n:q(s)?x(n,s):s.map(y=>x(n,y))},Je=(s,i)=>({invalid:!!x((i||t).errors,s),isDirty:!!x((i||t).dirtyFields,s),error:x((i||t).errors,s),isValidating:!!x(t.validatingFields,s),isTouched:!!x((i||t).touchedFields,s)}),Nt=s=>{s&&je(s).forEach(i=>k(t.errors,i)),g.state.next({errors:s?t.errors:{}})},Ge=(s,i,n)=>{const y=(x(l,s,{_f:{}})._f||{}).ref,u=x(t.errors,s)||{},{ref:c,message:m,type:_,...V}=u;F(t.errors,s,{...V,...i,ref:y}),g.state.next({name:s,errors:t.errors,isValid:!1}),n&&n.shouldFocus&&y&&y.focus&&y.focus()},St=(s,i)=>$(s)?g.state.subscribe({next:n=>"values"in n&&s(v(void 0,i),n)}):v(s,i,!0),Ke=s=>g.state.subscribe({next:i=>{ds(s.name,i.name,s.exact)&&os(i,s.formState||p,Lt,s.reRenderRoot)&&s.callback({values:{...o},...t,...i,defaultValues:d})}}).unsubscribe,kt=s=>(f.mount=!0,b={...b,...s.formState},Ke({...s,formState:b})),Ce=(s,i={})=>{for(const n of s?je(s):h.mount)h.mount.delete(n),h.array.delete(n),i.keepValue||(k(l,n),k(o,n)),!i.keepError&&k(t.errors,n),!i.keepDirty&&k(t.dirtyFields,n),!i.keepTouched&&k(t.touchedFields,n),!i.keepIsValidating&&k(t.validatingFields,n),!r.shouldUnregister&&!i.keepDefaultValue&&k(d,n);g.state.next({values:O(o)}),g.state.next({...t,...i.keepDirty?{isDirty:K()}:{}}),!i.keepIsValid&&D()},Ye=({disabled:s,name:i})=>{(X(s)&&f.mount||s||h.disabled.has(i))&&(s?h.disabled.add(i):h.disabled.delete(i))},Oe=(s,i={})=>{let n=x(l,s);const y=X(i.disabled)||X(r.disabled);return F(l,s,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:s}},name:s,mount:!0,...i}}),h.mount.add(s),n?Ye({disabled:X(i.disabled)?i.disabled:r.disabled,name:s}):G(s,!0,i.value),{...y?{disabled:i.disabled||r.disabled}:{},...r.progressive?{required:!!i.required,min:ve(i.min),max:ve(i.max),minLength:ve(i.minLength),maxLength:ve(i.maxLength),pattern:ve(i.pattern)}:{},name:s,onChange:Y,onBlur:Y,ref:u=>{if(u){Oe(s,i),n=x(l,s);const c=S(u.value)&&u.querySelectorAll&&u.querySelectorAll("input,select,textarea")[0]||u,m=ts(c),_=n._f.refs||[];if(m?_.find(V=>V===c):c===n._f.ref)return;F(l,s,{_f:{...n._f,...m?{refs:[..._.filter(Ue),c,...Array.isArray(x(d,s))?[{}]:[]],ref:{type:c.type,name:s}}:{ref:c}}}),G(s,!1,void 0,c)}else n=x(l,s,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||i.shouldUnregister)&&!(Jt(h.array,s)&&f.action)&&h.unMount.add(s)}}},Le=()=>r.shouldFocusError&&_e(l,be,h.mount),Et=s=>{X(s)&&(g.state.next({disabled:s}),_e(l,(i,n)=>{const y=x(l,n);y&&(i.disabled=y._f.disabled||s,Array.isArray(y._f.refs)&&y._f.refs.forEach(u=>{u.disabled=y._f.disabled||s}))},0,!1))},Xe=(s,i)=>async n=>{let y;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let u=O(o);if(g.state.next({isSubmitting:!0}),r.resolver){const{errors:c,values:m}=await ne();t.errors=c,u=O(m)}else await H(l);if(h.disabled.size)for(const c of h.disabled)k(u,c);if(k(t.errors,"root"),R(t.errors)){g.state.next({errors:{}});try{await s(u,n)}catch(c){y=c}}else i&&await i({...t.errors},n),Le(),setTimeout(Le);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:R(t.errors)&&!y,submitCount:t.submitCount+1,errors:t.errors}),y)throw y},Ct=(s,i={})=>{x(l,s)&&(S(i.defaultValue)?U(s,O(x(d,s))):(U(s,i.defaultValue),F(d,s,O(i.defaultValue))),i.keepTouched||k(t.touchedFields,s),i.keepDirty||(k(t.dirtyFields,s),t.isDirty=i.defaultValue?K(s,O(x(d,s))):K()),i.keepError||(k(t.errors,s),p.isValid&&D()),g.state.next({...t}))},Ze=(s,i={})=>{const n=s?O(s):d,y=O(n),u=R(s),c=u?d:y;if(i.keepDefaultValues||(d=n),!i.keepValues){if(i.keepDirtyValues){const m=new Set([...h.mount,...Object.keys(ge(d,o))]);for(const _ of Array.from(m))x(t.dirtyFields,_)?F(c,_,x(o,_)):U(_,x(c,_))}else{if(We&&S(s))for(const m of h.mount){const _=x(l,m);if(_&&_._f){const V=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;if(De(V)){const z=V.closest("form");if(z){z.reset();break}}}}if(i.keepFieldsRef)for(const m of h.mount)U(m,x(c,m));else l={}}o=r.shouldUnregister?i.keepDefaultValues?O(d):{}:O(c),g.array.next({values:{...c}}),g.state.next({values:{...c}})}h={mount:i.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!p.isValid||!!i.keepIsValid||!!i.keepDirtyValues||!r.shouldUnregister&&!R(c),f.watch=!!r.shouldUnregister,g.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:u?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ce(s,d)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:u?{}:i.keepDirtyValues?i.keepDefaultValues&&o?ge(d,o):t.dirtyFields:i.keepDefaultValues&&s?ge(d,s):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:d})},et=(s,i)=>Ze($(s)?s(o):s,i),Ot=(s,i={})=>{const n=x(l,s),y=n&&n._f;if(y){const u=y.refs?y.refs[0]:y.ref;u.focus&&(u.focus(),i.shouldSelect&&$(u.select)&&u.select())}},Lt=s=>{t={...t,...s}},tt={control:{register:Oe,unregister:Ce,getFieldState:Je,handleSubmit:Xe,setError:Ge,_subscribe:Ke,_runSchema:ne,_focusError:Le,_getWatch:v,_getDirty:K,_setValid:D,_setFieldArray:ke,_setDisabledField:Ye,_setErrors:se,_getFieldArray:w,_reset:Ze,_resetDefaultValues:()=>$(r.defaultValues)&&r.defaultValues().then(s=>{et(s,r.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:ue,_disableForm:Et,_subjects:g,_proxyFormState:p,get _fields(){return l},get _formValues(){return o},get _state(){return f},set _state(s){f=s},get _defaultValues(){return d},get _names(){return h},set _names(s){h=s},get _formState(){return t},get _options(){return r},set _options(s){r={...r,...s}}},subscribe:kt,trigger:ye,register:Oe,handleSubmit:Xe,watch:St,setValue:U,getValues:Ve,reset:et,resetField:Ct,clearErrors:Nt,unregister:Ce,setError:Ge,setFocus:Ot,getFieldState:Je};return{...tt,formControl:tt}}function xs(e={}){const r=P.useRef(void 0),t=P.useRef(void 0),[l,d]=P.useState({isDirty:!1,isValidating:!1,isLoading:$(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:l},e.defaultValues&&!$(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=ys(e);r.current={...h,formState:l}}const o=r.current.control;return o._options=e,Xt(()=>{const f=o._subscribe({formState:o._proxyFormState,callback:()=>d({...o._formState}),reRenderRoot:!0});return d(h=>({...h,isReady:!0})),o._formState.isReady=!0,f},[o]),P.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),P.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),P.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),P.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),P.useEffect(()=>{if(o._proxyFormState.isDirty){const f=o._getDirty();f!==l.isDirty&&o._subjects.state.next({isDirty:f})}},[o,l.isDirty]),P.useEffect(()=>{e.values&&!ce(e.values,t.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),t.current=e.values,d(f=>({...f}))):o._resetDefaultValues()},[o,e.values]),P.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),r.current.formState=Yt(l,o),r.current}function ws(){return[{title:"Sombra Dashboard"},{name:"description",content:"Operational overview for Sombra databases"}]}const ps=It(function(){const{health:r,stats:t,fetchedAt:l}=Mt(),d=new Intl.NumberFormat,o=new Intl.NumberFormat(void 0,{style:"unit",unit:"byte",unitDisplay:"narrow"}),f=t.storage.estimated_node_count===0;return a.jsxs("div",{className:"space-y-6 px-4 py-10 max-w-6xl mx-auto",children:[a.jsxs("header",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pt,{variant:r.status==="ok"?"default":"secondary",className:he("uppercase tracking-wide",r.status==="ok"?"bg-emerald-500 text-white hover:bg-emerald-500":"bg-amber-500 text-black hover:bg-amber-500"),children:r.status}),a.jsxs("span",{className:"text-muted-foreground text-sm",children:["Last refreshed ",new Date(l).toLocaleTimeString()]})]}),a.jsx("h1",{className:"text-3xl font-semibold",children:"Database Overview"}),a.jsx("p",{className:"text-muted-foreground",children:"Real-time signals surfaced from the Sombra CLI dashboard server."})]}),a.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs(Z,{children:[a.jsxs(ee,{className:"space-y-1",children:[a.jsx(de,{children:"Read-only mode"}),a.jsx(te,{className:"text-2xl",children:r.read_only?"Enabled":"Disabled"})]}),a.jsxs(ae,{className:"text-sm text-muted-foreground",children:["Mutating admin commands (vacuum, import, checkpoint) are"," ",r.read_only?"currently disabled.":"available."]})]}),a.jsxs(Z,{children:[a.jsxs(ee,{className:"space-y-1",children:[a.jsx(de,{children:"Pager cache pages"}),a.jsx(te,{className:"text-2xl",children:d.format(t.pager.cache_pages)})]}),a.jsxs(ae,{className:"text-sm text-muted-foreground",children:["Page size ",d.format(t.pager.page_size)," bytes"]})]}),a.jsxs(Z,{children:[a.jsxs(ee,{className:"space-y-1",children:[a.jsx(de,{children:"Estimated records"}),a.jsxs(te,{className:"text-2xl",children:[d.format(t.storage.estimated_node_count)," nodes"]})]}),a.jsxs(ae,{className:"text-sm text-muted-foreground",children:[d.format(t.storage.estimated_edge_count)," edges"]})]})]}),a.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs(Z,{children:[a.jsxs(ee,{children:[a.jsx(te,{children:"Pager & WAL"}),a.jsx(de,{children:"Cache behaviour and write-ahead log state."})]}),a.jsx(ae,{children:a.jsxs(Ie,{children:[a.jsx(jt,{children:a.jsxs(le,{children:[a.jsx(Pe,{children:"Metric"}),a.jsx(Pe,{className:"text-right",children:"Value"})]})}),a.jsxs(Me,{children:[a.jsx(ie,{label:"Cache hits",value:t.pager.hits}),a.jsx(ie,{label:"Cache misses",value:t.pager.misses}),a.jsx(ie,{label:"Evictions",value:t.pager.evictions}),a.jsx(ie,{label:"Dirty writebacks",value:t.pager.dirty_writebacks}),a.jsx(ie,{label:"Last checkpoint LSN",value:t.pager.last_checkpoint_lsn}),a.jsxs(le,{children:[a.jsx(B,{children:"WAL size"}),a.jsx(B,{className:"text-right font-mono",children:o.format(t.wal.size_bytes)})]}),a.jsxs(le,{children:[a.jsx(B,{children:"WAL file"}),a.jsx(B,{className:"text-right text-sm text-muted-foreground",children:t.wal.exists?t.wal.path:"not present"})]})]})]})})]}),a.jsxs(Z,{children:[a.jsxs(ee,{children:[a.jsx(te,{children:"Storage layout"}),a.jsx(de,{children:"Internals of the current dataset."})]}),a.jsx(ae,{children:a.jsx(Ie,{children:a.jsxs(Me,{children:[a.jsx(ie,{label:"Next node ID",value:t.storage.next_node_id}),a.jsx(ie,{label:"Next edge ID",value:t.storage.next_edge_id}),a.jsx(ie,{label:"Inline property blob",value:t.storage.inline_prop_blob}),a.jsx(ie,{label:"Inline property value",value:t.storage.inline_prop_value}),a.jsxs(le,{children:[a.jsx(B,{children:"Distinct neighbors default"}),a.jsx(B,{className:"text-right font-mono",children:t.storage.distinct_neighbors_default?"true":"false"})]}),a.jsxs(le,{children:[a.jsx(B,{children:"Database file"}),a.jsx(B,{className:"text-right text-sm text-muted-foreground",children:t.filesystem.db_path})]}),a.jsxs(le,{children:[a.jsx(B,{children:"DB size"}),a.jsx(B,{className:"text-right font-mono",children:o.format(t.filesystem.db_size_bytes)})]})]})})})]})]}),a.jsx("section",{className:"grid gap-6 lg:grid-cols-2",children:a.jsxs(Z,{className:"col-span-full",children:[a.jsxs(ee,{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[a.jsxs("div",{children:[a.jsx(te,{children:"Query console"}),a.jsx(de,{children:"Paste a JSON query specification and run it against the connected database. Queries are limited to read-only operations in the MVP."})]}),a.jsx(Ae,{asChild:!0,variant:"outline",size:"sm",children:a.jsx(mt,{to:"/graph",children:"Open Graph Explorer"})})]}),a.jsxs(ae,{className:"space-y-4",children:[f&&a.jsxs(gt,{children:[a.jsx(bt,{children:"No data detected"}),a.jsxs(vt,{children:[a.jsx("p",{children:"The connected database has zero nodes, so the sample query below will fail until you seed demo data or import your own graph."}),a.jsxs("code",{className:"rounded bg-muted px-2 py-1 font-mono text-xs",children:["sombra seed-demo ",t.filesystem.db_path," --create"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["(Use ",a.jsx("code",{children:"cargo run --bin cli -- seed-demo ..."})," if you do not have the ",a.jsx("code",{children:"sombra"})," binary installed.)"]})]})]}),a.jsx(ms,{})]})]})})]})});function ie({label:e,value:r}){const t=new Intl.NumberFormat;return a.jsxs(le,{children:[a.jsx(B,{children:e}),a.jsx(B,{className:"text-right font-mono",children:t.format(r)})]})}function ms(){const e=xs({defaultValues:{payload:JSON.stringify(Bt,null,2)}}),[r,t]=xe.useState(null),[l,d]=xe.useState(null),[o,f]=xe.useState(!1),[h,L]=xe.useState([]),A=xe.useMemo(()=>r?.rows??null,[r]),p=xe.useMemo(()=>{if(!A||A.length===0)return[];const b=new Set;for(const g of A)Object.keys(g).forEach(M=>b.add(M));return Array.from(b)},[A]);return a.jsxs("form",{className:"space-y-4",onSubmit:e.handleSubmit(async b=>{f(!0),d(null);try{const g=JSON.parse(b.payload),M=await zt(g),W=Ht(M);t({raw:M,rows:W});const D={id:crypto.randomUUID?.()??`${Date.now()}`,payload:b.payload,timestamp:new Date().toISOString(),rowCount:Array.isArray(W)?W.length:null};L(J=>[D,...J].slice(0,5))}catch(g){t(null),d(g instanceof Error?g.message:String(g))}finally{f(!1)}}),children:[a.jsx(qt,{...e.register("payload"),minLength:2,rows:10,className:"font-mono text-sm"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ae,{type:"submit",disabled:o,children:o?"Runningâ€¦":"Run query"}),l&&a.jsxs(gt,{variant:"destructive",className:"flex-1",children:[a.jsx(bt,{children:"Query failed"}),a.jsx(vt,{className:"font-mono text-xs",children:l})]})]}),A&&A.length>0&&a.jsxs(Z,{children:[a.jsx(ee,{children:a.jsx(te,{className:"text-base",children:"Rows"})}),a.jsx(ae,{children:a.jsx("div",{className:"overflow-auto",children:a.jsxs(Ie,{children:[a.jsx(jt,{children:a.jsx(le,{children:p.map(b=>a.jsx(Pe,{children:b},b))})}),a.jsx(Me,{children:A.map((b,g)=>a.jsx(le,{children:p.map(M=>a.jsx(B,{className:"font-mono text-xs",children:Wt(b[M])},M))},g))})]})})})]}),A&&A.length>0&&a.jsx(gs,{rowCount:A.length}),r!==null&&a.jsxs(Z,{children:[a.jsx(ee,{children:a.jsx(te,{className:"text-base",children:"Result"})}),a.jsx(ae,{children:a.jsx("pre",{className:"text-xs bg-muted p-4 rounded-md overflow-auto",children:a.jsx("code",{children:JSON.stringify(r.raw,null,2)})})})]}),a.jsxs(Z,{children:[a.jsxs(ee,{children:[a.jsx(te,{className:"text-base",children:"Recent queries"}),a.jsx(de,{children:"Stored locally for this session (last 5 entries)."})]}),a.jsxs(ae,{className:"space-y-3",children:[h.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"Run a query to build history."}),h.map(b=>a.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-md border p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:b.rowCount===null?"Unknown row count":`${b.rowCount} row${b.rowCount===1?"":"s"}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(b.timestamp).toLocaleTimeString()})]}),a.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>e.setValue("payload",b.payload,{shouldDirty:!0}),children:"Load"})]},b.id))]})]})]})}function gs({rowCount:e}){return a.jsx(Z,{className:"border-dashed bg-muted/30",children:a.jsxs(ee,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx(te,{className:"text-base",children:"Visualize this result"}),a.jsxs(de,{children:["Open the Graph Explorer to map the ",e," row",e===1?"":"s"," that just ran without overloading the console view."]})]}),a.jsx(Ae,{asChild:!0,size:"sm",children:a.jsx(mt,{to:"/graph",children:"Launch Graph Explorer"})})]})})}export{ps as default,ws as meta};
