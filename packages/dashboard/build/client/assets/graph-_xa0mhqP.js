const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/reagraph-canvas-e1Taxmzx.js","assets/chunk-UIGDSWPH-5nd72nXt.js","assets/client-CYDusvxr.js","assets/index-BLg3-rAx.js","assets/button-CUtCf1f6.js","assets/property-value-BhhgLb4z.js"])))=>i.map(i=>d[i]);
import{r as d,o as u,R as Je,x as Ci,w as oc}from"./chunk-UIGDSWPH-5nd72nXt.js";import{k as Ni,l as Ei,m as ic,C as tt,d as nt,g as rt,e as pn,B as St,h as Lt,n as sc,D as go,o as ac,i as cc,j as lc,T as uc,A as vo,b as xo,c as yo}from"./property-value-BhhgLb4z.js";import{c as Ve,a as ie,b as fc,d as Hr,u as ee,B as ae}from"./button-CUtCf1f6.js";import{r as Ln,R as dc}from"./index-BLg3-rAx.js";const hc=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],pc=Ve("activity",hc);const mc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],gc=Ve("arrow-right",mc);const vc=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xc=Ve("chevron-up",vc);const yc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wc=Ve("circle",yc);const bc=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Sc=Ve("maximize-2",bc);const _c=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tn=Ve("plus",_c);const Cc=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Nc=Ve("share-2",Cc);const Ec=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],er=Ve("trash-2",Ec);const Rc=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ri=Ve("x",Rc),Ac="modulepreload",jc=function(e){return"/"+e},wo={},Tc=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");o=l(n.map(c=>{if(c=jc(c),c in wo)return;wo[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Ac,f||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),f)return new Promise((v,b)=>{m.addEventListener("load",v),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};var Pc={value:()=>{}};function Kt(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mn(n)}function mn(e){this._=e}function Mc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mn.prototype=Kt.prototype={constructor:mn,on:function(e,t){var n=this._,r=Mc(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=Ic(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=bo(n[o],e.name,t);else if(t==null)for(o in n)n[o]=bo(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function Ic(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function bo(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Pc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yr="http://www.w3.org/1999/xhtml";const So={svg:"http://www.w3.org/2000/svg",xhtml:yr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $n(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),So.hasOwnProperty(t)?{space:So[t],local:e}:e}function kc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yr&&t.documentElement.namespaceURI===yr?t.createElement(e):t.createElementNS(n,e)}}function Oc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ai(e){var t=$n(e);return(t.local?Oc:kc)(t)}function Dc(){}function Wr(e){return e==null?Dc:function(){return this.querySelector(e)}}function Lc(e){typeof e!="function"&&(e=Wr(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),l,c,f=0;f<s;++f)(l=i[f])&&(c=e.call(l,l.__data__,f,i))&&("__data__"in l&&(c.__data__=l.__data__),a[f]=c);return new ve(r,this._parents)}function $c(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fc(){return[]}function ji(e){return e==null?Fc:function(){return this.querySelectorAll(e)}}function zc(e){return function(){return $c(e.apply(this,arguments))}}function Bc(e){typeof e=="function"?e=zc(e):e=ji(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),o.push(l));return new ve(r,o)}function Ti(e){return function(){return this.matches(e)}}function Pi(e){return function(t){return t.matches(e)}}var Vc=Array.prototype.find;function Hc(e){return function(){return Vc.call(this.children,e)}}function Wc(){return this.firstElementChild}function Uc(e){return this.select(e==null?Wc:Hc(typeof e=="function"?e:Pi(e)))}var Kc=Array.prototype.filter;function Gc(){return Array.from(this.children)}function Xc(e){return function(){return Kc.call(this.children,e)}}function Yc(e){return this.selectAll(e==null?Gc:Xc(typeof e=="function"?e:Pi(e)))}function qc(e){typeof e!="function"&&(e=Ti(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new ve(r,this._parents)}function Mi(e){return new Array(e.length)}function Zc(){return new ve(this._enter||this._groups.map(Mi),this._parents)}function Cn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cn.prototype={constructor:Cn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qc(e){return function(){return e}}function Jc(e,t,n,r,o,i){for(var s=0,a,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Cn(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function el(e,t,n,r,o,i,s){var a,l,c=new Map,f=t.length,h=i.length,m=new Array(f),v;for(a=0;a<f;++a)(l=t[a])&&(m[a]=v=s.call(l,l.__data__,a,t)+"",c.has(v)?o[a]=l:c.set(v,l));for(a=0;a<h;++a)v=s.call(e,i[a],a,i)+"",(l=c.get(v))?(r[a]=l,l.__data__=i[a],c.delete(v)):n[a]=new Cn(e,i[a]);for(a=0;a<f;++a)(l=t[a])&&c.get(m[a])===l&&(o[a]=l)}function tl(e){return e.__data__}function nl(e,t){if(!arguments.length)return Array.from(this,tl);var n=t?el:Jc,r=this._parents,o=this._groups;typeof e!="function"&&(e=Qc(e));for(var i=o.length,s=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var f=r[c],h=o[c],m=h.length,v=rl(e.call(f,f&&f.__data__,c,r)),b=v.length,p=a[c]=new Array(b),g=s[c]=new Array(b),x=l[c]=new Array(m);n(f,h,p,g,x,v,t);for(var w=0,S=0,y,_;w<b;++w)if(y=p[w]){for(w>=S&&(S=w+1);!(_=g[S])&&++S<b;);y._next=_||null}}return s=new ve(s,r),s._enter=a,s._exit=l,s}function rl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ol(){return new ve(this._exit||this._groups.map(Mi),this._parents)}function il(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function sl(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var c=n[l],f=r[l],h=c.length,m=a[l]=new Array(h),v,b=0;b<h;++b)(v=c[b]||f[b])&&(m[b]=v);for(;l<o;++l)a[l]=n[l];return new ve(a,this._parents)}function al(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function cl(e){e||(e=ll);function t(h,m){return h&&m?e(h.__data__,m.__data__):!h-!m}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,l=o[i]=new Array(a),c,f=0;f<a;++f)(c=s[f])&&(l[f]=c);l.sort(t)}return new ve(o,this._parents).order()}function ll(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ul(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fl(){return Array.from(this)}function dl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function hl(){let e=0;for(const t of this)++e;return e}function pl(){return!this.node()}function ml(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function gl(e){return function(){this.removeAttribute(e)}}function vl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xl(e,t){return function(){this.setAttribute(e,t)}}function yl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Sl(e,t){var n=$n(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?vl:gl:typeof t=="function"?n.local?bl:wl:n.local?yl:xl)(n,t))}function Ii(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _l(e){return function(){this.style.removeProperty(e)}}function Cl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Nl(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function El(e,t,n){return arguments.length>1?this.each((t==null?_l:typeof t=="function"?Nl:Cl)(e,t,n??"")):_t(this.node(),e)}function _t(e,t){return e.style.getPropertyValue(t)||Ii(e).getComputedStyle(e,null).getPropertyValue(t)}function Rl(e){return function(){delete this[e]}}function Al(e,t){return function(){this[e]=t}}function jl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Tl(e,t){return arguments.length>1?this.each((t==null?Rl:typeof t=="function"?jl:Al)(e,t)):this.node()[e]}function ki(e){return e.trim().split(/^|\s+/)}function Ur(e){return e.classList||new Oi(e)}function Oi(e){this._node=e,this._names=ki(e.getAttribute("class")||"")}Oi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Di(e,t){for(var n=Ur(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Li(e,t){for(var n=Ur(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Pl(e){return function(){Di(this,e)}}function Ml(e){return function(){Li(this,e)}}function Il(e,t){return function(){(t.apply(this,arguments)?Di:Li)(this,e)}}function kl(e,t){var n=ki(e+"");if(arguments.length<2){for(var r=Ur(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Il:t?Pl:Ml)(n,t))}function Ol(){this.textContent=""}function Dl(e){return function(){this.textContent=e}}function Ll(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $l(e){return arguments.length?this.each(e==null?Ol:(typeof e=="function"?Ll:Dl)(e)):this.node().textContent}function Fl(){this.innerHTML=""}function zl(e){return function(){this.innerHTML=e}}function Bl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vl(e){return arguments.length?this.each(e==null?Fl:(typeof e=="function"?Bl:zl)(e)):this.node().innerHTML}function Hl(){this.nextSibling&&this.parentNode.appendChild(this)}function Wl(){return this.each(Hl)}function Ul(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kl(){return this.each(Ul)}function Gl(e){var t=typeof e=="function"?e:Ai(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Xl(){return null}function Yl(e,t){var n=typeof e=="function"?e:Ai(e),r=t==null?Xl:typeof t=="function"?t:Wr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ql(){var e=this.parentNode;e&&e.removeChild(this)}function Zl(){return this.each(ql)}function Ql(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eu(e){return this.select(e?Jl:Ql)}function tu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nu(e){return function(t){e.call(this,t,this.__data__)}}function ru(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ou(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function iu(e,t,n){return function(){var r=this.__on,o,i=nu(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function su(e,t,n){var r=ru(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,f;l<c;++l)for(o=0,f=a[l];o<i;++o)if((s=r[o]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?iu:ou,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function $i(e,t,n){var r=Ii(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function au(e,t){return function(){return $i(this,e,t)}}function cu(e,t){return function(){return $i(this,e,t.apply(this,arguments))}}function lu(e,t){return this.each((typeof t=="function"?cu:au)(e,t))}function*uu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Fi=[null];function ve(e,t){this._groups=e,this._parents=t}function Gt(){return new ve([[document.documentElement]],Fi)}function fu(){return this}ve.prototype=Gt.prototype={constructor:ve,select:Lc,selectAll:Bc,selectChild:Uc,selectChildren:Yc,filter:qc,data:nl,enter:Zc,exit:ol,join:il,merge:sl,selection:fu,order:al,sort:cl,call:ul,nodes:fl,node:dl,size:hl,empty:pl,each:ml,attr:Sl,style:El,property:Tl,classed:kl,text:$l,html:Vl,raise:Wl,lower:Kl,append:Gl,insert:Yl,remove:Zl,clone:eu,datum:tu,on:su,dispatch:lu,[Symbol.iterator]:uu};function xe(e){return typeof e=="string"?new ve([[document.querySelector(e)]],[document.documentElement]):new ve([[e]],Fi)}function du(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Le(e,t){if(e=du(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const hu={passive:!1},Ft={capture:!0,passive:!1};function tr(e){e.stopImmediatePropagation()}function vt(e){e.preventDefault(),e.stopImmediatePropagation()}function zi(e){var t=e.document.documentElement,n=xe(e).on("dragstart.drag",vt,Ft);"onselectstart"in t?n.on("selectstart.drag",vt,Ft):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bi(e,t){var n=e.document.documentElement,r=xe(e).on("dragstart.drag",null);t&&(r.on("click.drag",vt,Ft),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const nn=e=>()=>e;function wr(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:l,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}wr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pu(e){return!e.ctrlKey&&!e.button}function mu(){return this.parentNode}function gu(e,t){return t??{x:e.x,y:e.y}}function vu(){return navigator.maxTouchPoints||"ontouchstart"in this}function xu(){var e=pu,t=mu,n=gu,r=vu,o={},i=Kt("start","drag","end"),s=0,a,l,c,f,h=0;function m(y){y.on("mousedown.drag",v).filter(r).on("touchstart.drag",g).on("touchmove.drag",x,hu).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(y,_){if(!(f||!e.call(this,y,_))){var T=S(this,t.call(this,y,_),y,_,"mouse");T&&(xe(y.view).on("mousemove.drag",b,Ft).on("mouseup.drag",p,Ft),zi(y.view),tr(y),c=!1,a=y.clientX,l=y.clientY,T("start",y))}}function b(y){if(vt(y),!c){var _=y.clientX-a,T=y.clientY-l;c=_*_+T*T>h}o.mouse("drag",y)}function p(y){xe(y.view).on("mousemove.drag mouseup.drag",null),Bi(y.view,c),vt(y),o.mouse("end",y)}function g(y,_){if(e.call(this,y,_)){var T=y.changedTouches,E=t.call(this,y,_),P=T.length,A,j;for(A=0;A<P;++A)(j=S(this,E,y,_,T[A].identifier,T[A]))&&(tr(y),j("start",y,T[A]))}}function x(y){var _=y.changedTouches,T=_.length,E,P;for(E=0;E<T;++E)(P=o[_[E].identifier])&&(vt(y),P("drag",y,_[E]))}function w(y){var _=y.changedTouches,T=_.length,E,P;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),E=0;E<T;++E)(P=o[_[E].identifier])&&(tr(y),P("end",y,_[E]))}function S(y,_,T,E,P,A){var j=i.copy(),R=Le(A||T,_),O,D,C;if((C=n.call(y,new wr("beforestart",{sourceEvent:T,target:m,identifier:P,active:s,x:R[0],y:R[1],dx:0,dy:0,dispatch:j}),E))!=null)return O=C.x-R[0]||0,D=C.y-R[1]||0,function I(N,k,M){var F=R,z;switch(N){case"start":o[P]=I,z=s++;break;case"end":delete o[P],--s;case"drag":R=Le(M||k,_),z=s;break}j.call(N,y,new wr(N,{sourceEvent:k,subject:C,target:m,identifier:P,active:z,x:R[0]+O,y:R[1]+D,dx:R[0]-F[0],dy:R[1]-F[1],dispatch:j}),E)}}return m.filter=function(y){return arguments.length?(e=typeof y=="function"?y:nn(!!y),m):e},m.container=function(y){return arguments.length?(t=typeof y=="function"?y:nn(y),m):t},m.subject=function(y){return arguments.length?(n=typeof y=="function"?y:nn(y),m):n},m.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:nn(!!y),m):r},m.on=function(){var y=i.on.apply(i,arguments);return y===i?m:y},m.clickDistance=function(y){return arguments.length?(h=(y=+y)*y,m):Math.sqrt(h)},m}function Kr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xt(){}var zt=.7,Nn=1/zt,xt="\\s*([+-]?\\d+)\\s*",Bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,wu=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),bu=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),Su=new RegExp(`^rgba\\(${xt},${xt},${xt},${Bt}\\)$`),_u=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${Bt}\\)$`),Cu=new RegExp(`^hsl\\(${Bt},${Pe},${Pe}\\)$`),Nu=new RegExp(`^hsla\\(${Bt},${Pe},${Pe},${Bt}\\)$`),_o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kr(Xt,Vt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Co,formatHex:Co,formatHex8:Eu,formatHsl:Ru,formatRgb:No,toString:No});function Co(){return this.rgb().formatHex()}function Eu(){return this.rgb().formatHex8()}function Ru(){return Hi(this).formatHsl()}function No(){return this.rgb().formatRgb()}function Vt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Eo(t):n===3?new de(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wu.exec(e))?new de(t[1],t[2],t[3],1):(t=bu.exec(e))?new de(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Su.exec(e))?rn(t[1],t[2],t[3],t[4]):(t=_u.exec(e))?rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Cu.exec(e))?jo(t[1],t[2]/100,t[3]/100,1):(t=Nu.exec(e))?jo(t[1],t[2]/100,t[3]/100,t[4]):_o.hasOwnProperty(e)?Eo(_o[e]):e==="transparent"?new de(NaN,NaN,NaN,0):null}function Eo(e){return new de(e>>16&255,e>>8&255,e&255,1)}function rn(e,t,n,r){return r<=0&&(e=t=n=NaN),new de(e,t,n,r)}function Au(e){return e instanceof Xt||(e=Vt(e)),e?(e=e.rgb(),new de(e.r,e.g,e.b,e.opacity)):new de}function br(e,t,n,r){return arguments.length===1?Au(e):new de(e,t,n,r??1)}function de(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kr(de,br,Vi(Xt,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zt:Math.pow(zt,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new de(ot(this.r),ot(this.g),ot(this.b),En(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ro,formatHex:Ro,formatHex8:ju,formatRgb:Ao,toString:Ao}));function Ro(){return`#${et(this.r)}${et(this.g)}${et(this.b)}`}function ju(){return`#${et(this.r)}${et(this.g)}${et(this.b)}${et((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ao(){const e=En(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function En(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function et(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function jo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new we(e,t,n,r)}function Hi(e){if(e instanceof we)return new we(e.h,e.s,e.l,e.opacity);if(e instanceof Xt||(e=Vt(e)),!e)return new we;if(e instanceof we)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new we(s,a,l,e.opacity)}function Tu(e,t,n,r){return arguments.length===1?Hi(e):new we(e,t,n,r??1)}function we(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kr(we,Tu,Vi(Xt,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new we(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zt:Math.pow(zt,e),new we(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new de(nr(e>=240?e-240:e+120,o,r),nr(e,o,r),nr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new we(To(this.h),on(this.s),on(this.l),En(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=En(this.opacity);return`${e===1?"hsl(":"hsla("}${To(this.h)}, ${on(this.s)*100}%, ${on(this.l)*100}%${e===1?")":`, ${e})`}`}}));function To(e){return e=(e||0)%360,e<0?e+360:e}function on(e){return Math.max(0,Math.min(1,e||0))}function nr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Wi=e=>()=>e;function Pu(e,t){return function(n){return e+n*t}}function Mu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Iu(e){return(e=+e)==1?Ui:function(t,n){return n-t?Mu(t,n,e):Wi(isNaN(t)?n:t)}}function Ui(e,t){var n=t-e;return n?Pu(e,n):Wi(isNaN(e)?t:e)}const Po=(function e(t){var n=Iu(t);function r(o,i){var s=n((o=br(o)).r,(i=br(i)).r),a=n(o.g,i.g),l=n(o.b,i.b),c=Ui(o.opacity,i.opacity);return function(f){return o.r=s(f),o.g=a(f),o.b=l(f),o.opacity=c(f),o+""}}return r.gamma=e,r})(1);function Ue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rr=new RegExp(Sr.source,"g");function ku(e){return function(){return e}}function Ou(e){return function(t){return e(t)+""}}function Du(e,t){var n=Sr.lastIndex=rr.lastIndex=0,r,o,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Sr.exec(e))&&(o=rr.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,l.push({i:s,x:Ue(r,o)})),n=rr.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?Ou(l[0].x):ku(t):(t=l.length,function(c){for(var f=0,h;f<t;++f)a[(h=l[f]).i]=h.x(c);return a.join("")})}var Mo=180/Math.PI,_r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ki(e,t,n,r,o,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Mo,skewX:Math.atan(l)*Mo,scaleX:s,scaleY:a}}var sn;function Lu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_r:Ki(t.a,t.b,t.c,t.d,t.e,t.f)}function $u(e){return e==null||(sn||(sn=document.createElementNS("http://www.w3.org/2000/svg","g")),sn.setAttribute("transform",e),!(e=sn.transform.baseVal.consolidate()))?_r:(e=e.matrix,Ki(e.a,e.b,e.c,e.d,e.e,e.f))}function Gi(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function i(c,f,h,m,v,b){if(c!==h||f!==m){var p=v.push("translate(",null,t,null,n);b.push({i:p-4,x:Ue(c,h)},{i:p-2,x:Ue(f,m)})}else(h||m)&&v.push("translate("+h+t+m+n)}function s(c,f,h,m){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),m.push({i:h.push(o(h)+"rotate(",null,r)-2,x:Ue(c,f)})):f&&h.push(o(h)+"rotate("+f+r)}function a(c,f,h,m){c!==f?m.push({i:h.push(o(h)+"skewX(",null,r)-2,x:Ue(c,f)}):f&&h.push(o(h)+"skewX("+f+r)}function l(c,f,h,m,v,b){if(c!==h||f!==m){var p=v.push(o(v)+"scale(",null,",",null,")");b.push({i:p-4,x:Ue(c,h)},{i:p-2,x:Ue(f,m)})}else(h!==1||m!==1)&&v.push(o(v)+"scale("+h+","+m+")")}return function(c,f){var h=[],m=[];return c=e(c),f=e(f),i(c.translateX,c.translateY,f.translateX,f.translateY,h,m),s(c.rotate,f.rotate,h,m),a(c.skewX,f.skewX,h,m),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,h,m),c=f=null,function(v){for(var b=-1,p=m.length,g;++b<p;)h[(g=m[b]).i]=g.x(v);return h.join("")}}}var Fu=Gi(Lu,"px, ","px)","deg)"),zu=Gi($u,", ",")",")"),Bu=1e-12;function Io(e){return((e=Math.exp(e))+1/e)/2}function Vu(e){return((e=Math.exp(e))-1/e)/2}function Hu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Wu=(function e(t,n,r){function o(i,s){var a=i[0],l=i[1],c=i[2],f=s[0],h=s[1],m=s[2],v=f-a,b=h-l,p=v*v+b*b,g,x;if(p<Bu)x=Math.log(m/c)/t,g=function(E){return[a+E*v,l+E*b,c*Math.exp(t*E*x)]};else{var w=Math.sqrt(p),S=(m*m-c*c+r*p)/(2*c*n*w),y=(m*m-c*c-r*p)/(2*m*n*w),_=Math.log(Math.sqrt(S*S+1)-S),T=Math.log(Math.sqrt(y*y+1)-y);x=(T-_)/t,g=function(E){var P=E*x,A=Io(_),j=c/(n*w)*(A*Hu(t*P+_)-Vu(_));return[a+j*v,l+j*b,c*A/Io(t*P+_)]}}return g.duration=x*1e3*t/Math.SQRT2,g}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},o})(Math.SQRT2,2,4);var Ct=0,kt=0,Pt=0,Xi=1e3,Rn,Ot,An=0,it=0,Fn=0,Ht=typeof performance=="object"&&performance.now?performance:Date,Yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Gr(){return it||(Yi(Uu),it=Ht.now()+Fn)}function Uu(){it=0}function jn(){this._call=this._time=this._next=null}jn.prototype=Xr.prototype={constructor:jn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Gr():+n)+(t==null?0:+t),!this._next&&Ot!==this&&(Ot?Ot._next=this:Rn=this,Ot=this),this._call=e,this._time=n,Cr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cr())}};function Xr(e,t,n){var r=new jn;return r.restart(e,t,n),r}function Ku(){Gr(),++Ct;for(var e=Rn,t;e;)(t=it-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ct}function ko(){it=(An=Ht.now())+Fn,Ct=kt=0;try{Ku()}finally{Ct=0,Xu(),it=0}}function Gu(){var e=Ht.now(),t=e-An;t>Xi&&(Fn-=t,An=e)}function Xu(){for(var e,t=Rn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rn=n);Ot=e,Cr(r)}function Cr(e){if(!Ct){kt&&(kt=clearTimeout(kt));var t=e-it;t>24?(e<1/0&&(kt=setTimeout(ko,e-Ht.now()-Fn)),Pt&&(Pt=clearInterval(Pt))):(Pt||(An=Ht.now(),Pt=setInterval(Gu,Xi)),Ct=1,Yi(ko))}}function Oo(e,t,n){var r=new jn;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Yu=Kt("start","end","cancel","interrupt"),qu=[],qi=0,Do=1,Nr=2,gn=3,Lo=4,Er=5,vn=6;function zn(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Zu(e,n,{name:t,index:r,group:o,on:Yu,tween:qu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:qi})}function Yr(e,t){var n=_e(e,t);if(n.state>qi)throw new Error("too late; already scheduled");return n}function ke(e,t){var n=_e(e,t);if(n.state>gn)throw new Error("too late; already running");return n}function _e(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zu(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Xr(i,0,n.time);function i(c){n.state=Do,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,h,m,v;if(n.state!==Do)return l();for(f in r)if(v=r[f],v.name===n.name){if(v.state===gn)return Oo(s);v.state===Lo?(v.state=vn,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[f]):+f<t&&(v.state=vn,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[f])}if(Oo(function(){n.state===gn&&(n.state=Lo,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Nr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nr){for(n.state=gn,o=new Array(m=n.tween.length),f=0,h=-1;f<m;++f)(v=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++h]=v);o.length=h+1}}function a(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Er,1),h=-1,m=o.length;++h<m;)o[h].call(e,f);n.state===Er&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=vn,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function xn(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>Nr&&r.state<Er,r.state=vn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Qu(e){return this.each(function(){xn(this,e)})}function Ju(e,t){var n,r;return function(){var o=ke(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function ef(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=ke(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=a;break}l===c&&o.push(a)}i.tween=o}}function tf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=_e(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Ju:ef)(n,e,t))}function qr(e,t,n){var r=e._id;return e.each(function(){var o=ke(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return _e(o,r).value[t]}}function Zi(e,t){var n;return(typeof t=="number"?Ue:t instanceof Vt?Po:(n=Vt(t))?(t=n,Po):Du)(e,t)}function nf(e){return function(){this.removeAttribute(e)}}function rf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function of(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function sf(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function af(e,t,n){var r,o,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===o?i:(o=l,i=t(r=s,a)))}}function cf(e,t,n){var r,o,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===o?i:(o=l,i=t(r=s,a)))}}function lf(e,t){var n=$n(e),r=n==="transform"?zu:Zi;return this.attrTween(e,typeof t=="function"?(n.local?cf:af)(n,r,qr(this,"attr."+e,t)):t==null?(n.local?rf:nf)(n):(n.local?sf:of)(n,r,t))}function uf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ff(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function df(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ff(e,i)),n}return o._value=t,o}function hf(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&uf(e,i)),n}return o._value=t,o}function pf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$n(e);return this.tween(n,(r.local?df:hf)(r,t))}function mf(e,t){return function(){Yr(this,e).delay=+t.apply(this,arguments)}}function gf(e,t){return t=+t,function(){Yr(this,e).delay=t}}function vf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mf:gf)(t,e)):_e(this.node(),t).delay}function xf(e,t){return function(){ke(this,e).duration=+t.apply(this,arguments)}}function yf(e,t){return t=+t,function(){ke(this,e).duration=t}}function wf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xf:yf)(t,e)):_e(this.node(),t).duration}function bf(e,t){if(typeof t!="function")throw new Error;return function(){ke(this,e).ease=t}}function Sf(e){var t=this._id;return arguments.length?this.each(bf(t,e)):_e(this.node(),t).ease}function _f(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ke(this,e).ease=n}}function Cf(e){if(typeof e!="function")throw new Error;return this.each(_f(this._id,e))}function Nf(e){typeof e!="function"&&(e=Ti(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],l,c=0;c<s;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Fe(r,this._parents,this._name,this._id)}function Ef(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var l=t[a],c=n[a],f=l.length,h=s[a]=new Array(f),m,v=0;v<f;++v)(m=l[v]||c[v])&&(h[v]=m);for(;a<r;++a)s[a]=t[a];return new Fe(s,this._parents,this._name,this._id)}function Rf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Af(e,t,n){var r,o,i=Rf(t)?Yr:ke;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function jf(e,t){var n=this._id;return arguments.length<2?_e(this.node(),n).on.on(e):this.each(Af(n,e,t))}function Tf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Pf(){return this.on("end.remove",Tf(this._id))}function Mf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wr(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],l=a.length,c=i[s]=new Array(l),f,h,m=0;m<l;++m)(f=a[m])&&(h=e.call(f,f.__data__,m,a))&&("__data__"in f&&(h.__data__=f.__data__),c[m]=h,zn(c[m],t,n,m,c,_e(f,n)));return new Fe(i,this._parents,t,n)}function If(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ji(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var l=r[a],c=l.length,f,h=0;h<c;++h)if(f=l[h]){for(var m=e.call(f,f.__data__,h,l),v,b=_e(f,n),p=0,g=m.length;p<g;++p)(v=m[p])&&zn(v,t,n,p,m,b);i.push(m),s.push(f)}return new Fe(i,s,t,n)}var kf=Gt.prototype.constructor;function Of(){return new kf(this._groups,this._parents)}function Df(e,t){var n,r,o;return function(){var i=_t(this,e),s=(this.style.removeProperty(e),_t(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function Qi(e){return function(){this.style.removeProperty(e)}}function Lf(e,t,n){var r,o=n+"",i;return function(){var s=_t(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function $f(e,t,n){var r,o,i;return function(){var s=_t(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),_t(this,e))),s===l?null:s===r&&l===o?i:(o=l,i=t(r=s,a))}}function Ff(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var l=ke(this,e),c=l.on,f=l.value[i]==null?a||(a=Qi(t)):void 0;(c!==n||o!==f)&&(r=(n=c).copy()).on(s,o=f),l.on=r}}function zf(e,t,n){var r=(e+="")=="transform"?Fu:Zi;return t==null?this.styleTween(e,Df(e,r)).on("end.style."+e,Qi(e)):typeof t=="function"?this.styleTween(e,$f(e,r,qr(this,"style."+e,t))).each(Ff(this._id,e)):this.styleTween(e,Lf(e,r,t),n).on("end.style."+e,null)}function Bf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Vf(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&Bf(e,s,n)),r}return i._value=t,i}function Hf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Vf(e,t,n??""))}function Wf(e){return function(){this.textContent=e}}function Uf(e){return function(){var t=e(this);this.textContent=t??""}}function Kf(e){return this.tween("text",typeof e=="function"?Uf(qr(this,"text",e)):Wf(e==null?"":e+""))}function Gf(e){return function(t){this.textContent=e.call(this,t)}}function Xf(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Gf(o)),t}return r._value=e,r}function Yf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xf(e))}function qf(){for(var e=this._name,t=this._id,n=Ji(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var f=_e(l,t);zn(l,e,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Fe(r,this._parents,e,n)}function Zf(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--o===0&&i()}};n.each(function(){var c=ke(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),o===0&&i()})}var Qf=0;function Fe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ji(){return++Qf}var De=Gt.prototype;Fe.prototype={constructor:Fe,select:Mf,selectAll:If,selectChild:De.selectChild,selectChildren:De.selectChildren,filter:Nf,merge:Ef,selection:Of,transition:qf,call:De.call,nodes:De.nodes,node:De.node,size:De.size,empty:De.empty,each:De.each,on:jf,attr:lf,attrTween:pf,style:zf,styleTween:Hf,text:Kf,textTween:Yf,remove:Pf,tween:tf,delay:vf,duration:wf,ease:Sf,easeVarying:Cf,end:Zf,[Symbol.iterator]:De[Symbol.iterator]};function es(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Jf={time:null,delay:0,duration:250,ease:es};function ed(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function td(e){var t,n;e instanceof Fe?(t=e._id,e=e._name):(t=Ji(),(n=Jf).time=Gr(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,l,c=0;c<a;++c)(l=s[c])&&zn(l,e,t,c,s,n||ed(l,t));return new Fe(r,this._parents,e,t)}Gt.prototype.interrupt=Qu;Gt.prototype.transition=td;function nd(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function o(){var i,s=n.length,a,l=0,c=0;for(i=0;i<s;++i)a=n[i],l+=a.x,c+=a.y;for(l=(l/s-e)*r,c=(c/s-t)*r,i=0;i<s;++i)a=n[i],a.x-=l,a.y-=c}return o.initialize=function(i){n=i},o.x=function(i){return arguments.length?(e=+i,o):e},o.y=function(i){return arguments.length?(t=+i,o):t},o.strength=function(i){return arguments.length?(r=+i,o):r},o}function rd(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ts(this.cover(t,n),t,n,e)}function ts(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var o,i=e._root,s={data:r},a=e._x0,l=e._y0,c=e._x1,f=e._y1,h,m,v,b,p,g,x,w;if(!i)return e._root=s,e;for(;i.length;)if((p=t>=(h=(a+c)/2))?a=h:c=h,(g=n>=(m=(l+f)/2))?l=m:f=m,o=i,!(i=i[x=g<<1|p]))return o[x]=s,e;if(v=+e._x.call(null,i.data),b=+e._y.call(null,i.data),t===v&&n===b)return s.next=i,o?o[x]=s:e._root=s,e;do o=o?o[x]=new Array(4):e._root=new Array(4),(p=t>=(h=(a+c)/2))?a=h:c=h,(g=n>=(m=(l+f)/2))?l=m:f=m;while((x=g<<1|p)===(w=(b>=m)<<1|v>=h));return o[w]=i,o[x]=s,e}function od(e){var t,n,r=e.length,o,i,s=new Array(r),a=new Array(r),l=1/0,c=1/0,f=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(s[n]=o,a[n]=i,o<l&&(l=o),o>f&&(f=o),i<c&&(c=i),i>h&&(h=i));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),n=0;n<r;++n)ts(this,s[n],a[n],e[n]);return this}function id(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var s=o-n||1,a=this._root,l,c;n>e||e>=o||r>t||t>=i;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=a,a=l,s*=2,c){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this}function sd(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function ad(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ce(e,t,n,r,o){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=o}function cd(e,t,n){var r,o=this._x0,i=this._y0,s,a,l,c,f=this._x1,h=this._y1,m=[],v=this._root,b,p;for(v&&m.push(new ce(v,o,i,f,h)),n==null?n=1/0:(o=e-n,i=t-n,f=e+n,h=t+n,n*=n);b=m.pop();)if(!(!(v=b.node)||(s=b.x0)>f||(a=b.y0)>h||(l=b.x1)<o||(c=b.y1)<i))if(v.length){var g=(s+l)/2,x=(a+c)/2;m.push(new ce(v[3],g,x,l,c),new ce(v[2],s,x,g,c),new ce(v[1],g,a,l,x),new ce(v[0],s,a,g,x)),(p=(t>=x)<<1|e>=g)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-p],m[m.length-1-p]=b)}else{var w=e-+this._x.call(null,v.data),S=t-+this._y.call(null,v.data),y=w*w+S*S;if(y<n){var _=Math.sqrt(n=y);o=e-_,i=t-_,f=e+_,h=t+_,r=v.data}}return r}function ld(e){if(isNaN(f=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,r,o,i,s=this._x0,a=this._y0,l=this._x1,c=this._y1,f,h,m,v,b,p,g,x;if(!n)return this;if(n.length)for(;;){if((b=f>=(m=(s+l)/2))?s=m:l=m,(p=h>=(v=(a+c)/2))?a=v:c=v,t=n,!(n=n[g=p<<1|b]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,x=g)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(i=n.next)&&delete n.next,o?(i?o.next=i:delete o.next,this):t?(i?t[g]=i:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=i,this)}function ud(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function fd(){return this._root}function dd(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function hd(e){var t=[],n,r=this._root,o,i,s,a,l;for(r&&t.push(new ce(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,i=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(i+a)/2,f=(s+l)/2;(o=r[3])&&t.push(new ce(o,c,f,a,l)),(o=r[2])&&t.push(new ce(o,i,f,c,l)),(o=r[1])&&t.push(new ce(o,c,s,a,f)),(o=r[0])&&t.push(new ce(o,i,s,c,f))}return this}function pd(e){var t=[],n=[],r;for(this._root&&t.push(new ce(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var o=r.node;if(o.length){var i,s=r.x0,a=r.y0,l=r.x1,c=r.y1,f=(s+l)/2,h=(a+c)/2;(i=o[0])&&t.push(new ce(i,s,a,f,h)),(i=o[1])&&t.push(new ce(i,f,a,l,h)),(i=o[2])&&t.push(new ce(i,s,h,f,c)),(i=o[3])&&t.push(new ce(i,f,h,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function md(e){return e[0]}function gd(e){return arguments.length?(this._x=e,this):this._x}function vd(e){return e[1]}function xd(e){return arguments.length?(this._y=e,this):this._y}function Zr(e,t,n){var r=new Qr(t??md,n??vd,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Qr(e,t,n,r,o,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function $o(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ue=Zr.prototype=Qr.prototype;ue.copy=function(){var e=new Qr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=$o(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(r=t.source[o])&&(r.length?n.push({source:r,target:t.target[o]=new Array(4)}):t.target[o]=$o(r));return e};ue.add=rd;ue.addAll=od;ue.cover=id;ue.data=sd;ue.extent=ad;ue.find=cd;ue.remove=ld;ue.removeAll=ud;ue.root=fd;ue.size=dd;ue.visit=hd;ue.visitAfter=pd;ue.x=gd;ue.y=xd;function le(e){return function(){return e}}function Ke(e){return(e()-.5)*1e-6}function yd(e){return e.x+e.vx}function wd(e){return e.y+e.vy}function bd(e){var t,n,r,o=1,i=1;typeof e!="function"&&(e=le(e==null?1:+e));function s(){for(var c,f=t.length,h,m,v,b,p,g,x=0;x<i;++x)for(h=Zr(t,yd,wd).visitAfter(a),c=0;c<f;++c)m=t[c],p=n[m.index],g=p*p,v=m.x+m.vx,b=m.y+m.vy,h.visit(w);function w(S,y,_,T,E){var P=S.data,A=S.r,j=p+A;if(P){if(P.index>m.index){var R=v-P.x-P.vx,O=b-P.y-P.vy,D=R*R+O*O;D<j*j&&(R===0&&(R=Ke(r),D+=R*R),O===0&&(O=Ke(r),D+=O*O),D=(j-(D=Math.sqrt(D)))/D*o,m.vx+=(R*=D)*(j=(A*=A)/(g+A)),m.vy+=(O*=D)*j,P.vx-=R*(j=1-j),P.vy-=O*j)}return}return y>v+j||T<v-j||_>b+j||E<b-j}}function a(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function l(){if(t){var c,f=t.length,h;for(n=new Array(f),c=0;c<f;++c)h=t[c],n[h.index]=+e(h,c,t)}}return s.initialize=function(c,f){t=c,r=f,l()},s.iterations=function(c){return arguments.length?(i=+c,s):i},s.strength=function(c){return arguments.length?(o=+c,s):o},s.radius=function(c){return arguments.length?(e=typeof c=="function"?c:le(+c),l(),s):e},s}function Sd(e){return e.index}function Fo(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function _d(e){var t=Sd,n=h,r,o=le(30),i,s,a,l,c,f=1;e==null&&(e=[]);function h(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function m(g){for(var x=0,w=e.length;x<f;++x)for(var S=0,y,_,T,E,P,A,j;S<w;++S)y=e[S],_=y.source,T=y.target,E=T.x+T.vx-_.x-_.vx||Ke(c),P=T.y+T.vy-_.y-_.vy||Ke(c),A=Math.sqrt(E*E+P*P),A=(A-i[S])/A*g*r[S],E*=A,P*=A,T.vx-=E*(j=l[S]),T.vy-=P*j,_.vx+=E*(j=1-j),_.vy+=P*j}function v(){if(s){var g,x=s.length,w=e.length,S=new Map(s.map((_,T)=>[t(_,T,s),_])),y;for(g=0,a=new Array(x);g<w;++g)y=e[g],y.index=g,typeof y.source!="object"&&(y.source=Fo(S,y.source)),typeof y.target!="object"&&(y.target=Fo(S,y.target)),a[y.source.index]=(a[y.source.index]||0)+1,a[y.target.index]=(a[y.target.index]||0)+1;for(g=0,l=new Array(w);g<w;++g)y=e[g],l[g]=a[y.source.index]/(a[y.source.index]+a[y.target.index]);r=new Array(w),b(),i=new Array(w),p()}}function b(){if(s)for(var g=0,x=e.length;g<x;++g)r[g]=+n(e[g],g,e)}function p(){if(s)for(var g=0,x=e.length;g<x;++g)i[g]=+o(e[g],g,e)}return m.initialize=function(g,x){s=g,c=x,v()},m.links=function(g){return arguments.length?(e=g,v(),m):e},m.id=function(g){return arguments.length?(t=g,m):t},m.iterations=function(g){return arguments.length?(f=+g,m):f},m.strength=function(g){return arguments.length?(n=typeof g=="function"?g:le(+g),b(),m):n},m.distance=function(g){return arguments.length?(o=typeof g=="function"?g:le(+g),p(),m):o},m}const Cd=1664525,Nd=1013904223,zo=4294967296;function Ed(){let e=1;return()=>(e=(Cd*e+Nd)%zo)/zo}function Rd(e){return e.x}function Ad(e){return e.y}var jd=10,Td=Math.PI*(3-Math.sqrt(5));function Pd(e){var t,n=1,r=.001,o=1-Math.pow(r,1/300),i=0,s=.6,a=new Map,l=Xr(h),c=Kt("tick","end"),f=Ed();e==null&&(e=[]);function h(){m(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function m(p){var g,x=e.length,w;p===void 0&&(p=1);for(var S=0;S<p;++S)for(n+=(i-n)*o,a.forEach(function(y){y(n)}),g=0;g<x;++g)w=e[g],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function v(){for(var p=0,g=e.length,x;p<g;++p){if(x=e[p],x.index=p,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var w=jd*Math.sqrt(.5+p),S=p*Td;x.x=w*Math.cos(S),x.y=w*Math.sin(S)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function b(p){return p.initialize&&p.initialize(e,f),p}return v(),t={tick:m,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(e=p,v(),a.forEach(b),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(o=+p,t):+o},alphaTarget:function(p){return arguments.length?(i=+p,t):i},velocityDecay:function(p){return arguments.length?(s=1-p,t):1-s},randomSource:function(p){return arguments.length?(f=p,a.forEach(b),t):f},force:function(p,g){return arguments.length>1?(g==null?a.delete(p):a.set(p,b(g)),t):a.get(p)},find:function(p,g,x){var w=0,S=e.length,y,_,T,E,P;for(x==null?x=1/0:x*=x,w=0;w<S;++w)E=e[w],y=p-E.x,_=g-E.y,T=y*y+_*_,T<x&&(P=E,x=T);return P},on:function(p,g){return arguments.length>1?(c.on(p,g),t):c.on(p)}}}function Md(){var e,t,n,r,o=le(-30),i,s=1,a=1/0,l=.81;function c(v){var b,p=e.length,g=Zr(e,Rd,Ad).visitAfter(h);for(r=v,b=0;b<p;++b)t=e[b],g.visit(m)}function f(){if(e){var v,b=e.length,p;for(i=new Array(b),v=0;v<b;++v)p=e[v],i[p.index]=+o(p,v,e)}}function h(v){var b=0,p,g,x=0,w,S,y;if(v.length){for(w=S=y=0;y<4;++y)(p=v[y])&&(g=Math.abs(p.value))&&(b+=p.value,x+=g,w+=g*p.x,S+=g*p.y);v.x=w/x,v.y=S/x}else{p=v,p.x=p.data.x,p.y=p.data.y;do b+=i[p.data.index];while(p=p.next)}v.value=b}function m(v,b,p,g){if(!v.value)return!0;var x=v.x-t.x,w=v.y-t.y,S=g-b,y=x*x+w*w;if(S*S/l<y)return y<a&&(x===0&&(x=Ke(n),y+=x*x),w===0&&(w=Ke(n),y+=w*w),y<s&&(y=Math.sqrt(s*y)),t.vx+=x*v.value*r/y,t.vy+=w*v.value*r/y),!0;if(v.length||y>=a)return;(v.data!==t||v.next)&&(x===0&&(x=Ke(n),y+=x*x),w===0&&(w=Ke(n),y+=w*w),y<s&&(y=Math.sqrt(s*y)));do v.data!==t&&(S=i[v.data.index]*r/y,t.vx+=x*S,t.vy+=w*S);while(v=v.next)}return c.initialize=function(v,b){e=v,n=b,f()},c.strength=function(v){return arguments.length?(o=typeof v=="function"?v:le(+v),f(),c):o},c.distanceMin=function(v){return arguments.length?(s=v*v,c):Math.sqrt(s)},c.distanceMax=function(v){return arguments.length?(a=v*v,c):Math.sqrt(a)},c.theta=function(v){return arguments.length?(l=v*v,c):Math.sqrt(l)},c}function Id(e){var t=le(.1),n,r,o;typeof e!="function"&&(e=le(e==null?0:+e));function i(a){for(var l=0,c=n.length,f;l<c;++l)f=n[l],f.vx+=(o[l]-f.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),o=new Array(l),a=0;a<l;++a)r[a]=isNaN(o[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return i.initialize=function(a){n=a,s()},i.strength=function(a){return arguments.length?(t=typeof a=="function"?a:le(+a),s(),i):t},i.x=function(a){return arguments.length?(e=typeof a=="function"?a:le(+a),s(),i):e},i}function kd(e){var t=le(.1),n,r,o;typeof e!="function"&&(e=le(e==null?0:+e));function i(a){for(var l=0,c=n.length,f;l<c;++l)f=n[l],f.vy+=(o[l]-f.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),o=new Array(l),a=0;a<l;++a)r[a]=isNaN(o[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return i.initialize=function(a){n=a,s()},i.strength=function(a){return arguments.length?(t=typeof a=="function"?a:le(+a),s(),i):t},i.y=function(a){return arguments.length?(e=typeof a=="function"?a:le(+a),s(),i):e},i}const an=e=>()=>e;function Od(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function $e(e,t,n){this.k=e,this.x=t,this.y=n}$e.prototype={constructor:$e,scale:function(e){return e===1?this:new $e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yt=new $e(1,0,0);ns.prototype=$e.prototype;function ns(e){for(;!e.__zoom;)if(!(e=e.parentNode))return yt;return e.__zoom}function or(e){e.stopImmediatePropagation()}function Mt(e){e.preventDefault(),e.stopImmediatePropagation()}function Dd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ld(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bo(){return this.__zoom||yt}function $d(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fd(){return navigator.maxTouchPoints||"ontouchstart"in this}function zd(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Bd(){var e=Dd,t=Ld,n=zd,r=$d,o=Fd,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Wu,c=Kt("start","zoom","end"),f,h,m,v=500,b=150,p=0,g=10;function x(C){C.property("__zoom",Bo).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",j).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(C,I,N,k){var M=C.selection?C.selection():C;M.property("__zoom",Bo),C!==M?_(C,I,N,k):M.interrupt().each(function(){T(this,arguments).event(k).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},x.scaleBy=function(C,I,N,k){x.scaleTo(C,function(){var M=this.__zoom.k,F=typeof I=="function"?I.apply(this,arguments):I;return M*F},N,k)},x.scaleTo=function(C,I,N,k){x.transform(C,function(){var M=t.apply(this,arguments),F=this.__zoom,z=N==null?y(M):typeof N=="function"?N.apply(this,arguments):N,K=F.invert(z),Z=typeof I=="function"?I.apply(this,arguments):I;return n(S(w(F,Z),z,K),M,s)},N,k)},x.translateBy=function(C,I,N,k){x.transform(C,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),s)},null,k)},x.translateTo=function(C,I,N,k,M){x.transform(C,function(){var F=t.apply(this,arguments),z=this.__zoom,K=k==null?y(F):typeof k=="function"?k.apply(this,arguments):k;return n(yt.translate(K[0],K[1]).scale(z.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof N=="function"?-N.apply(this,arguments):-N),F,s)},k,M)};function w(C,I){return I=Math.max(i[0],Math.min(i[1],I)),I===C.k?C:new $e(I,C.x,C.y)}function S(C,I,N){var k=I[0]-N[0]*C.k,M=I[1]-N[1]*C.k;return k===C.x&&M===C.y?C:new $e(C.k,k,M)}function y(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function _(C,I,N,k){C.on("start.zoom",function(){T(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(k).end()}).tween("zoom",function(){var M=this,F=arguments,z=T(M,F).event(k),K=t.apply(M,F),Z=N==null?y(K):typeof N=="function"?N.apply(M,F):N,re=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),Q=M.__zoom,$=typeof I=="function"?I.apply(M,F):I,V=l(Q.invert(Z).concat(re/Q.k),$.invert(Z).concat(re/$.k));return function(L){if(L===1)L=$;else{var W=V(L),X=re/W[2];L=new $e(X,Z[0]-W[0]*X,Z[1]-W[1]*X)}z.zoom(null,L)}})}function T(C,I,N){return!N&&C.__zooming||new E(C,I)}function E(C,I){this.that=C,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,I),this.taps=0}E.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,I){return this.mouse&&C!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var I=xe(this.that).datum();c.call(C,this.that,new Od(C,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:c}),I)}};function P(C,...I){if(!e.apply(this,arguments))return;var N=T(this,I).event(C),k=this.__zoom,M=Math.max(i[0],Math.min(i[1],k.k*Math.pow(2,r.apply(this,arguments)))),F=Le(C);if(N.wheel)(N.mouse[0][0]!==F[0]||N.mouse[0][1]!==F[1])&&(N.mouse[1]=k.invert(N.mouse[0]=F)),clearTimeout(N.wheel);else{if(k.k===M)return;N.mouse=[F,k.invert(F)],xn(this),N.start()}Mt(C),N.wheel=setTimeout(z,b),N.zoom("mouse",n(S(w(k,M),N.mouse[0],N.mouse[1]),N.extent,s));function z(){N.wheel=null,N.end()}}function A(C,...I){if(m||!e.apply(this,arguments))return;var N=C.currentTarget,k=T(this,I,!0).event(C),M=xe(C.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",re,!0),F=Le(C,N),z=C.clientX,K=C.clientY;zi(C.view),or(C),k.mouse=[F,this.__zoom.invert(F)],xn(this),k.start();function Z(Q){if(Mt(Q),!k.moved){var $=Q.clientX-z,V=Q.clientY-K;k.moved=$*$+V*V>p}k.event(Q).zoom("mouse",n(S(k.that.__zoom,k.mouse[0]=Le(Q,N),k.mouse[1]),k.extent,s))}function re(Q){M.on("mousemove.zoom mouseup.zoom",null),Bi(Q.view,k.moved),Mt(Q),k.event(Q).end()}}function j(C,...I){if(e.apply(this,arguments)){var N=this.__zoom,k=Le(C.changedTouches?C.changedTouches[0]:C,this),M=N.invert(k),F=N.k*(C.shiftKey?.5:2),z=n(S(w(N,F),k,M),t.apply(this,I),s);Mt(C),a>0?xe(this).transition().duration(a).call(_,z,k,C):xe(this).call(x.transform,z,k,C)}}function R(C,...I){if(e.apply(this,arguments)){var N=C.touches,k=N.length,M=T(this,I,C.changedTouches.length===k).event(C),F,z,K,Z;for(or(C),z=0;z<k;++z)K=N[z],Z=Le(K,this),Z=[Z,this.__zoom.invert(Z),K.identifier],M.touch0?!M.touch1&&M.touch0[2]!==Z[2]&&(M.touch1=Z,M.taps=0):(M.touch0=Z,F=!0,M.taps=1+!!f);f&&(f=clearTimeout(f)),F&&(M.taps<2&&(h=Z[0],f=setTimeout(function(){f=null},v)),xn(this),M.start())}}function O(C,...I){if(this.__zooming){var N=T(this,I).event(C),k=C.changedTouches,M=k.length,F,z,K,Z;for(Mt(C),F=0;F<M;++F)z=k[F],K=Le(z,this),N.touch0&&N.touch0[2]===z.identifier?N.touch0[0]=K:N.touch1&&N.touch1[2]===z.identifier&&(N.touch1[0]=K);if(z=N.that.__zoom,N.touch1){var re=N.touch0[0],Q=N.touch0[1],$=N.touch1[0],V=N.touch1[1],L=(L=$[0]-re[0])*L+(L=$[1]-re[1])*L,W=(W=V[0]-Q[0])*W+(W=V[1]-Q[1])*W;z=w(z,Math.sqrt(L/W)),K=[(re[0]+$[0])/2,(re[1]+$[1])/2],Z=[(Q[0]+V[0])/2,(Q[1]+V[1])/2]}else if(N.touch0)K=N.touch0[0],Z=N.touch0[1];else return;N.zoom("touch",n(S(z,K,Z),N.extent,s))}}function D(C,...I){if(this.__zooming){var N=T(this,I).event(C),k=C.changedTouches,M=k.length,F,z;for(or(C),m&&clearTimeout(m),m=setTimeout(function(){m=null},v),F=0;F<M;++F)z=k[F],N.touch0&&N.touch0[2]===z.identifier?delete N.touch0:N.touch1&&N.touch1[2]===z.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(z=Le(z,this),Math.hypot(h[0]-z[0],h[1]-z[1])<g)){var K=xe(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return x.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:an(+C),x):r},x.filter=function(C){return arguments.length?(e=typeof C=="function"?C:an(!!C),x):e},x.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:an(!!C),x):o},x.extent=function(C){return arguments.length?(t=typeof C=="function"?C:an([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),x):t},x.scaleExtent=function(C){return arguments.length?(i[0]=+C[0],i[1]=+C[1],x):[i[0],i[1]]},x.translateExtent=function(C){return arguments.length?(s[0][0]=+C[0][0],s[1][0]=+C[1][0],s[0][1]=+C[0][1],s[1][1]=+C[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(C){return arguments.length?(n=C,x):n},x.duration=function(C){return arguments.length?(a=+C,x):a},x.interpolate=function(C){return arguments.length?(l=C,x):l},x.on=function(){var C=c.on.apply(c,arguments);return C===c?x:C},x.clickDistance=function(C){return arguments.length?(p=(C=+C)*C,x):Math.sqrt(p)},x.tapDistance=function(C){return arguments.length?(g=+C,x):g},x}const Vo=["#60a5fa","#34d399","#f472b6","#fbbf24","#a78bfa","#38bdf8","#fb7185"],Ho="#8ea6d5",Wo="#0f172a",Uo=.08,Ko=4.5;function Vd({nodes:e,edges:t,height:n=540,onNodeSelect:r,selectedNodeId:o,showEdgeLabels:i=!1}){const s=d.useRef(null),a=d.useRef(null),l=d.useId(),c=d.useId(),f=d.useId(),[h,m]=d.useState({width:720,height:n}),[v,b]=d.useState(1),p=d.useRef(null),g=d.useRef(null),x=d.useRef(null),w=d.useRef(null),S=d.useRef(null),y=d.useRef(new Map),_=d.useRef(null),T=d.useRef(!1),E=d.useRef(null),P=d.useRef(i),[A,j]=d.useState(null),[R,O]=d.useState(null),[D,C]=d.useState(null),I=d.useMemo(()=>{const $=V=>V.replace(/:/g,"-");return{marker:$(l),glow:$(c),gradient:$(f)}},[l,c,f]);d.useEffect(()=>{_.current=o??null},[o]);const N=d.useCallback(($,V)=>{if(!a.current)return;if(!V){j(null);return}const L=a.current.getBoundingClientRect();j({node:V,x:$.clientX-L.left,y:$.clientY-L.top})},[]),k=d.useMemo(()=>{const $=new Map;for(const V of t){const L=V.source,W=V.target;typeof L!="number"||typeof W!="number"||L===W||($.has(L)||$.set(L,new Set),$.has(W)||$.set(W,new Set),$.get(L).add(W),$.get(W).add(L))}return $},[t]),M=d.useMemo(()=>Ud(e),[e]),F=d.useMemo(()=>Array.from(M.entries()).sort(($,V)=>$[0].localeCompare(V[0])),[M]),z=d.useMemo(()=>{if(R){const $=new Set([R]);return k.get(R)?.forEach(L=>$.add(L)),{focusNodeIds:$,primaryNodeIds:new Set([R]),hoveredEdgeId:null}}if(D){const $=new Set([D.sourceId,D.targetId]);return{focusNodeIds:new Set($),primaryNodeIds:$,hoveredEdgeId:D.id}}if(o){const $=new Set([o]);return k.get(o)?.forEach(L=>$.add(L)),{focusNodeIds:$,primaryNodeIds:new Set([o]),hoveredEdgeId:null}}return null},[R,D,o,k]),K=d.useCallback($=>{if($.length===0)return!1;const V=s.current,L=S.current;if(!V||!L)return!1;const W=$.map(Qe=>y.current.get(Qe)).filter(Qe=>typeof Qe?.x=="number"&&typeof Qe?.y=="number");if(W.length===0)return!1;let X=1/0,H=1/0,Y=-1/0,J=-1/0;for(const Qe of W){const Jt=Qe.x??0,en=Qe.y??0;Jt<X&&(X=Jt),Jt>Y&&(Y=Jt),en<H&&(H=en),en>J&&(J=en)}if(!Number.isFinite(X)||!Number.isFinite(H))return!1;const te=80;X-=te,H-=te,Y+=te,J+=te;const he=Math.max(Y-X,120),ut=Math.max(J-H,120),pe=ns(V),Ce=-pe.x/pe.k,Qt=-pe.y/pe.k,po=Ce+h.width/pe.k,ft=Qt+h.height/pe.k,dt=48,ht=X>=Ce+dt&&Y<=po-dt,B=H>=Qt+dt&&J<=ft-dt;if(ht&&B)return!0;const U=h.width/he,oe=h.height/ut,ec=Math.min(Ko,Math.max(Uo,.85*Math.min(U,oe))),tc=(X+Y)/2,nc=(H+J)/2,rc=yt.translate(h.width/2,h.height/2).scale(ec).translate(-tc,-nc),mo=xe(V);return mo.interrupt(),mo.transition().duration(750).ease(es).call(L.transform,rc),!0},[h]),Z=d.useCallback($=>{if(!$)return!0;const V=new Set([$]);return k.get($)?.forEach(W=>V.add(W)),K(Array.from(V))},[k,K]);d.useEffect(()=>{m($=>({...$,height:n}))},[n]),d.useEffect(()=>()=>{typeof window<"u"&&E.current!==null&&(window.cancelAnimationFrame(E.current),E.current=null)},[]),d.useEffect(()=>{if(!a.current)return;const $=new ResizeObserver(V=>{for(const L of V)m(W=>({...W,width:L.contentRect.width}))});return $.observe(a.current),()=>$.disconnect()},[]),d.useEffect(()=>{const $=s.current;if(!$)return;const V=xe($);if(V.selectAll("*").remove(),e.length===0){p.current=null,g.current=null,y.current=new Map,x.current=null,w.current=null,j(null),b(B=>B===1?B:1);return}const L=B=>{const U=Number(B.toFixed(2));if(typeof window>"u"){b(U);return}E.current!==null&&window.cancelAnimationFrame(E.current),E.current=window.requestAnimationFrame(()=>{b(U),E.current=null})},W=e.map(B=>({...B})),X=t.map(B=>({...B})),H=V.append("defs"),Y=H.append("radialGradient").attr("id",I.gradient).attr("cx","50%").attr("cy","50%").attr("r","75%");Y.append("stop").attr("offset","0%").attr("stop-color","#1f2937").attr("stop-opacity",1),Y.append("stop").attr("offset","100%").attr("stop-color","#020617").attr("stop-opacity",1),H.append("filter").attr("id",I.glow).attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feDropShadow").attr("dx",0).attr("dy",3).attr("stdDeviation",6).attr("flood-color","#38bdf8").attr("flood-opacity",.35),H.append("marker").attr("id",I.marker).attr("viewBox","0 -5 10 10").attr("refX",14).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",Ho),V.append("rect").attr("width",h.width).attr("height",h.height).attr("fill",`url(#${I.gradient})`);const te=V.append("g"),he=Bd().scaleExtent([Uo,Ko]).on("zoom",B=>{te.attr("transform",B.transform.toString()),L(B.transform.k)});V.call(he),V.call(he.transform,yt),S.current=he;const pe=te.append("g").attr("stroke",Ho).attr("stroke-opacity",.55).attr("stroke-linecap","round").selectAll("line").data(X,B=>B.id).join("line").attr("stroke-width",1.4).attr("marker-end",t.length?`url(#${I.marker})`:null).style("cursor","pointer").on("mouseenter",(B,U)=>{O(null),C({id:U.id,sourceId:Tn(U.source),targetId:Tn(U.target)})}).on("mouseleave",(B,U)=>{C(oe=>oe&&oe.id===U.id?null:oe)});g.current=pe;const Ce=te.append("g").attr("class","edge-labels").attr("pointer-events","none");x.current=Ce;const Qt=Ce.selectAll("text").data(X,B=>B.id).join("text").attr("fill","#fefefe").attr("font-size",10).attr("font-weight",500).attr("text-anchor","middle").attr("dy",-4).attr("opacity",.95).attr("paint-order","stroke").attr("stroke","rgba(2,6,23,0.85)").attr("stroke-width",2).attr("stroke-linejoin","round").text(B=>Hd(B));w.current=Qt,Ce.attr("display",P.current?null:"none");const ft=te.append("g").selectAll("g").data(W,B=>B.id).join(B=>{const U=B.append("g").attr("role","button").attr("tabindex",0).attr("aria-label",oe=>oe.label).style("cursor","pointer");return U.append("circle").attr("data-circle-role","halo").attr("r",26).attr("fill",oe=>Go(M.get(oe.groups[0]??"")??"#38bdf8",.18)).attr("stroke",Go("#ffffff",.12)).attr("stroke-width",1),U.append("circle").attr("data-circle-role","core").attr("r",16).attr("fill",oe=>M.get(oe.groups[0]??"")??"#38bdf8").attr("stroke",Wo).attr("stroke-width",1.4).attr("filter",`url(#${I.glow})`).attr("opacity",.96),U.append("text").attr("fill","#fdfdfd").attr("text-anchor","middle").attr("dy",4).attr("font-size",11).attr("font-weight",600).attr("paint-order","stroke").attr("stroke","rgba(2,6,23,0.85)").attr("stroke-width",1).attr("stroke-linejoin","round").text(oe=>Wd(oe.label)),U});ft.on("click",(B,U)=>{_.current===U.id?r?.(null):r?.(U)}).on("mouseenter",(B,U)=>{O(U.id),C(null),N(B,U)}).on("mousemove",(B,U)=>{N(B,U)}).on("mouseleave",(B,U)=>{O(oe=>oe===U.id?null:oe),N(B,null)});const dt=xu().on("start",(B,U)=>{B.active||ht.alphaTarget(.3).restart(),U.fx=U.x??0,U.fy=U.y??0}).on("drag",(B,U)=>{U.fx=B.x,U.fy=B.y}).on("end",(B,U)=>{B.active||ht.alphaTarget(0),U.fx=null,U.fy=null}),ht=Pd(W).force("link",_d(X).id(B=>B.id).distance(90).strength(.6)).force("charge",Md().strength(-320).theta(.9)).force("center",nd(h.width/2,h.height/2)).force("collision",bd().radius(32).strength(.7)).force("x",Id(h.width/2).strength(.045)).force("y",kd(h.height/2).strength(.045)).alpha(1).restart();return ft.call(dt),ht.on("tick",()=>{for(const B of W)y.current.set(B.id,B);if(ft.attr("transform",B=>`translate(${B.x??0},${B.y??0})`),pe.attr("x1",B=>He(B.source).x).attr("y1",B=>He(B.source).y).attr("x2",B=>He(B.target).x).attr("y2",B=>He(B.target).y),w.current&&w.current.attr("x",B=>{const U=He(B.source),oe=He(B.target);return(U.x+oe.x)/2}).attr("y",B=>{const U=He(B.source),oe=He(B.target);return(U.y+oe.y)/2}),T.current&&_.current){const B=Z(_.current);T.current=!B}}),p.current=ft,T.current=!!_.current,()=>{ht.stop(),V.on(".zoom",null),typeof window<"u"&&E.current!==null&&(window.cancelAnimationFrame(E.current),E.current=null),x.current=null,w.current=null}},[e,t,h,I,r,Z,M]),d.useEffect(()=>{P.current=i,x.current&&x.current.attr("display",i?null:"none")},[i]),d.useEffect(()=>{O(null),C(null)},[e,t]),d.useEffect(()=>{if(!p.current)return;const $=z?.focusNodeIds??null,V=z?.primaryNodeIds??new Set;p.current.attr("data-selected",H=>H.id===o?"true":null).attr("opacity",H=>$?$.has(H.id)?1:.15:1),p.current.selectAll('circle[data-circle-role="core"]').attr("stroke",H=>V.has(H.id)?"#fbbf24":Wo).attr("stroke-width",H=>V.has(H.id)?2.4:1.4).attr("r",H=>V.has(H.id)?18:16),p.current.selectAll('circle[data-circle-role="halo"]').attr("opacity",H=>$?V.has(H.id)?.9:$.has(H.id)?.5:.05:.4),p.current.selectAll("text").attr("fill-opacity",H=>$?$.has(H.id)?1:.35:1),g.current&&g.current.attr("stroke-opacity",H=>$?z?.hoveredEdgeId&&H.id===z.hoveredEdgeId?1:ir(H,V)?.95:.08:.55).attr("stroke-width",H=>$?z?.hoveredEdgeId&&H.id===z.hoveredEdgeId?2.6:ir(H,V)?2.2:.8:1.4),w.current&&w.current.attr("opacity",H=>$?z?.hoveredEdgeId&&H.id===z.hoveredEdgeId||ir(H,V)?1:.1:.8)},[o,e,z]),d.useEffect(()=>{if(!o){T.current=!1;return}const $=Z(o);T.current=!$},[o,Z]);const re=$=>{const V=s.current,L=S.current;if(!V||!L)return;const W=xe(V);if($==="reset"){W.transition().duration(250).call(L.transform,yt);return}const X=$==="in"?1.25:.8;W.transition().duration(200).call(L.scaleBy,X)},Q=A?{left:Math.min(Math.max(A.x+16,8),Math.max(h.width-220,8)),top:Math.min(Math.max(A.y+16,8),Math.max(h.height-140,8))}:null;return u.jsxs("div",{ref:a,className:"relative h-full min-h-[420px] overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 p-4 shadow-2xl shadow-black/40",children:[u.jsx("svg",{ref:s,width:h.width,height:h.height,role:"img","aria-label":"Graph visualization",className:"size-full"}),e.length===0?u.jsx("div",{className:"text-muted-foreground absolute inset-0 flex items-center justify-center text-sm",children:"Select at least one node column to render the graph."}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pointer-events-none absolute left-4 top-4 hidden max-w-[220px] text-xs text-white/80 lg:block",children:[u.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-white",children:"Graph tips"}),u.jsx("p",{children:"Drag nodes to rearrange. Scroll, pinch, or use the buttons to explore."})]}),F.length>0&&u.jsxs("div",{className:"pointer-events-none absolute right-4 top-4 max-w-[240px] rounded-2xl border border-white/10 bg-slate-950/70 p-3 text-[11px] text-white/80 shadow-lg backdrop-blur",children:[u.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wide text-white",children:"Legend"}),u.jsx("div",{className:"mt-2 space-y-1.5",children:F.map(([$,V])=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40",style:{backgroundColor:V}}),u.jsx("span",{className:"truncate text-xs",children:$})]},$))})]}),u.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col items-end gap-2 text-white",children:[u.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs font-medium tracking-wide",children:["Zoom ",v.toFixed(2),"x"]}),u.jsxs("div",{className:"flex overflow-hidden rounded-full border border-white/15 bg-black/40 text-base shadow-lg backdrop-blur",children:[u.jsx("button",{type:"button",className:"h-10 w-10 border-r border-white/10 font-semibold leading-none text-white transition hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Zoom out",onClick:()=>re("out"),children:"-"}),u.jsx("button",{type:"button",className:"h-10 w-10 font-semibold leading-none text-white transition hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Reset zoom",onClick:()=>re("reset"),children:"1x"}),u.jsx("button",{type:"button",className:"h-10 w-10 border-l border-white/10 font-semibold leading-none text-white transition hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50","aria-label":"Zoom in",onClick:()=>re("in"),children:"+"})]})]})]}),A&&Q&&u.jsxs("div",{className:"pointer-events-none absolute z-20 w-52 rounded-xl border border-white/10 bg-slate-900/90 p-3 text-xs text-white shadow-xl backdrop-blur",style:Q,children:[u.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-slate-300",children:"Node"}),u.jsx("p",{className:"text-sm font-semibold",children:A.node.label}),u.jsxs("p",{className:"text-[0.65rem] text-slate-400",children:["id ",A.node.id]}),A.node.groups.length>0&&u.jsxs("p",{className:"mt-1 text-[0.65rem] text-slate-300",children:["Groups: ",A.node.groups.slice(0,3).join(", ")]}),u.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(A.node.props).slice(0,2).map(([$,V])=>u.jsxs("div",{children:[u.jsx("p",{className:"text-[0.6rem] uppercase tracking-wide text-slate-400",children:$}),u.jsx(Ni,{value:V,propertyKey:$,compact:!0})]},$))})]})]})}function Go(e,t){const n=e.replace("#",""),r=n.length===3?n.split("").map(l=>`${l}${l}`).join(""):n.slice(0,6).padEnd(6,"0"),o=Number.parseInt(r,16);if(Number.isNaN(o))return`rgba(56, 189, 248, ${t})`;const i=o>>16&255,s=o>>8&255,a=o&255;return`rgba(${i}, ${s}, ${a}, ${t})`}function Hd(e){return e.sourceColumn===e.targetColumn?e.sourceColumn:`${e.sourceColumn}  ${e.targetColumn}`}function Wd(e,t=10){return e.length<=t?e:`${e.slice(0,t-1)}`}function Ud(e){const t=new Map,n=new Set;for(const o of e)for(const i of o.groups)n.add(i);let r=0;for(const o of n)t.set(o,Vo[r%Vo.length]),r+=1;return t}function He(e){return typeof e=="object"&&e!==null?{x:e.x??0,y:e.y??0}:{x:0,y:0}}function Tn(e){return typeof e=="object"&&e!==null?e.id:e}function ir(e,t){if(t.size===0)return!1;const n=Tn(e.source),r=Tn(e.target);return t.has(n)||t.has(r)}const Kd=["name","title","label","email","handle"];function $t(e){return!e||typeof e!="object"||Array.isArray(e)||!("_id"in e)?!1:typeof e._id=="number"}function rs(e){const t=e.props??{};for(const n of Kd){const r=t[n];if(typeof r=="string"&&r.trim().length>0)return r}for(const n of Object.values(t))if(typeof n=="string"&&n.trim().length>0)return n;return`#${e._id}`}function yn({className:e,type:t,...n}){return u.jsx("input",{type:t,"data-slot":"input",className:ie("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var Gd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xd=Gd.reduce((e,t)=>{const n=fc(`Primitive.${t}`),r=d.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Yd="Label",os=d.forwardRef((e,t)=>u.jsx(Xd.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));os.displayName=Yd;var qd=os;function fe({className:e,...t}){return u.jsx(qd,{"data-slot":"label",className:ie("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Pn(e,[t,n]){return Math.min(n,Math.max(t,e))}function G(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function lt(e,t=[]){let n=[];function r(i,s){const a=d.createContext(s),l=n.length;n=[...n,s];const c=h=>{const{scope:m,children:v,...b}=h,p=m?.[e]?.[l]||a,g=d.useMemo(()=>b,Object.values(b));return u.jsx(p.Provider,{value:g,children:v})};c.displayName=i+"Provider";function f(h,m){const v=m?.[e]?.[l]||a,b=d.useContext(v);if(b)return b;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const o=()=>{const i=n.map(s=>d.createContext(s));return function(a){const l=a?.[e]||i;return d.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,Zd(o,...t)]}function Zd(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function Xo(e){const t=Qd(e),n=d.forwardRef((r,o)=>{const{children:i,...s}=r,a=d.Children.toArray(i),l=a.find(eh);if(l){const c=l.props.children,f=a.map(h=>h===l?d.Children.count(c)>1?d.Children.only(null):d.isValidElement(c)?c.props.children:null:h);return u.jsx(t,{...s,ref:o,children:d.isValidElement(c)?d.cloneElement(c,void 0,f):null})}return u.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function Qd(e){const t=d.forwardRef((n,r)=>{const{children:o,...i}=n;if(d.isValidElement(o)){const s=nh(o),a=th(i,o.props);return o.type!==d.Fragment&&(a.ref=r?Hr(r,s):s),d.cloneElement(o,a)}return d.Children.count(o)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Jd=Symbol("radix.slottable");function eh(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jd}function th(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function nh(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Jr(e){const t=e+"CollectionProvider",[n,r]=lt(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:g,children:x}=p,w=Je.useRef(null),S=Je.useRef(new Map).current;return u.jsx(o,{scope:g,itemMap:S,collectionRef:w,children:x})};s.displayName=t;const a=e+"CollectionSlot",l=Xo(a),c=Je.forwardRef((p,g)=>{const{scope:x,children:w}=p,S=i(a,x),y=ee(g,S.collectionRef);return u.jsx(l,{ref:y,children:w})});c.displayName=a;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Xo(f),v=Je.forwardRef((p,g)=>{const{scope:x,children:w,...S}=p,y=Je.useRef(null),_=ee(g,y),T=i(f,x);return Je.useEffect(()=>(T.itemMap.set(y,{ref:y,...S}),()=>void T.itemMap.delete(y))),u.jsx(m,{[h]:"",ref:_,children:w})});v.displayName=f;function b(p){const g=i(e+"CollectionConsumer",p);return Je.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((T,E)=>S.indexOf(T.ref.current)-S.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:s,Slot:c,ItemSlot:v},b,r]}var rh=d.createContext(void 0);function Bn(e){const t=d.useContext(rh);return e||t||"ltr"}function oh(e){const t=ih(e),n=d.forwardRef((r,o)=>{const{children:i,...s}=r,a=d.Children.toArray(i),l=a.find(ah);if(l){const c=l.props.children,f=a.map(h=>h===l?d.Children.count(c)>1?d.Children.only(null):d.isValidElement(c)?c.props.children:null:h);return u.jsx(t,{...s,ref:o,children:d.isValidElement(c)?d.cloneElement(c,void 0,f):null})}return u.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function ih(e){const t=d.forwardRef((n,r)=>{const{children:o,...i}=n;if(d.isValidElement(o)){const s=lh(o),a=ch(i,o.props);return o.type!==d.Fragment&&(a.ref=r?Hr(r,s):s),d.cloneElement(o,a)}return d.Children.count(o)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sh=Symbol("radix.slottable");function ah(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sh}function ch(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function lh(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var uh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q=uh.reduce((e,t)=>{const n=oh(`Primitive.${t}`),r=d.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function fh(e,t){e&&Ln.flushSync(()=>e.dispatchEvent(t))}function Ge(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>t.current?.(...n),[])}function dh(e,t=globalThis?.document){const n=Ge(e);d.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var hh="DismissableLayer",Rr="dismissableLayer.update",ph="dismissableLayer.pointerDownOutside",mh="dismissableLayer.focusOutside",Yo,is=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ss=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=e,c=d.useContext(is),[f,h]=d.useState(null),m=f?.ownerDocument??globalThis?.document,[,v]=d.useState({}),b=ee(t,E=>h(E)),p=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),w=f?p.indexOf(f):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,y=w>=x,_=xh(E=>{const P=E.target,A=[...c.branches].some(j=>j.contains(P));!y||A||(o?.(E),s?.(E),E.defaultPrevented||a?.())},m),T=yh(E=>{const P=E.target;[...c.branches].some(j=>j.contains(P))||(i?.(E),s?.(E),E.defaultPrevented||a?.())},m);return dh(E=>{w===c.layers.size-1&&(r?.(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},m),d.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Yo=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),qo(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Yo)}},[f,m,n,c]),d.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),qo())},[f,c]),d.useEffect(()=>{const E=()=>v({});return document.addEventListener(Rr,E),()=>document.removeEventListener(Rr,E)},[]),u.jsx(q.div,{...l,ref:b,style:{pointerEvents:S?y?"auto":"none":void 0,...e.style},onFocusCapture:G(e.onFocusCapture,T.onFocusCapture),onBlurCapture:G(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:G(e.onPointerDownCapture,_.onPointerDownCapture)})});ss.displayName=hh;var gh="DismissableLayerBranch",vh=d.forwardRef((e,t)=>{const n=d.useContext(is),r=d.useRef(null),o=ee(t,r);return d.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),u.jsx(q.div,{...e,ref:o})});vh.displayName=gh;function xh(e,t=globalThis?.document){const n=Ge(e),r=d.useRef(!1),o=d.useRef(()=>{});return d.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){as(ph,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function yh(e,t=globalThis?.document){const n=Ge(e),r=d.useRef(!1);return d.useEffect(()=>{const o=i=>{i.target&&!r.current&&as(mh,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qo(){const e=new CustomEvent(Rr);document.dispatchEvent(e)}function as(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?fh(o,i):o.dispatchEvent(i)}var sr=0;function wh(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Zo()),document.body.insertAdjacentElement("beforeend",e[1]??Zo()),sr++,()=>{sr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sr--}},[])}function Zo(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ar="focusScope.autoFocusOnMount",cr="focusScope.autoFocusOnUnmount",Qo={bubbles:!1,cancelable:!0},bh="FocusScope",cs=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,l]=d.useState(null),c=Ge(o),f=Ge(i),h=d.useRef(null),m=ee(t,p=>l(p)),v=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let p=function(S){if(v.paused||!a)return;const y=S.target;a.contains(y)?h.current=y:We(h.current,{select:!0})},g=function(S){if(v.paused||!a)return;const y=S.relatedTarget;y!==null&&(a.contains(y)||We(h.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const _ of S)_.removedNodes.length>0&&We(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),w.disconnect()}}},[r,a,v.paused]),d.useEffect(()=>{if(a){ei.add(v);const p=document.activeElement;if(!a.contains(p)){const x=new CustomEvent(ar,Qo);a.addEventListener(ar,c),a.dispatchEvent(x),x.defaultPrevented||(Sh(Rh(ls(a)),{select:!0}),document.activeElement===p&&We(a))}return()=>{a.removeEventListener(ar,c),setTimeout(()=>{const x=new CustomEvent(cr,Qo);a.addEventListener(cr,f),a.dispatchEvent(x),x.defaultPrevented||We(p??document.body,{select:!0}),a.removeEventListener(cr,f),ei.remove(v)},0)}}},[a,c,f,v]);const b=d.useCallback(p=>{if(!n&&!r||v.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const w=p.currentTarget,[S,y]=_h(w);S&&y?!p.shiftKey&&x===y?(p.preventDefault(),n&&We(S,{select:!0})):p.shiftKey&&x===S&&(p.preventDefault(),n&&We(y,{select:!0})):x===w&&p.preventDefault()}},[n,r,v.paused]);return u.jsx(q.div,{tabIndex:-1,...s,ref:m,onKeyDown:b})});cs.displayName=bh;function Sh(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(We(r,{select:t}),document.activeElement!==n)return}function _h(e){const t=ls(e),n=Jo(t,e),r=Jo(t.reverse(),e);return[n,r]}function ls(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jo(e,t){for(const n of e)if(!Ch(n,{upTo:t}))return n}function Ch(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Nh(e){return e instanceof HTMLInputElement&&"select"in e}function We(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Nh(e)&&t&&e.select()}}var ei=Eh();function Eh(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=ti(e,t),e.unshift(t)},remove(t){e=ti(e,t),e[0]?.resume()}}}function ti(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Rh(e){return e.filter(t=>t.tagName!=="A")}var se=globalThis?.document?d.useLayoutEffect:()=>{},Ah=Ci[" useId ".trim().toString()]||(()=>{}),jh=0;function Yt(e){const[t,n]=d.useState(Ah());return se(()=>{n(r=>r??String(jh++))},[e]),e||(t?`radix-${t}`:"")}const Th=["top","right","bottom","left"],Xe=Math.min,me=Math.max,Mn=Math.round,cn=Math.floor,Me=e=>({x:e,y:e}),Ph={left:"right",right:"left",bottom:"top",top:"bottom"},Mh={start:"end",end:"start"};function Ar(e,t,n){return me(e,Xe(t,n))}function ze(e,t){return typeof e=="function"?e(t):e}function Be(e){return e.split("-")[0]}function Rt(e){return e.split("-")[1]}function eo(e){return e==="x"?"y":"x"}function to(e){return e==="y"?"height":"width"}const Ih=new Set(["top","bottom"]);function Te(e){return Ih.has(Be(e))?"y":"x"}function no(e){return eo(Te(e))}function kh(e,t,n){n===void 0&&(n=!1);const r=Rt(e),o=no(e),i=to(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=In(s)),[s,In(s)]}function Oh(e){const t=In(e);return[jr(e),t,jr(t)]}function jr(e){return e.replace(/start|end/g,t=>Mh[t])}const ni=["left","right"],ri=["right","left"],Dh=["top","bottom"],Lh=["bottom","top"];function $h(e,t,n){switch(e){case"top":case"bottom":return n?t?ri:ni:t?ni:ri;case"left":case"right":return t?Dh:Lh;default:return[]}}function Fh(e,t,n,r){const o=Rt(e);let i=$h(Be(e),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),t&&(i=i.concat(i.map(jr)))),i}function In(e){return e.replace(/left|right|bottom|top/g,t=>Ph[t])}function zh(e){return{top:0,right:0,bottom:0,left:0,...e}}function us(e){return typeof e!="number"?zh(e):{top:e,right:e,bottom:e,left:e}}function kn(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function oi(e,t,n){let{reference:r,floating:o}=e;const i=Te(t),s=no(t),a=to(s),l=Be(t),c=i==="y",f=r.x+r.width/2-o.width/2,h=r.y+r.height/2-o.height/2,m=r[a]/2-o[a]/2;let v;switch(l){case"top":v={x:f,y:r.y-o.height};break;case"bottom":v={x:f,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:h};break;case"left":v={x:r.x-o.width,y:h};break;default:v={x:r.x,y:r.y}}switch(Rt(t)){case"start":v[s]-=m*(n&&c?-1:1);break;case"end":v[s]+=m*(n&&c?-1:1);break}return v}const Bh=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:f,y:h}=oi(c,r,l),m=r,v={},b=0;for(let p=0;p<a.length;p++){const{name:g,fn:x}=a[p],{x:w,y:S,data:y,reset:_}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:o,middlewareData:v,rects:c,platform:s,elements:{reference:e,floating:t}});f=w??f,h=S??h,v={...v,[g]:{...v[g],...y}},_&&b<=50&&(b++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(c=_.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:o}):_.rects),{x:f,y:h}=oi(c,m,l)),p=-1)}return{x:f,y:h,placement:m,strategy:o,middlewareData:v}};async function Wt(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:v=0}=ze(t,e),b=us(v),g=a[m?h==="floating"?"reference":"floating":h],x=kn(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:l})),w=h==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),y=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},_=kn(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(x.top-_.top+b.top)/y.y,bottom:(_.bottom-x.bottom+b.bottom)/y.y,left:(x.left-_.left+b.left)/y.x,right:(_.right-x.right+b.right)/y.x}}const Vh=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:f=0}=ze(e,t)||{};if(c==null)return{};const h=us(f),m={x:n,y:r},v=no(o),b=to(v),p=await s.getDimensions(c),g=v==="y",x=g?"top":"left",w=g?"bottom":"right",S=g?"clientHeight":"clientWidth",y=i.reference[b]+i.reference[v]-m[v]-i.floating[b],_=m[v]-i.reference[v],T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let E=T?T[S]:0;(!E||!await(s.isElement==null?void 0:s.isElement(T)))&&(E=a.floating[S]||i.floating[b]);const P=y/2-_/2,A=E/2-p[b]/2-1,j=Xe(h[x],A),R=Xe(h[w],A),O=j,D=E-p[b]-R,C=E/2-p[b]/2+P,I=Ar(O,C,D),N=!l.arrow&&Rt(o)!=null&&C!==I&&i.reference[b]/2-(C<O?j:R)-p[b]/2<0,k=N?C<O?C-O:C-D:0;return{[v]:m[v]+k,data:{[v]:I,centerOffset:C-I-k,...N&&{alignmentOffset:k}},reset:N}}}),Hh=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:p=!0,...g}=ze(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Be(o),w=Te(a),S=Be(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=m||(S||!p?[In(a)]:Oh(a)),T=b!=="none";!m&&T&&_.push(...Fh(a,p,b,y));const E=[a,..._],P=await Wt(t,g),A=[];let j=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&A.push(P[x]),h){const C=kh(o,s,y);A.push(P[C[0]],P[C[1]])}if(j=[...j,{placement:o,overflows:A}],!A.every(C=>C<=0)){var R,O;const C=(((R=i.flip)==null?void 0:R.index)||0)+1,I=E[C];if(I&&(!(h==="alignment"?w!==Te(I):!1)||j.every(M=>Te(M.placement)===w?M.overflows[0]>0:!0)))return{data:{index:C,overflows:j},reset:{placement:I}};let N=(O=j.filter(k=>k.overflows[0]<=0).sort((k,M)=>k.overflows[1]-M.overflows[1])[0])==null?void 0:O.placement;if(!N)switch(v){case"bestFit":{var D;const k=(D=j.filter(M=>{if(T){const F=Te(M.placement);return F===w||F==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(F=>F>0).reduce((F,z)=>F+z,0)]).sort((M,F)=>M[1]-F[1])[0])==null?void 0:D[0];k&&(N=k);break}case"initialPlacement":N=a;break}if(o!==N)return{reset:{placement:N}}}return{}}}};function ii(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function si(e){return Th.some(t=>e[t]>=0)}const Wh=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=ze(e,t);switch(r){case"referenceHidden":{const i=await Wt(t,{...o,elementContext:"reference"}),s=ii(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:si(s)}}}case"escaped":{const i=await Wt(t,{...o,altBoundary:!0}),s=ii(i,n.floating);return{data:{escapedOffsets:s,escaped:si(s)}}}default:return{}}}}},fs=new Set(["left","top"]);async function Uh(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=Be(n),a=Rt(n),l=Te(n)==="y",c=fs.has(s)?-1:1,f=i&&l?-1:1,h=ze(t,e);let{mainAxis:m,crossAxis:v,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof b=="number"&&(v=a==="end"?b*-1:b),l?{x:v*f,y:m*c}:{x:m*c,y:v*f}}const Kh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=t,l=await Uh(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},Gh=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x,y:w}=g;return{x,y:w}}},...l}=ze(e,t),c={x:n,y:r},f=await Wt(t,l),h=Te(Be(o)),m=eo(h);let v=c[m],b=c[h];if(i){const g=m==="y"?"top":"left",x=m==="y"?"bottom":"right",w=v+f[g],S=v-f[x];v=Ar(w,v,S)}if(s){const g=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=b+f[g],S=b-f[x];b=Ar(w,b,S)}const p=a.fn({...t,[m]:v,[h]:b});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[m]:i,[h]:s}}}}}},Xh=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ze(e,t),f={x:n,y:r},h=Te(o),m=eo(h);let v=f[m],b=f[h];const p=ze(a,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const S=m==="y"?"height":"width",y=i.reference[m]-i.floating[S]+g.mainAxis,_=i.reference[m]+i.reference[S]-g.mainAxis;v<y?v=y:v>_&&(v=_)}if(c){var x,w;const S=m==="y"?"width":"height",y=fs.has(Be(o)),_=i.reference[h]-i.floating[S]+(y&&((x=s.offset)==null?void 0:x[h])||0)+(y?0:g.crossAxis),T=i.reference[h]+i.reference[S]+(y?0:((w=s.offset)==null?void 0:w[h])||0)-(y?g.crossAxis:0);b<_?b=_:b>T&&(b=T)}return{[m]:v,[h]:b}}}},Yh=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:s,elements:a}=t,{apply:l=()=>{},...c}=ze(e,t),f=await Wt(t,c),h=Be(o),m=Rt(o),v=Te(o)==="y",{width:b,height:p}=i.floating;let g,x;h==="top"||h==="bottom"?(g=h,x=m===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,g=m==="end"?"top":"bottom");const w=p-f.top-f.bottom,S=b-f.left-f.right,y=Xe(p-f[g],w),_=Xe(b-f[x],S),T=!t.middlewareData.shift;let E=y,P=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=w),T&&!m){const j=me(f.left,0),R=me(f.right,0),O=me(f.top,0),D=me(f.bottom,0);v?P=b-2*(j!==0||R!==0?j+R:me(f.left,f.right)):E=p-2*(O!==0||D!==0?O+D:me(f.top,f.bottom))}await l({...t,availableWidth:P,availableHeight:E});const A=await s.getDimensions(a.floating);return b!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function Vn(){return typeof window<"u"}function At(e){return ds(e)?(e.nodeName||"").toLowerCase():"#document"}function ge(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Oe(e){var t;return(t=(ds(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ds(e){return Vn()?e instanceof Node||e instanceof ge(e).Node:!1}function be(e){return Vn()?e instanceof Element||e instanceof ge(e).Element:!1}function Ie(e){return Vn()?e instanceof HTMLElement||e instanceof ge(e).HTMLElement:!1}function ai(e){return!Vn()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ge(e).ShadowRoot}const qh=new Set(["inline","contents"]);function qt(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Se(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!qh.has(o)}const Zh=new Set(["table","td","th"]);function Qh(e){return Zh.has(At(e))}const Jh=[":popover-open",":modal"];function Hn(e){return Jh.some(t=>{try{return e.matches(t)}catch{return!1}})}const ep=["transform","translate","scale","rotate","perspective"],tp=["transform","translate","scale","rotate","perspective","filter"],np=["paint","layout","strict","content"];function ro(e){const t=oo(),n=be(e)?Se(e):e;return ep.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||tp.some(r=>(n.willChange||"").includes(r))||np.some(r=>(n.contain||"").includes(r))}function rp(e){let t=Ye(e);for(;Ie(t)&&!Nt(t);){if(ro(t))return t;if(Hn(t))return null;t=Ye(t)}return null}function oo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const op=new Set(["html","body","#document"]);function Nt(e){return op.has(At(e))}function Se(e){return ge(e).getComputedStyle(e)}function Wn(e){return be(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ye(e){if(At(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ai(e)&&e.host||Oe(e);return ai(t)?t.host:t}function hs(e){const t=Ye(e);return Nt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ie(t)&&qt(t)?t:hs(t)}function Ut(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=hs(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),s=ge(o);if(i){const a=Tr(s);return t.concat(s,s.visualViewport||[],qt(o)?o:[],a&&n?Ut(a):[])}return t.concat(o,Ut(o,[],n))}function Tr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ps(e){const t=Se(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Ie(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,a=Mn(n)!==i||Mn(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function io(e){return be(e)?e:e.contextElement}function wt(e){const t=io(e);if(!Ie(t))return Me(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=ps(t);let s=(i?Mn(n.width):n.width)/r,a=(i?Mn(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const ip=Me(0);function ms(e){const t=ge(e);return!oo()||!t.visualViewport?ip:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sp(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ge(e)?!1:t}function st(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=io(e);let s=Me(1);t&&(r?be(r)&&(s=wt(r)):s=wt(e));const a=sp(i,n,r)?ms(i):Me(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,f=o.width/s.x,h=o.height/s.y;if(i){const m=ge(i),v=r&&be(r)?ge(r):r;let b=m,p=Tr(b);for(;p&&r&&v!==b;){const g=wt(p),x=p.getBoundingClientRect(),w=Se(p),S=x.left+(p.clientLeft+parseFloat(w.paddingLeft))*g.x,y=x.top+(p.clientTop+parseFloat(w.paddingTop))*g.y;l*=g.x,c*=g.y,f*=g.x,h*=g.y,l+=S,c+=y,b=ge(p),p=Tr(b)}}return kn({width:f,height:h,x:l,y:c})}function Un(e,t){const n=Wn(e).scrollLeft;return t?t.left+n:st(Oe(e)).left+n}function gs(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Un(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function ap(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",s=Oe(r),a=t?Hn(t.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Me(1);const f=Me(0),h=Ie(r);if((h||!h&&!i)&&((At(r)!=="body"||qt(s))&&(l=Wn(r)),Ie(r))){const v=st(r);c=wt(r),f.x=v.x+r.clientLeft,f.y=v.y+r.clientTop}const m=s&&!h&&!i?gs(s,l):Me(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-l.scrollTop*c.y+f.y+m.y}}function cp(e){return Array.from(e.getClientRects())}function lp(e){const t=Oe(e),n=Wn(e),r=e.ownerDocument.body,o=me(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=me(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Un(e);const a=-n.scrollTop;return Se(r).direction==="rtl"&&(s+=me(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}const ci=25;function up(e,t){const n=ge(e),r=Oe(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const f=oo();(!f||f&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}const c=Un(r);if(c<=0){const f=r.ownerDocument,h=f.body,m=getComputedStyle(h),v=f.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,b=Math.abs(r.clientWidth-h.clientWidth-v);b<=ci&&(i-=b)}else c<=ci&&(i+=c);return{width:i,height:s,x:a,y:l}}const fp=new Set(["absolute","fixed"]);function dp(e,t){const n=st(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Ie(e)?wt(e):Me(1),s=e.clientWidth*i.x,a=e.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function li(e,t,n){let r;if(t==="viewport")r=up(e,n);else if(t==="document")r=lp(Oe(e));else if(be(t))r=dp(t,n);else{const o=ms(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return kn(r)}function vs(e,t){const n=Ye(e);return n===t||!be(n)||Nt(n)?!1:Se(n).position==="fixed"||vs(n,t)}function hp(e,t){const n=t.get(e);if(n)return n;let r=Ut(e,[],!1).filter(a=>be(a)&&At(a)!=="body"),o=null;const i=Se(e).position==="fixed";let s=i?Ye(e):e;for(;be(s)&&!Nt(s);){const a=Se(s),l=ro(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&fp.has(o.position)||qt(s)&&!l&&vs(e,s))?r=r.filter(f=>f!==s):o=a,s=Ye(s)}return t.set(e,r),r}function pp(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const s=[...n==="clippingAncestors"?Hn(t)?[]:hp(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,f)=>{const h=li(t,f,o);return c.top=me(h.top,c.top),c.right=Xe(h.right,c.right),c.bottom=Xe(h.bottom,c.bottom),c.left=me(h.left,c.left),c},li(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mp(e){const{width:t,height:n}=ps(e);return{width:t,height:n}}function gp(e,t,n){const r=Ie(t),o=Oe(t),i=n==="fixed",s=st(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=Me(0);function c(){l.x=Un(o)}if(r||!r&&!i)if((At(t)!=="body"||qt(o))&&(a=Wn(t)),r){const v=st(t,!0,i,t);l.x=v.x+t.clientLeft,l.y=v.y+t.clientTop}else o&&c();i&&!r&&o&&c();const f=o&&!r&&!i?gs(o,a):Me(0),h=s.left+a.scrollLeft-l.x-f.x,m=s.top+a.scrollTop-l.y-f.y;return{x:h,y:m,width:s.width,height:s.height}}function lr(e){return Se(e).position==="static"}function ui(e,t){if(!Ie(e)||Se(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Oe(e)===n&&(n=n.ownerDocument.body),n}function xs(e,t){const n=ge(e);if(Hn(e))return n;if(!Ie(e)){let o=Ye(e);for(;o&&!Nt(o);){if(be(o)&&!lr(o))return o;o=Ye(o)}return n}let r=ui(e,t);for(;r&&Qh(r)&&lr(r);)r=ui(r,t);return r&&Nt(r)&&lr(r)&&!ro(r)?n:r||rp(e)||n}const vp=async function(e){const t=this.getOffsetParent||xs,n=this.getDimensions,r=await n(e.floating);return{reference:gp(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xp(e){return Se(e).direction==="rtl"}const yp={convertOffsetParentRelativeRectToViewportRelativeRect:ap,getDocumentElement:Oe,getClippingRect:pp,getOffsetParent:xs,getElementRects:vp,getClientRects:cp,getDimensions:mp,getScale:wt,isElement:be,isRTL:xp};function ys(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function wp(e,t){let n=null,r;const o=Oe(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:m,height:v}=c;if(a||t(),!m||!v)return;const b=cn(h),p=cn(o.clientWidth-(f+m)),g=cn(o.clientHeight-(h+v)),x=cn(f),S={rootMargin:-b+"px "+-p+"px "+-g+"px "+-x+"px",threshold:me(0,Xe(1,l))||1};let y=!0;function _(T){const E=T[0].intersectionRatio;if(E!==l){if(!y)return s();E?s(!1,E):r=setTimeout(()=>{s(!1,1e-7)},1e3)}E===1&&!ys(c,e.getBoundingClientRect())&&s(),y=!1}try{n=new IntersectionObserver(_,{...S,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,S)}n.observe(e)}return s(!0),i}function bp(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=io(e),f=o||i?[...c?Ut(c):[],...Ut(t)]:[];f.forEach(x=>{o&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?wp(c,n):null;let m=-1,v=null;s&&(v=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&v&&(v.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=v)==null||S.observe(t)})),n()}),c&&!l&&v.observe(c),v.observe(t));let b,p=l?st(e):null;l&&g();function g(){const x=st(e);p&&!ys(p,x)&&n(),p=x,b=requestAnimationFrame(g)}return n(),()=>{var x;f.forEach(w=>{o&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h?.(),(x=v)==null||x.disconnect(),v=null,l&&cancelAnimationFrame(b)}}const Sp=Kh,_p=Gh,Cp=Hh,Np=Yh,Ep=Wh,fi=Vh,Rp=Xh,Ap=(e,t,n)=>{const r=new Map,o={platform:yp,...n},i={...o.platform,_c:r};return Bh(e,t,{...o,platform:i})};var jp=typeof document<"u",Tp=function(){},wn=jp?d.useLayoutEffect:Tp;function On(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!On(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!On(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ws(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function di(e,t){const n=ws(e);return Math.round(t*n)/n}function ur(e){const t=d.useRef(e);return wn(()=>{t.current=e}),t}function Pp(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[f,h]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,v]=d.useState(r);On(m,r)||v(r);const[b,p]=d.useState(null),[g,x]=d.useState(null),w=d.useCallback(M=>{M!==T.current&&(T.current=M,p(M))},[]),S=d.useCallback(M=>{M!==E.current&&(E.current=M,x(M))},[]),y=i||b,_=s||g,T=d.useRef(null),E=d.useRef(null),P=d.useRef(f),A=l!=null,j=ur(l),R=ur(o),O=ur(c),D=d.useCallback(()=>{if(!T.current||!E.current)return;const M={placement:t,strategy:n,middleware:m};R.current&&(M.platform=R.current),Ap(T.current,E.current,M).then(F=>{const z={...F,isPositioned:O.current!==!1};C.current&&!On(P.current,z)&&(P.current=z,Ln.flushSync(()=>{h(z)}))})},[m,t,n,R,O]);wn(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[c]);const C=d.useRef(!1);wn(()=>(C.current=!0,()=>{C.current=!1}),[]),wn(()=>{if(y&&(T.current=y),_&&(E.current=_),y&&_){if(j.current)return j.current(y,_,D);D()}},[y,_,D,j,A]);const I=d.useMemo(()=>({reference:T,floating:E,setReference:w,setFloating:S}),[w,S]),N=d.useMemo(()=>({reference:y,floating:_}),[y,_]),k=d.useMemo(()=>{const M={position:n,left:0,top:0};if(!N.floating)return M;const F=di(N.floating,f.x),z=di(N.floating,f.y);return a?{...M,transform:"translate("+F+"px, "+z+"px)",...ws(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:z}},[n,a,N.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:D,refs:I,elements:N,floatingStyles:k}),[f,D,I,N,k])}const Mp=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?fi({element:r.current,padding:o}).fn(n):{}:r?fi({element:r,padding:o}).fn(n):{}}}},Ip=(e,t)=>({...Sp(e),options:[e,t]}),kp=(e,t)=>({..._p(e),options:[e,t]}),Op=(e,t)=>({...Rp(e),options:[e,t]}),Dp=(e,t)=>({...Cp(e),options:[e,t]}),Lp=(e,t)=>({...Np(e),options:[e,t]}),$p=(e,t)=>({...Ep(e),options:[e,t]}),Fp=(e,t)=>({...Mp(e),options:[e,t]});var zp="Arrow",bs=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return u.jsx(q.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});bs.displayName=zp;var Bp=bs;function so(e){const[t,n]=d.useState(void 0);return se(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ao="Popper",[Ss,_s]=lt(ao),[Vp,Cs]=Ss(ao),Ns=e=>{const{__scopePopper:t,children:n}=e,[r,o]=d.useState(null);return u.jsx(Vp,{scope:t,anchor:r,onAnchorChange:o,children:n})};Ns.displayName=ao;var Es="PopperAnchor",Rs=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=Cs(Es,n),s=d.useRef(null),a=ee(t,s),l=d.useRef(null);return d.useEffect(()=>{const c=l.current;l.current=r?.current||s.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:u.jsx(q.div,{...o,ref:a})});Rs.displayName=Es;var co="PopperContent",[Hp,Wp]=Ss(co),As=d.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:b,...p}=e,g=Cs(co,n),[x,w]=d.useState(null),S=ee(t,L=>w(L)),[y,_]=d.useState(null),T=so(y),E=T?.width??0,P=T?.height??0,A=r+(i!=="center"?"-"+i:""),j=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(c)?c:[c],O=R.length>0,D={padding:j,boundary:R.filter(Kp),altBoundary:O},{refs:C,floatingStyles:I,placement:N,isPositioned:k,middlewareData:M}=Pp({strategy:"fixed",placement:A,whileElementsMounted:(...L)=>bp(...L,{animationFrame:v==="always"}),elements:{reference:g.anchor},middleware:[Ip({mainAxis:o+P,alignmentAxis:s}),l&&kp({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Op():void 0,...D}),l&&Dp({...D}),Lp({...D,apply:({elements:L,rects:W,availableWidth:X,availableHeight:H})=>{const{width:Y,height:J}=W.reference,te=L.floating.style;te.setProperty("--radix-popper-available-width",`${X}px`),te.setProperty("--radix-popper-available-height",`${H}px`),te.setProperty("--radix-popper-anchor-width",`${Y}px`),te.setProperty("--radix-popper-anchor-height",`${J}px`)}}),y&&Fp({element:y,padding:a}),Gp({arrowWidth:E,arrowHeight:P}),m&&$p({strategy:"referenceHidden",...D})]}),[F,z]=Ps(N),K=Ge(b);se(()=>{k&&K?.()},[k,K]);const Z=M.arrow?.x,re=M.arrow?.y,Q=M.arrow?.centerOffset!==0,[$,V]=d.useState();return se(()=>{x&&V(window.getComputedStyle(x).zIndex)},[x]),u.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:k?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx(Hp,{scope:n,placedSide:F,onArrowChange:_,arrowX:Z,arrowY:re,shouldHideArrow:Q,children:u.jsx(q.div,{"data-side":F,"data-align":z,...p,ref:S,style:{...p.style,animation:k?void 0:"none"}})})})});As.displayName=co;var js="PopperArrow",Up={top:"bottom",right:"left",bottom:"top",left:"right"},Ts=d.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=Wp(js,r),s=Up[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(Bp,{...o,ref:n,style:{...o.style,display:"block"}})})});Ts.displayName=js;function Kp(e){return e!==null}var Gp=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,s=o.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[c,f]=Ps(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(o.arrow?.x??0)+a/2,v=(o.arrow?.y??0)+l/2;let b="",p="";return c==="bottom"?(b=s?h:`${m}px`,p=`${-l}px`):c==="top"?(b=s?h:`${m}px`,p=`${r.floating.height+l}px`):c==="right"?(b=`${-l}px`,p=s?h:`${v}px`):c==="left"&&(b=`${r.floating.width+l}px`,p=s?h:`${v}px`),{data:{x:b,y:p}}}});function Ps(e){const[t,n="center"]=e.split("-");return[t,n]}var Xp=Ns,Yp=Rs,qp=As,Zp=Ts,Qp="Portal",Ms=d.forwardRef((e,t)=>{const{container:n,...r}=e,[o,i]=d.useState(!1);se(()=>i(!0),[]);const s=n||o&&globalThis?.document?.body;return s?dc.createPortal(u.jsx(q.div,{...r,ref:t}),s):null});Ms.displayName=Qp;function Jp(e){const t=em(e),n=d.forwardRef((r,o)=>{const{children:i,...s}=r,a=d.Children.toArray(i),l=a.find(nm);if(l){const c=l.props.children,f=a.map(h=>h===l?d.Children.count(c)>1?d.Children.only(null):d.isValidElement(c)?c.props.children:null:h);return u.jsx(t,{...s,ref:o,children:d.isValidElement(c)?d.cloneElement(c,void 0,f):null})}return u.jsx(t,{...s,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function em(e){const t=d.forwardRef((n,r)=>{const{children:o,...i}=n;if(d.isValidElement(o)){const s=om(o),a=rm(i,o.props);return o.type!==d.Fragment&&(a.ref=r?Hr(r,s):s),d.cloneElement(o,a)}return d.Children.count(o)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tm=Symbol("radix.slottable");function nm(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tm}function rm(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function om(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var im=Ci[" useInsertionEffect ".trim().toString()]||se;function Et({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,s]=sm({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:o;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const h=f.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const c=d.useCallback(f=>{if(a){const h=am(f)?f(e):f;h!==e&&s.current?.(h)}else i(f)},[a,e,i,s]);return[l,c]}function sm({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),o=d.useRef(n),i=d.useRef(t);return im(()=>{i.current=t},[t]),d.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function am(e){return typeof e=="function"}function lo(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Is=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cm="VisuallyHidden",lm=d.forwardRef((e,t)=>u.jsx(q.span,{...e,ref:t,style:{...Is,...e.style}}));lm.displayName=cm;var um=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},pt=new WeakMap,ln=new WeakMap,un={},fr=0,ks=function(e){return e&&(e.host||ks(e.parentNode))},fm=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=ks(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},dm=function(e,t,n,r){var o=fm(t,Array.isArray(e)?e:[e]);un[n]||(un[n]=new WeakMap);var i=un[n],s=[],a=new Set,l=new Set(o),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};o.forEach(c);var f=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))f(m);else try{var v=m.getAttribute(r),b=v!==null&&v!=="false",p=(pt.get(m)||0)+1,g=(i.get(m)||0)+1;pt.set(m,p),i.set(m,g),s.push(m),p===1&&b&&ln.set(m,!0),g===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),a.clear(),fr++,function(){s.forEach(function(h){var m=pt.get(h)-1,v=i.get(h)-1;pt.set(h,m),i.set(h,v),m||(ln.has(h)||h.removeAttribute(r),ln.delete(h)),v||h.removeAttribute(n)}),fr--,fr||(pt=new WeakMap,pt=new WeakMap,ln=new WeakMap,un={})}},hm=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=um(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),dm(r,o,n,"aria-hidden")):function(){return null}},je=function(){return je=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},je.apply(this,arguments)};function Os(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function pm(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var bn="right-scroll-bar-position",Sn="width-before-scroll-bar",mm="with-scroll-bars-hidden",gm="--removed-body-scroll-bar-size";function dr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vm(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var xm=typeof window<"u"?d.useLayoutEffect:d.useEffect,hi=new WeakMap;function ym(e,t){var n=vm(null,function(r){return e.forEach(function(o){return dr(o,r)})});return xm(function(){var r=hi.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||dr(a,null)}),i.forEach(function(a){o.has(a)||dr(a,s)})}hi.set(n,e)},[e]),n}function wm(e){return e}function bm(e,t){t===void 0&&(t=wm);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var f=s;s=[],f.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(f){s.push(f),c()},filter:function(f){return s=s.filter(f),n}}}};return o}function Sm(e){e===void 0&&(e={});var t=bm(null);return t.options=je({async:!0,ssr:!1},e),t}var Ds=function(e){var t=e.sideCar,n=Os(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,je({},n))};Ds.isSideCarExport=!0;function _m(e,t){return e.useMedium(t),Ds}var Ls=Sm(),hr=function(){},Kn=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:hr,onWheelCapture:hr,onTouchMoveCapture:hr}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,v=e.noRelative,b=e.noIsolation,p=e.inert,g=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,S=e.gapMode,y=Os(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,T=ym([n,t]),E=je(je({},y),o);return d.createElement(d.Fragment,null,f&&d.createElement(_,{sideCar:Ls,removeScrollBar:c,shards:h,noRelative:v,noIsolation:b,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:S}),s?d.cloneElement(d.Children.only(a),je(je({},E),{ref:T})):d.createElement(w,je({},E,{className:l,ref:T}),a))});Kn.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kn.classNames={fullWidth:Sn,zeroRight:bn};var Cm=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Nm(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Cm();return t&&e.setAttribute("nonce",t),e}function Em(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Rm(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Am=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Nm())&&(Em(t,n),Rm(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jm=function(){var e=Am();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},$s=function(){var e=jm(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Tm={left:0,top:0,right:0,gap:0},pr=function(e){return parseInt(e||"",10)||0},Pm=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[pr(n),pr(r),pr(o)]},Mm=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Tm;var t=Pm(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Im=$s(),bt="data-scroll-locked",km=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mm,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(bt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bn,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Sn,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(bn," .").concat(bn,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Sn," .").concat(Sn,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bt,`] {
    `).concat(gm,": ").concat(a,`px;
  }
`)},pi=function(){var e=parseInt(document.body.getAttribute(bt)||"0",10);return isFinite(e)?e:0},Om=function(){d.useEffect(function(){return document.body.setAttribute(bt,(pi()+1).toString()),function(){var e=pi()-1;e<=0?document.body.removeAttribute(bt):document.body.setAttribute(bt,e.toString())}},[])},Dm=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Om();var i=d.useMemo(function(){return Mm(o)},[o]);return d.createElement(Im,{styles:km(i,!t,o,n?"":"!important")})},Pr=!1;if(typeof window<"u")try{var fn=Object.defineProperty({},"passive",{get:function(){return Pr=!0,!0}});window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{Pr=!1}var mt=Pr?{passive:!1}:!1,Lm=function(e){return e.tagName==="TEXTAREA"},Fs=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Lm(e)&&n[t]==="visible")},$m=function(e){return Fs(e,"overflowY")},Fm=function(e){return Fs(e,"overflowX")},mi=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=zs(e,r);if(o){var i=Bs(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zm=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Bm=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},zs=function(e,t){return e==="v"?$m(t):Fm(t)},Bs=function(e,t){return e==="v"?zm(t):Bm(t)},Vm=function(e,t){return e==="h"&&t==="rtl"?-1:1},Hm=function(e,t,n,r,o){var i=Vm(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,l=t.contains(a),c=!1,f=s>0,h=0,m=0;do{if(!a)break;var v=Bs(e,a),b=v[0],p=v[1],g=v[2],x=p-g-i*b;(b||x)&&zs(e,a)&&(h+=x,m+=b);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},dn=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gi=function(e){return[e.deltaX,e.deltaY]},vi=function(e){return e&&"current"in e?e.current:e},Wm=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Um=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Km=0,gt=[];function Gm(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),o=d.useState(Km++)[0],i=d.useState($s)[0],s=d.useRef(e);d.useEffect(function(){s.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var p=pm([e.lockRef.current],(e.shards||[]).map(vi),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=d.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var x=dn(p),w=n.current,S="deltaX"in p?p.deltaX:w[0]-x[0],y="deltaY"in p?p.deltaY:w[1]-x[1],_,T=p.target,E=Math.abs(S)>Math.abs(y)?"h":"v";if("touches"in p&&E==="h"&&T.type==="range")return!1;var P=mi(E,T);if(!P)return!0;if(P?_=E:(_=E==="v"?"h":"v",P=mi(E,T)),!P)return!1;if(!r.current&&"changedTouches"in p&&(S||y)&&(r.current=_),!_)return!0;var A=r.current||_;return Hm(A,g,p,A==="h"?S:y)},[]),l=d.useCallback(function(p){var g=p;if(!(!gt.length||gt[gt.length-1]!==i)){var x="deltaY"in g?gi(g):dn(g),w=t.current.filter(function(_){return _.name===g.type&&(_.target===g.target||g.target===_.shadowParent)&&Wm(_.delta,x)})[0];if(w&&w.should){g.cancelable&&g.preventDefault();return}if(!w){var S=(s.current.shards||[]).map(vi).filter(Boolean).filter(function(_){return _.contains(g.target)}),y=S.length>0?a(g,S[0]):!s.current.noIsolation;y&&g.cancelable&&g.preventDefault()}}},[]),c=d.useCallback(function(p,g,x,w){var S={name:p,delta:g,target:x,should:w,shadowParent:Xm(x)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(y){return y!==S})},1)},[]),f=d.useCallback(function(p){n.current=dn(p),r.current=void 0},[]),h=d.useCallback(function(p){c(p.type,gi(p),p.target,a(p,e.lockRef.current))},[]),m=d.useCallback(function(p){c(p.type,dn(p),p.target,a(p,e.lockRef.current))},[]);d.useEffect(function(){return gt.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,mt),document.addEventListener("touchmove",l,mt),document.addEventListener("touchstart",f,mt),function(){gt=gt.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,mt),document.removeEventListener("touchmove",l,mt),document.removeEventListener("touchstart",f,mt)}},[]);var v=e.removeScrollBar,b=e.inert;return d.createElement(d.Fragment,null,b?d.createElement(i,{styles:Um(o)}):null,v?d.createElement(Dm,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Xm(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ym=_m(Ls,Gm);var Vs=d.forwardRef(function(e,t){return d.createElement(Kn,je({},e,{ref:t,sideCar:Ym}))});Vs.classNames=Kn.classNames;var qm=[" ","Enter","ArrowUp","ArrowDown"],Zm=[" ","Enter"],at="Select",[Gn,Xn,Qm]=Jr(at),[jt]=lt(at,[Qm,_s]),Yn=_s(),[Jm,qe]=jt(at),[eg,tg]=jt(at),Hs=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:i,value:s,defaultValue:a,onValueChange:l,dir:c,name:f,autoComplete:h,disabled:m,required:v,form:b}=e,p=Yn(t),[g,x]=d.useState(null),[w,S]=d.useState(null),[y,_]=d.useState(!1),T=Bn(c),[E,P]=Et({prop:r,defaultProp:o??!1,onChange:i,caller:at}),[A,j]=Et({prop:s,defaultProp:a,onChange:l,caller:at}),R=d.useRef(null),O=g?b||!!g.closest("form"):!0,[D,C]=d.useState(new Set),I=Array.from(D).map(N=>N.props.value).join(";");return u.jsx(Xp,{...p,children:u.jsxs(Jm,{required:v,scope:t,trigger:g,onTriggerChange:x,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:y,onValueNodeHasChildrenChange:_,contentId:Yt(),value:A,onValueChange:j,open:E,onOpenChange:P,dir:T,triggerPointerDownPosRef:R,disabled:m,children:[u.jsx(Gn.Provider,{scope:t,children:u.jsx(eg,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(N=>{C(k=>new Set(k).add(N))},[]),onNativeOptionRemove:d.useCallback(N=>{C(k=>{const M=new Set(k);return M.delete(N),M})},[]),children:n})}),O?u.jsxs(fa,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:h,value:A,onChange:N=>j(N.target.value),disabled:m,form:b,children:[A===void 0?u.jsx("option",{value:""}):null,Array.from(D)]},I):null]})})};Hs.displayName=at;var Ws="SelectTrigger",Us=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,i=Yn(n),s=qe(Ws,n),a=s.disabled||r,l=ee(t,s.onTriggerChange),c=Xn(n),f=d.useRef("touch"),[h,m,v]=ha(p=>{const g=c().filter(S=>!S.disabled),x=g.find(S=>S.value===s.value),w=pa(g,p,x);w!==void 0&&s.onValueChange(w.value)}),b=p=>{a||(s.onOpenChange(!0),v()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return u.jsx(Yp,{asChild:!0,...i,children:u.jsx(q.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":da(s.value)?"":void 0,...o,ref:l,onClick:G(o.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&b(p)}),onPointerDown:G(o.onPointerDown,p=>{f.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(b(p),p.preventDefault())}),onKeyDown:G(o.onKeyDown,p=>{const g=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(g&&p.key===" ")&&qm.includes(p.key)&&(b(),p.preventDefault())})})})});Us.displayName=Ws;var Ks="SelectValue",Gs=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:i,placeholder:s="",...a}=e,l=qe(Ks,n),{onValueNodeHasChildrenChange:c}=l,f=i!==void 0,h=ee(t,l.onValueNodeChange);return se(()=>{c(f)},[c,f]),u.jsx(q.span,{...a,ref:h,style:{pointerEvents:"none"},children:da(l.value)?u.jsx(u.Fragment,{children:s}):i})});Gs.displayName=Ks;var ng="SelectIcon",Xs=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return u.jsx(q.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});Xs.displayName=ng;var rg="SelectPortal",Ys=e=>u.jsx(Ms,{asChild:!0,...e});Ys.displayName=rg;var ct="SelectContent",qs=d.forwardRef((e,t)=>{const n=qe(ct,e.__scopeSelect),[r,o]=d.useState();if(se(()=>{o(new DocumentFragment)},[]),!n.open){const i=r;return i?Ln.createPortal(u.jsx(Zs,{scope:e.__scopeSelect,children:u.jsx(Gn.Slot,{scope:e.__scopeSelect,children:u.jsx("div",{children:e.children})})}),i):null}return u.jsx(Qs,{...e,ref:t})});qs.displayName=ct;var ye=10,[Zs,Ze]=jt(ct),og="SelectContentImpl",ig=Jp("SelectContent.RemoveScroll"),Qs=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:s,side:a,sideOffset:l,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:v,sticky:b,hideWhenDetached:p,avoidCollisions:g,...x}=e,w=qe(ct,n),[S,y]=d.useState(null),[_,T]=d.useState(null),E=ee(t,L=>y(L)),[P,A]=d.useState(null),[j,R]=d.useState(null),O=Xn(n),[D,C]=d.useState(!1),I=d.useRef(!1);d.useEffect(()=>{if(S)return hm(S)},[S]),wh();const N=d.useCallback(L=>{const[W,...X]=O().map(J=>J.ref.current),[H]=X.slice(-1),Y=document.activeElement;for(const J of L)if(J===Y||(J?.scrollIntoView({block:"nearest"}),J===W&&_&&(_.scrollTop=0),J===H&&_&&(_.scrollTop=_.scrollHeight),J?.focus(),document.activeElement!==Y))return},[O,_]),k=d.useCallback(()=>N([P,S]),[N,P,S]);d.useEffect(()=>{D&&k()},[D,k]);const{onOpenChange:M,triggerPointerDownPosRef:F}=w;d.useEffect(()=>{if(S){let L={x:0,y:0};const W=H=>{L={x:Math.abs(Math.round(H.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(H.pageY)-(F.current?.y??0))}},X=H=>{L.x<=10&&L.y<=10?H.preventDefault():S.contains(H.target)||M(!1),document.removeEventListener("pointermove",W),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",X,{capture:!0})}}},[S,M,F]),d.useEffect(()=>{const L=()=>M(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[M]);const[z,K]=ha(L=>{const W=O().filter(Y=>!Y.disabled),X=W.find(Y=>Y.ref.current===document.activeElement),H=pa(W,L,X);H&&setTimeout(()=>H.ref.current.focus())}),Z=d.useCallback((L,W,X)=>{const H=!I.current&&!X;(w.value!==void 0&&w.value===W||H)&&(A(L),H&&(I.current=!0))},[w.value]),re=d.useCallback(()=>S?.focus(),[S]),Q=d.useCallback((L,W,X)=>{const H=!I.current&&!X;(w.value!==void 0&&w.value===W||H)&&R(L)},[w.value]),$=r==="popper"?Mr:Js,V=$===Mr?{side:a,sideOffset:l,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:v,sticky:b,hideWhenDetached:p,avoidCollisions:g}:{};return u.jsx(Zs,{scope:n,content:S,viewport:_,onViewportChange:T,itemRefCallback:Z,selectedItem:P,onItemLeave:re,itemTextRefCallback:Q,focusSelectedItem:k,selectedItemText:j,position:r,isPositioned:D,searchRef:z,children:u.jsx(Vs,{as:ig,allowPinchZoom:!0,children:u.jsx(cs,{asChild:!0,trapped:w.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:G(o,L=>{w.trigger?.focus({preventScroll:!0}),L.preventDefault()}),children:u.jsx(ss,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:u.jsx($,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:L=>L.preventDefault(),...x,...V,onPlaced:()=>C(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:G(x.onKeyDown,L=>{const W=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!W&&L.key.length===1&&K(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let H=O().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(L.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const Y=L.target,J=H.indexOf(Y);H=H.slice(J+1)}setTimeout(()=>N(H)),L.preventDefault()}})})})})})})});Qs.displayName=og;var sg="SelectItemAlignedPosition",Js=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,i=qe(ct,n),s=Ze(ct,n),[a,l]=d.useState(null),[c,f]=d.useState(null),h=ee(t,E=>f(E)),m=Xn(n),v=d.useRef(!1),b=d.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:x,focusSelectedItem:w}=s,S=d.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&p&&g&&x){const E=i.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),j=x.getBoundingClientRect();if(i.dir!=="rtl"){const Y=j.left-P.left,J=A.left-Y,te=E.left-J,he=E.width+te,ut=Math.max(he,P.width),pe=window.innerWidth-ye,Ce=Pn(J,[ye,Math.max(ye,pe-ut)]);a.style.minWidth=he+"px",a.style.left=Ce+"px"}else{const Y=P.right-j.right,J=window.innerWidth-A.right-Y,te=window.innerWidth-E.right-J,he=E.width+te,ut=Math.max(he,P.width),pe=window.innerWidth-ye,Ce=Pn(J,[ye,Math.max(ye,pe-ut)]);a.style.minWidth=he+"px",a.style.right=Ce+"px"}const R=m(),O=window.innerHeight-ye*2,D=p.scrollHeight,C=window.getComputedStyle(c),I=parseInt(C.borderTopWidth,10),N=parseInt(C.paddingTop,10),k=parseInt(C.borderBottomWidth,10),M=parseInt(C.paddingBottom,10),F=I+N+D+M+k,z=Math.min(g.offsetHeight*5,F),K=window.getComputedStyle(p),Z=parseInt(K.paddingTop,10),re=parseInt(K.paddingBottom,10),Q=E.top+E.height/2-ye,$=O-Q,V=g.offsetHeight/2,L=g.offsetTop+V,W=I+N+L,X=F-W;if(W<=Q){const Y=R.length>0&&g===R[R.length-1].ref.current;a.style.bottom="0px";const J=c.clientHeight-p.offsetTop-p.offsetHeight,te=Math.max($,V+(Y?re:0)+J+k),he=W+te;a.style.height=he+"px"}else{const Y=R.length>0&&g===R[0].ref.current;a.style.top="0px";const te=Math.max(Q,I+p.offsetTop+(Y?Z:0)+V)+X;a.style.height=te+"px",p.scrollTop=W-Q+p.offsetTop}a.style.margin=`${ye}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=O+"px",r?.(),requestAnimationFrame(()=>v.current=!0)}},[m,i.trigger,i.valueNode,a,c,p,g,x,i.dir,r]);se(()=>S(),[S]);const[y,_]=d.useState();se(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const T=d.useCallback(E=>{E&&b.current===!0&&(S(),w?.(),b.current=!1)},[S,w]);return u.jsx(cg,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:v,onScrollButtonChange:T,children:u.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:y},children:u.jsx(q.div,{...o,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Js.displayName=sg;var ag="SelectPopperPosition",Mr=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=ye,...i}=e,s=Yn(n);return u.jsx(qp,{...s,...i,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Mr.displayName=ag;var[cg,uo]=jt(ct,{}),Ir="SelectViewport",ea=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,i=Ze(Ir,n),s=uo(Ir,n),a=ee(t,i.onViewportChange),l=d.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(Gn.Slot,{scope:n,children:u.jsx(q.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:G(o.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=s;if(m?.current&&h){const v=Math.abs(l.current-f.scrollTop);if(v>0){const b=window.innerHeight-ye*2,p=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),x=Math.max(p,g);if(x<b){const w=x+v,S=Math.min(b,w),y=w-S;h.style.height=S+"px",h.style.bottom==="0px"&&(f.scrollTop=y>0?y:0,h.style.justifyContent="flex-end")}}}l.current=f.scrollTop})})})]})});ea.displayName=Ir;var ta="SelectGroup",[lg,ug]=jt(ta),fg=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Yt();return u.jsx(lg,{scope:n,id:o,children:u.jsx(q.div,{role:"group","aria-labelledby":o,...r,ref:t})})});fg.displayName=ta;var na="SelectLabel",dg=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=ug(na,n);return u.jsx(q.div,{id:o.id,...r,ref:t})});dg.displayName=na;var Dn="SelectItem",[hg,ra]=jt(Dn),oa=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:i,...s}=e,a=qe(Dn,n),l=Ze(Dn,n),c=a.value===r,[f,h]=d.useState(i??""),[m,v]=d.useState(!1),b=ee(t,w=>l.itemRefCallback?.(w,r,o)),p=Yt(),g=d.useRef("touch"),x=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(hg,{scope:n,value:r,disabled:o,textId:p,isSelected:c,onItemTextChange:d.useCallback(w=>{h(S=>S||(w?.textContent??"").trim())},[]),children:u.jsx(Gn.ItemSlot,{scope:n,value:r,disabled:o,textValue:f,children:u.jsx(q.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...s,ref:b,onFocus:G(s.onFocus,()=>v(!0)),onBlur:G(s.onBlur,()=>v(!1)),onClick:G(s.onClick,()=>{g.current!=="mouse"&&x()}),onPointerUp:G(s.onPointerUp,()=>{g.current==="mouse"&&x()}),onPointerDown:G(s.onPointerDown,w=>{g.current=w.pointerType}),onPointerMove:G(s.onPointerMove,w=>{g.current=w.pointerType,o?l.onItemLeave?.():g.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:G(s.onPointerLeave,w=>{w.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:G(s.onKeyDown,w=>{l.searchRef?.current!==""&&w.key===" "||(Zm.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});oa.displayName=Dn;var Dt="SelectItemText",ia=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...i}=e,s=qe(Dt,n),a=Ze(Dt,n),l=ra(Dt,n),c=tg(Dt,n),[f,h]=d.useState(null),m=ee(t,x=>h(x),l.onItemTextChange,x=>a.itemTextRefCallback?.(x,l.value,l.disabled)),v=f?.textContent,b=d.useMemo(()=>u.jsx("option",{value:l.value,disabled:l.disabled,children:v},l.value),[l.disabled,l.value,v]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=c;return se(()=>(p(b),()=>g(b)),[p,g,b]),u.jsxs(u.Fragment,{children:[u.jsx(q.span,{id:l.textId,...i,ref:m}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Ln.createPortal(i.children,s.valueNode):null]})});ia.displayName=Dt;var sa="SelectItemIndicator",aa=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return ra(sa,n).isSelected?u.jsx(q.span,{"aria-hidden":!0,...r,ref:t}):null});aa.displayName=sa;var kr="SelectScrollUpButton",ca=d.forwardRef((e,t)=>{const n=Ze(kr,e.__scopeSelect),r=uo(kr,e.__scopeSelect),[o,i]=d.useState(!1),s=ee(t,r.onScrollButtonChange);return se(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?u.jsx(ua,{...e,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});ca.displayName=kr;var Or="SelectScrollDownButton",la=d.forwardRef((e,t)=>{const n=Ze(Or,e.__scopeSelect),r=uo(Or,e.__scopeSelect),[o,i]=d.useState(!1),s=ee(t,r.onScrollButtonChange);return se(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<c;i(f)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?u.jsx(ua,{...e,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});la.displayName=Or;var ua=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,i=Ze("SelectScrollButton",n),s=d.useRef(null),a=Xn(n),l=d.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return d.useEffect(()=>()=>l(),[l]),se(()=>{a().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),u.jsx(q.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:G(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:G(o.onPointerMove,()=>{i.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:G(o.onPointerLeave,()=>{l()})})}),pg="SelectSeparator",mg=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return u.jsx(q.div,{"aria-hidden":!0,...r,ref:t})});mg.displayName=pg;var Dr="SelectArrow",gg=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Yn(n),i=qe(Dr,n),s=Ze(Dr,n);return i.open&&s.position==="popper"?u.jsx(Zp,{...o,...r,ref:t}):null});gg.displayName=Dr;var vg="SelectBubbleInput",fa=d.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const o=d.useRef(null),i=ee(r,o),s=lo(t);return d.useEffect(()=>{const a=o.current;if(!a)return;const l=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&f){const h=new Event("change",{bubbles:!0});f.call(a,t),a.dispatchEvent(h)}},[s,t]),u.jsx(q.select,{...n,style:{...Is,...n.style},ref:i,defaultValue:t})});fa.displayName=vg;function da(e){return e===""||e===void 0}function ha(e){const t=Ge(e),n=d.useRef(""),r=d.useRef(0),o=d.useCallback(s=>{const a=n.current+s;t(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[t]),i=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,i]}function pa(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=xg(e,Math.max(i,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function xg(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var yg=Hs,wg=Us,bg=Gs,Sg=Xs,_g=Ys,Cg=qs,Ng=ea,Eg=oa,Rg=ia,Ag=aa,jg=ca,Tg=la;function Ne({...e}){return u.jsx(yg,{"data-slot":"select",...e})}function Ee({...e}){return u.jsx(bg,{"data-slot":"select-value",...e})}function Re({className:e,size:t="default",children:n,...r}){return u.jsxs(wg,{"data-slot":"select-trigger","data-size":t,className:ie("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,u.jsx(Sg,{asChild:!0,children:u.jsx(Ei,{className:"size-4 opacity-50"})})]})}function Ae({className:e,children:t,position:n="popper",align:r="center",...o}){return u.jsx(_g,{children:u.jsxs(Cg,{"data-slot":"select-content",className:ie("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,align:r,...o,children:[u.jsx(Pg,{}),u.jsx(Ng,{className:ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),u.jsx(Mg,{})]})})}function ne({className:e,children:t,...n}){return u.jsxs(Eg,{"data-slot":"select-item",className:ie("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[u.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:u.jsx(Ag,{children:u.jsx(ic,{className:"size-4"})})}),u.jsx(Rg,{children:t})]})}function Pg({className:e,...t}){return u.jsx(jg,{"data-slot":"select-scroll-up-button",className:ie("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(xc,{className:"size-4"})})}function Mg({className:e,...t}){return u.jsx(Tg,{"data-slot":"select-scroll-down-button",className:ie("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(Ei,{className:"size-4"})})}var ma=["PageUp","PageDown"],ga=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],va={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Tt="Slider",[Lr,Ig,kg]=Jr(Tt),[xa]=lt(Tt,[kg]),[Og,qn]=xa(Tt),ya=d.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:i=1,orientation:s="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:v=!1,form:b,...p}=e,g=d.useRef(new Set),x=d.useRef(0),S=s==="horizontal"?Dg:Lg,[y=[],_]=Et({prop:f,defaultProp:c,onChange:R=>{[...g.current][x.current]?.focus(),h(R)}}),T=d.useRef(y);function E(R){const O=Vg(y,R);j(R,O)}function P(R){j(R,x.current)}function A(){const R=T.current[x.current];y[x.current]!==R&&m(y)}function j(R,O,{commit:D}={commit:!1}){const C=Kg(i),I=Gg(Math.round((R-r)/i)*i+r,C),N=Pn(I,[r,o]);_((k=[])=>{const M=zg(k,N,O);if(Ug(M,l*i)){x.current=M.indexOf(N);const F=String(M)!==String(k);return F&&D&&m(M),F?M:k}else return k})}return u.jsx(Og,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:o,valueIndexToChangeRef:x,thumbs:g.current,values:y,orientation:s,form:b,children:u.jsx(Lr.Provider,{scope:e.__scopeSlider,children:u.jsx(Lr.Slot,{scope:e.__scopeSlider,children:u.jsx(S,{"aria-disabled":a,"data-disabled":a?"":void 0,...p,ref:t,onPointerDown:G(p.onPointerDown,()=>{a||(T.current=y)}),min:r,max:o,inverted:v,onSlideStart:a?void 0:E,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:A,onHomeKeyDown:()=>!a&&j(r,0,{commit:!0}),onEndKeyDown:()=>!a&&j(o,y.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:O})=>{if(!a){const I=ma.includes(R.key)||R.shiftKey&&ga.includes(R.key)?10:1,N=x.current,k=y[N],M=i*I*O;j(k+M,N,{commit:!0})}}})})})})});ya.displayName=Tt;var[wa,ba]=xa(Tt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Dg=d.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...f}=e,[h,m]=d.useState(null),v=ee(t,S=>m(S)),b=d.useRef(void 0),p=Bn(o),g=p==="ltr",x=g&&!i||!g&&i;function w(S){const y=b.current||h.getBoundingClientRect(),_=[0,y.width],E=fo(_,x?[n,r]:[r,n]);return b.current=y,E(S-y.left)}return u.jsx(wa,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:u.jsx(Sa,{dir:p,"data-orientation":"horizontal",...f,ref:v,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const y=w(S.clientX);s?.(y)},onSlideMove:S=>{const y=w(S.clientX);a?.(y)},onSlideEnd:()=>{b.current=void 0,l?.()},onStepKeyDown:S=>{const _=va[x?"from-left":"from-right"].includes(S.key);c?.({event:S,direction:_?-1:1})}})})}),Lg=d.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:i,onSlideMove:s,onSlideEnd:a,onStepKeyDown:l,...c}=e,f=d.useRef(null),h=ee(t,f),m=d.useRef(void 0),v=!o;function b(p){const g=m.current||f.current.getBoundingClientRect(),x=[0,g.height],S=fo(x,v?[r,n]:[n,r]);return m.current=g,S(p-g.top)}return u.jsx(wa,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:u.jsx(Sa,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const g=b(p.clientY);i?.(g)},onSlideMove:p=>{const g=b(p.clientY);s?.(g)},onSlideEnd:()=>{m.current=void 0,a?.()},onStepKeyDown:p=>{const x=va[v?"from-bottom":"from-top"].includes(p.key);l?.({event:p,direction:x?-1:1})}})})}),Sa=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:a,onStepKeyDown:l,...c}=e,f=qn(Tt,n);return u.jsx(q.span,{...c,ref:t,onKeyDown:G(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(a(h),h.preventDefault()):ma.concat(ga).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:G(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:G(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&o(h)}),onPointerUp:G(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),_a="SliderTrack",Ca=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=qn(_a,n);return u.jsx(q.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});Ca.displayName=_a;var $r="SliderRange",Na=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=qn($r,n),i=ba($r,n),s=d.useRef(null),a=ee(t,s),l=o.values.length,c=o.values.map(m=>Aa(m,o.min,o.max)),f=l>1?Math.min(...c):0,h=100-Math.max(...c);return u.jsx(q.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:a,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});Na.displayName=$r;var Fr="SliderThumb",Ea=d.forwardRef((e,t)=>{const n=Ig(e.__scopeSlider),[r,o]=d.useState(null),i=ee(t,a=>o(a)),s=d.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return u.jsx($g,{...e,ref:i,index:s})}),$g=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...i}=e,s=qn(Fr,n),a=ba(Fr,n),[l,c]=d.useState(null),f=ee(t,w=>c(w)),h=l?s.form||!!l.closest("form"):!0,m=so(l),v=s.values[r],b=v===void 0?0:Aa(v,s.min,s.max),p=Bg(r,s.values.length),g=m?.[a.size],x=g?Hg(g,b,a.direction):0;return d.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${b}% + ${x}px)`},children:[u.jsx(Lr.ItemSlot,{scope:e.__scopeSlider,children:u.jsx(q.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":s.min,"aria-valuenow":v,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:f,style:v===void 0?{display:"none"}:e.style,onFocus:G(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&u.jsx(Ra,{name:o??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:v},r)]})});Ea.displayName=Fr;var Fg="RadioBubbleInput",Ra=d.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const o=d.useRef(null),i=ee(o,r),s=lo(t);return d.useEffect(()=>{const a=o.current;if(!a)return;const l=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&f){const h=new Event("input",{bubbles:!0});f.call(a,t),a.dispatchEvent(h)}},[s,t]),u.jsx(q.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});Ra.displayName=Fg;function zg(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,i)=>o-i)}function Aa(e,t,n){const i=100/(n-t)*(e-t);return Pn(i,[0,100])}function Bg(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Vg(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function Hg(e,t,n){const r=e/2,i=fo([0,50],[0,r]);return(r-i(t)*n)*n}function Wg(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Ug(e,t){if(t>0){const n=Wg(e);return Math.min(...n)>=t}return!0}function fo(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Kg(e){return(String(e).split(".")[1]||"").length}function Gg(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Xg=ya,Yg=Ca,qg=Na,Zg=Ea;function zr({className:e,defaultValue:t,value:n,min:r=0,max:o=100,...i}){const s=d.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,o],[n,t,r,o]);return u.jsxs(Xg,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:o,className:ie("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[u.jsx(Yg,{"data-slot":"slider-track",className:ie("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:u.jsx(qg,{"data-slot":"slider-range",className:ie("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(a,l)=>u.jsx(Zg,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var Zn="Switch",[Qg]=lt(Zn),[Jg,ev]=Qg(Zn),ja=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:i,required:s,disabled:a,value:l="on",onCheckedChange:c,form:f,...h}=e,[m,v]=d.useState(null),b=ee(t,S=>v(S)),p=d.useRef(!1),g=m?f||!!m.closest("form"):!0,[x,w]=Et({prop:o,defaultProp:i??!1,onChange:c,caller:Zn});return u.jsxs(Jg,{scope:n,checked:x,disabled:a,children:[u.jsx(q.button,{type:"button",role:"switch","aria-checked":x,"aria-required":s,"data-state":Ia(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:b,onClick:G(e.onClick,S=>{w(y=>!y),g&&(p.current=S.isPropagationStopped(),p.current||S.stopPropagation())})}),g&&u.jsx(Ma,{control:m,bubbles:!p.current,name:r,value:l,checked:x,required:s,disabled:a,form:f,style:{transform:"translateX(-100%)"}})]})});ja.displayName=Zn;var Ta="SwitchThumb",Pa=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=ev(Ta,n);return u.jsx(q.span,{"data-state":Ia(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});Pa.displayName=Ta;var tv="SwitchBubbleInput",Ma=d.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...o},i)=>{const s=d.useRef(null),a=ee(s,i),l=lo(n),c=so(t);return d.useEffect(()=>{const f=s.current;if(!f)return;const h=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&v){const b=new Event("click",{bubbles:r});v.call(f,n),f.dispatchEvent(b)}},[l,n,r]),u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:a,style:{...o.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ma.displayName=tv;function Ia(e){return e?"checked":"unchecked"}var nv=ja,rv=Pa;function ov({className:e,...t}){return u.jsx(nv,{"data-slot":"switch",className:ie("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:u.jsx(rv,{"data-slot":"switch-thumb",className:ie("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function iv({rows:e,GraphRenderer:t=Vd}){const n=d.useMemo(()=>cv(e),[e]),[r,o]=d.useState(""),[i,s]=d.useState(""),[a,l]=d.useState(150),[c,f]=d.useState(""),[h,m]=d.useState(null),[v,b]=d.useState(!1),[p,g]=d.useState(!1);d.useEffect(()=>{if(n.length===0){o(""),s("");return}o(_=>_&&n.some(T=>T.key===_)?_:n[0]?.key??""),s(_=>_&&n.some(T=>T.key===_)?_:n[1]?.key??n[0]?.key??"")},[n]),d.useEffect(()=>{m(null)},[r,i,e]);const x=d.useMemo(()=>{if(!c.trim())return e;const _=c.toLowerCase();return e.filter(T=>Object.values(T).some(E=>typeof E=="string"?E.toLowerCase().includes(_):$t(E)?rs(E).toLowerCase().includes(_):!1))},[e,c]),w=d.useMemo(()=>n.length===0?{nodes:[],edges:[]}:lv(x,{nodeColumns:n.map(_=>_.key),sourceColumn:r,targetColumn:i,maxEdges:a}),[x,n,r,i,a]),S=d.useMemo(()=>w.nodes.find(_=>_.id===h)??null,[w.nodes,h]);if(e.length===0||n.length===0)return null;const y=r&&i&&r!==i;return u.jsxs(u.Fragment,{children:[u.jsxs(tt,{children:[u.jsx(nt,{children:u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsxs("div",{children:[u.jsxs(rt,{className:"flex items-center gap-2 text-lg",children:[u.jsx(Nc,{className:"size-5 text-primary"}),"Graph view"]}),u.jsx(pn,{children:"Visualize row relationships as a force-directed graph. Choose which columns represent the edge endpoints."})]}),u.jsxs(St,{variant:"secondary",children:[w.nodes.length," nodes  ",w.edges.length," edges"]})]})}),u.jsxs(Lt,{className:"space-y-6",children:[u.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[u.jsx(mr,{label:"Source column",children:u.jsxs(Ne,{value:r,onValueChange:o,children:[u.jsx(Re,{className:"w-full",children:u.jsx(Ee,{placeholder:"Select column"})}),u.jsx(Ae,{children:n.map(_=>u.jsxs(ne,{value:_.key,children:[_.key," (",_.count,")"]},_.key))})]})}),u.jsx(mr,{label:"Target column",children:u.jsxs(Ne,{value:i,onValueChange:s,children:[u.jsx(Re,{className:"w-full",children:u.jsx(Ee,{placeholder:"Select column"})}),u.jsx(Ae,{children:n.map(_=>u.jsxs(ne,{value:_.key,children:[_.key," (",_.count,")"]},_.key))})]})}),u.jsx(mr,{label:"Filter rows",children:u.jsx(yn,{value:c,placeholder:"name contains Ada",onChange:_=>f(_.target.value)})})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsxs(fe,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[u.jsx(pc,{className:"size-4"}),"Max edges to render (",w.edges.length,"/",a,")"]}),u.jsx(zr,{min:20,max:400,step:10,value:[a],onValueChange:_=>l(_[0]??150)})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-2xl border bg-muted/10 p-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold",children:"Edge labels"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Display column pairs directly on the connections."})]}),u.jsx(ov,{checked:v,onCheckedChange:b})]}),!y&&u.jsx("p",{className:"text-sm text-muted-foreground",children:"Select two different columns to draw edges. We'll still scatter the nodes even if only one column is available."}),u.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm text-muted-foreground",children:[u.jsxs("span",{children:["Showing up to ",a," relationships from ",x.length," matching rows."]}),u.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{f(""),n[0]&&o(n[0].key),n[1]?s(n[1].key):n[0]&&s(n[0].key),l(150)},children:"Reset view"})]}),u.jsxs("div",{className:"grid items-start gap-6 xl:grid-cols-[minmax(0,3.5fr)_minmax(0,1fr)]",children:[u.jsxs("div",{className:"relative",children:[u.jsxs(ae,{type:"button",variant:"secondary",size:"sm",className:"absolute right-4 top-4 z-20",disabled:p,onClick:()=>g(!0),children:[u.jsx(Sc,{className:"mr-1.5 size-4"}),p?"Expanded":"Expand"]}),u.jsx(t,{nodes:w.nodes,edges:w.edges,height:600,selectedNodeId:h,onNodeSelect:_=>m(_?.id??null),showEdgeLabels:v})]}),u.jsx(sv,{node:S})]})]})]}),p&&u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:[u.jsx("div",{className:"absolute inset-0","aria-hidden":"true",onClick:()=>g(!1)}),u.jsxs("div",{className:"relative z-10 w-full max-w-[1400px]",children:[u.jsx("div",{className:"absolute -right-3 -top-3 flex gap-2",children:u.jsxs(ae,{type:"button",variant:"secondary",size:"sm",className:"shadow-lg",onClick:()=>g(!1),children:[u.jsx(Ri,{className:"mr-1 size-4"}),"Close"]})}),u.jsx(t,{nodes:w.nodes,edges:w.edges,height:780,selectedNodeId:h,onNodeSelect:_=>m(_?.id??null),showEdgeLabels:v})]})]})]})}function sv({node:e}){if(!e)return u.jsx("div",{className:"border rounded-xl bg-muted/20 p-4 text-sm text-muted-foreground h-full",children:"Click any node to inspect its properties."});const t=Object.entries(e.props),n=[],r=[],o=[],i=[],s=[],a=["name","id","kind","type","visibility","language"],l=["filePath","path","file","startLine","endLine","start_line","end_line","line","column"],c=["codeText","code","source","sourceCode","content","body","snippet"],f=["metadata","props","attributes","data"];for(const[g,x]of t){const w=g.toLowerCase();a.some(S=>w===S.toLowerCase())?n.push([g,x]):l.some(S=>w===S.toLowerCase())?r.push([g,x]):c.some(S=>w.includes(S.toLowerCase()))?o.push([g,x]):f.some(S=>w===S.toLowerCase())?i.push([g,x]):s.push([g,x])}const h=e.props.name,m=e.props.filePath,v=e.props.startLine,b=e.props.endLine,p=e.props.language;return u.jsxs("div",{className:"border rounded-xl bg-muted/10 text-sm h-full overflow-auto max-h-[600px]",children:[u.jsxs("div",{className:"p-4 border-b bg-muted/20",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"text-lg font-semibold leading-tight truncate",title:e.label,children:h||e.label}),u.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",e.id]})]}),p&&u.jsx(St,{variant:"secondary",className:"text-[0.6rem] uppercase shrink-0",children:p})]}),e.labels.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:e.labels.map(g=>u.jsx(St,{variant:"outline",className:"text-xs",children:g},g))}),m&&u.jsxs("div",{className:"mt-2 text-xs text-muted-foreground font-mono truncate",title:m,children:[av(m),v&&u.jsxs("span",{className:"text-foreground/70",children:[":",v,b&&b!==v?`-${b}`:""]})]})]}),u.jsx("div",{className:"p-4 space-y-4",children:t.length===0?u.jsx("p",{className:"text-muted-foreground",children:"No properties returned for this node."}):u.jsxs(u.Fragment,{children:[o.length>0&&u.jsx(It,{title:"Code",children:o.map(([g,x])=>u.jsx(_n,{propKey:g,value:x},g))}),n.length>0&&u.jsx(It,{title:"Details",children:u.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1.5",children:n.map(([g,x])=>u.jsx(xi,{propKey:g,value:x},g))})}),r.filter(([g])=>!["filePath","startLine","endLine"].includes(g)).length>0&&u.jsx(It,{title:"Location",children:u.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1.5",children:r.filter(([g])=>!["filePath","startLine","endLine"].includes(g)).map(([g,x])=>u.jsx(xi,{propKey:g,value:x},g))})}),i.length>0&&u.jsx(It,{title:"Metadata",children:i.map(([g,x])=>u.jsx(_n,{propKey:g,value:x},g))}),s.length>0&&u.jsx(It,{title:"Other Properties",children:s.map(([g,x])=>u.jsx(_n,{propKey:g,value:x},g))})]})})]})}function It({title:e,children:t}){return u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-muted-foreground font-medium border-b border-border/50 pb-1",children:e}),t]})}function _n({propKey:e,value:t}){return u.jsxs("div",{children:[u.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-muted-foreground mb-1",children:Br(e)}),u.jsx(Ni,{value:t,propertyKey:e})]})}function xi({propKey:e,value:t}){return t==null?u.jsxs("div",{className:"flex items-baseline gap-1.5",children:[u.jsxs("span",{className:"text-[0.65rem] text-muted-foreground",children:[Br(e),":"]}),u.jsx("span",{className:"text-xs italic text-muted-foreground",children:"null"})]}):typeof t=="boolean"||typeof t=="number"||typeof t=="string"&&t.length<50?u.jsxs("div",{className:"flex items-baseline gap-1.5 min-w-0",children:[u.jsxs("span",{className:"text-[0.65rem] text-muted-foreground shrink-0",children:[Br(e),":"]}),u.jsx("span",{className:"text-xs font-mono truncate",title:String(t),children:typeof t=="boolean"?t?"true":"false":String(t)})]}):u.jsx(_n,{propKey:e,value:t})}function Br(e){return e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim()}function av(e){const t=e.split("/");return t.length<=4?e:".../"+t.slice(-3).join("/")}function mr({label:e,children:t}){return u.jsxs("div",{className:"space-y-2",children:[u.jsx(fe,{className:"text-sm text-muted-foreground",children:e}),t]})}function cv(e){const t=new Map;for(const n of e)for(const[r,o]of Object.entries(n))$t(o)&&t.set(r,(t.get(r)??0)+1);return Array.from(t.entries()).sort((n,r)=>r[1]-n[1]).map(([n,r])=>({key:n,count:r}))}function lv(e,t){const n=new Map,r=[];for(const i of e)for(const s of t.nodeColumns){const a=i[s];$t(a)&&gr(n,a,s)}let o=0;for(const i of e){if(o>=t.maxEdges)break;const s=i[t.sourceColumn],a=i[t.targetColumn];if(!$t(s)||!$t(a))continue;const l=gr(n,s,t.sourceColumn),c=gr(n,a,t.targetColumn);l.id!==c.id&&(r.push({id:`${l.id}-${c.id}-${o}`,source:l.id,target:c.id,sourceColumn:t.sourceColumn,targetColumn:t.targetColumn}),o+=1)}return{nodes:Array.from(n.values()),edges:r}}function gr(e,t,n){const r=e.get(t._id);if(r)return r.groups.includes(n)||(r.groups=[...r.groups,n]),r;const o=t.props&&typeof t.props=="object"&&!Array.isArray(t.props)?t.props:{},i={id:t._id,label:rs(t),props:o,labels:t.labels??[],groups:[n],original:t};return e.set(i.id,i),i}let ka=0;function Qn(e){return`${e}-${++ka}-${Date.now().toString(36)}`}function yi(){const e=`n${ka+1}`;return{id:Qn("node"),var:e,label:""}}function uv(e){return{id:Qn("edge"),from:e[0]?.var??"",to:e[1]?.var??e[0]?.var??"",edgeType:"",direction:"out"}}function Oa(e){return{id:Qn("filter"),variable:e[0]?.var??"",property:"",operator:"=",value:""}}function fv(e){return{id:Qn("group"),logic:"and",filters:[Oa(e)]}}function dv(e){const t=e.nodes.filter(a=>a.var.trim()).map(a=>{const l={var:a.var.trim()};return a.label.trim()&&(l.label=a.label.trim()),l}),n=e.edges.filter(a=>a.from.trim()&&a.to.trim()).map(a=>{const l={from:a.from.trim(),to:a.to.trim(),direction:a.direction};return a.edgeType.trim()&&(l.edge_type=a.edgeType.trim()),l}),r=hv(e.filterGroups),o=new Set;for(const a of e.nodes)a.var.trim()&&o.add(a.var.trim());const i=Array.from(o).map(a=>({kind:"var",var:a})),s={$schemaVersion:1,matches:t,projections:i};return n.length>0&&(s.edges=n),r&&(s.where=r),s}function hv(e){const t=e.map(n=>{const r=n.filters.filter(i=>i.variable.trim()&&i.property.trim()&&i.value.trim());if(r.length===0)return null;const o=r.map(i=>({op:pv(i.operator),left:{var:i.variable.trim(),prop:i.property.trim()},right:mv(i.value)}));return o.length===1?o[0]:{[n.logic]:o}}).filter(Boolean);return t.length===0?null:t.length===1?t[0]:{and:t}}function pv(e){switch(e){case"=":return"eq";case"!=":return"neq";case">":return"gt";case"<":return"lt";case">=":return"gte";case"<=":return"lte";case"contains":return"contains";case"starts_with":return"starts_with";default:return"eq"}}function mv(e){const t=e.trim();return/^-?\d+(\.\d+)?$/.test(t)?Number(t):t.toLowerCase()==="true"?!0:t.toLowerCase()==="false"?!1:t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t}function gv({onQueryChange:e,initialState:t}){const[n,r]=d.useState([]),[o,i]=d.useState([]),[s,a]=d.useState(t?.nodes??[yi()]),[l,c]=d.useState(t?.edges??[]),[f,h]=d.useState(t?.filterGroups??[]);d.useEffect(()=>{sc().then(A=>{r(A);const j=A.filter(R=>/^[A-Z][A-Z_]*$/.test(R.name)).map(R=>R.name);i(j)}).catch(console.error)},[]),d.useEffect(()=>{const A=dv({nodes:s,edges:l,filterGroups:f});e(A)},[s,l,f,e]);const m=d.useCallback(()=>{a(A=>[...A,yi()])},[]),v=d.useCallback(A=>{a(j=>j.filter(R=>R.id!==A))},[]),b=d.useCallback((A,j,R)=>{a(O=>O.map(D=>D.id===A?{...D,[j]:R}:D))},[]),p=d.useCallback(()=>{c(A=>[...A,uv(s)])},[s]),g=d.useCallback(A=>{c(j=>j.filter(R=>R.id!==A))},[]),x=d.useCallback((A,j,R)=>{c(O=>O.map(D=>D.id===A?{...D,[j]:R}:D))},[]),w=d.useCallback(()=>{h(A=>[...A,fv(s)])},[s]),S=d.useCallback(A=>{h(j=>j.filter(R=>R.id!==A))},[]),y=d.useCallback((A,j)=>{h(R=>R.map(O=>O.id===A?{...O,logic:j}:O))},[]),_=d.useCallback(A=>{h(j=>j.map(R=>R.id===A?{...R,filters:[...R.filters,Oa(s)]}:R))},[s]),T=d.useCallback((A,j)=>{h(R=>R.map(O=>O.id===A?{...O,filters:O.filters.filter(D=>D.id!==j)}:O))},[]),E=d.useCallback((A,j,R,O)=>{h(D=>D.map(C=>C.id===A?{...C,filters:C.filters.map(I=>I.id===j?{...I,[R]:O}:I)}:C))},[]),P=s.filter(A=>A.var.trim()).map(A=>A.var.trim());return u.jsxs("div",{className:"space-y-4",children:[u.jsxs(tt,{children:[u.jsx(nt,{className:"pb-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(rt,{className:"text-base flex items-center gap-2",children:[u.jsx(wc,{className:"h-4 w-4"}),"Match Nodes"]}),u.jsxs(ae,{type:"button",variant:"outline",size:"sm",onClick:m,children:[u.jsx(tn,{className:"h-4 w-4 mr-1"}),"Add Node"]})]})}),u.jsx(Lt,{className:"space-y-3",children:s.map((A,j)=>u.jsxs("div",{className:"flex items-end gap-3 p-3 rounded-lg border bg-muted/30",children:[u.jsxs("div",{className:"flex-1 space-y-1.5",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Variable"}),u.jsx(yn,{value:A.var,onChange:R=>b(A.id,"var",R.target.value),placeholder:"n1",className:"h-8 font-mono"})]}),u.jsxs("div",{className:"flex-1 space-y-1.5",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Label"}),u.jsxs(Ne,{value:A.label,onValueChange:R=>b(A.id,"label",R==="__any__"?"":R),children:[u.jsx(Re,{className:"h-8",children:u.jsx(Ee,{placeholder:"Any label"})}),u.jsxs(Ae,{children:[u.jsx(ne,{value:"__any__",children:"Any label"}),n.map(R=>u.jsxs(ne,{value:R.name,children:[R.name," ",u.jsxs("span",{className:"text-muted-foreground",children:["(",R.count,")"]})]},R.name))]})]})]}),s.length>1&&u.jsx(ae,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>v(A.id),children:u.jsx(er,{className:"h-4 w-4"})})]},A.id))})]}),u.jsxs(tt,{children:[u.jsx(nt,{className:"pb-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(rt,{className:"text-base flex items-center gap-2",children:[u.jsx(gc,{className:"h-4 w-4"}),"Match Edges"]}),u.jsxs(ae,{type:"button",variant:"outline",size:"sm",onClick:p,disabled:P.length<1,children:[u.jsx(tn,{className:"h-4 w-4 mr-1"}),"Add Edge"]})]})}),u.jsxs(Lt,{className:"space-y-3",children:[l.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground py-2",children:"No edges defined. Add an edge to match relationships."}),l.map(A=>u.jsxs("div",{className:"flex flex-wrap items-end gap-3 p-3 rounded-lg border bg-muted/30",children:[u.jsxs("div",{className:"w-24 space-y-1.5",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"From"}),u.jsxs(Ne,{value:A.from,onValueChange:j=>x(A.id,"from",j),children:[u.jsx(Re,{className:"h-8 font-mono",children:u.jsx(Ee,{placeholder:"from"})}),u.jsx(Ae,{children:P.map(j=>u.jsx(ne,{value:j,children:j},j))})]})]}),u.jsxs("div",{className:"w-32 space-y-1.5",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Direction"}),u.jsxs(Ne,{value:A.direction,onValueChange:j=>x(A.id,"direction",j),children:[u.jsx(Re,{className:"h-8",children:u.jsx(Ee,{})}),u.jsxs(Ae,{children:[u.jsx(ne,{value:"out",children:"Outgoing ()"}),u.jsx(ne,{value:"in",children:"Incoming ()"}),u.jsx(ne,{value:"both",children:"Both ()"})]})]})]}),u.jsxs("div",{className:"w-24 space-y-1.5",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"To"}),u.jsxs(Ne,{value:A.to,onValueChange:j=>x(A.id,"to",j),children:[u.jsx(Re,{className:"h-8 font-mono",children:u.jsx(Ee,{placeholder:"to"})}),u.jsx(Ae,{children:P.map(j=>u.jsx(ne,{value:j,children:j},j))})]})]}),u.jsxs("div",{className:"flex-1 min-w-32 space-y-1.5",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Edge Type"}),u.jsxs(Ne,{value:A.edgeType,onValueChange:j=>x(A.id,"edgeType",j==="__any__"?"":j),children:[u.jsx(Re,{className:"h-8",children:u.jsx(Ee,{placeholder:"Any type"})}),u.jsxs(Ae,{children:[u.jsx(ne,{value:"__any__",children:"Any type"}),o.map(j=>u.jsx(ne,{value:j,children:j},j))]})]})]}),u.jsx(ae,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>g(A.id),children:u.jsx(er,{className:"h-4 w-4"})})]},A.id))]})]}),u.jsxs(tt,{children:[u.jsx(nt,{className:"pb-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(rt,{className:"text-base",children:"Property Filters"}),u.jsxs(ae,{type:"button",variant:"outline",size:"sm",onClick:w,disabled:P.length<1,children:[u.jsx(tn,{className:"h-4 w-4 mr-1"}),"Add Filter Group"]})]})}),u.jsxs(Lt,{className:"space-y-4",children:[f.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground py-2",children:"No filters defined. Add a filter group to constrain results."}),f.map((A,j)=>u.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(St,{variant:"outline",className:"text-xs",children:["Group ",j+1]}),u.jsxs(Ne,{value:A.logic,onValueChange:R=>y(A.id,R),children:[u.jsx(Re,{className:"h-7 w-20",children:u.jsx(Ee,{})}),u.jsxs(Ae,{children:[u.jsx(ne,{value:"and",children:"AND"}),u.jsx(ne,{value:"or",children:"OR"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs(ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(A.id),children:[u.jsx(tn,{className:"h-3 w-3 mr-1"}),"Add"]}),u.jsx(ae,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:()=>S(A.id),children:u.jsx(Ri,{className:"h-4 w-4"})})]})]}),A.filters.map((R,O)=>u.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[O>0&&u.jsx(St,{variant:"secondary",className:"h-8 px-2 text-xs uppercase",children:A.logic}),u.jsxs("div",{className:"w-20 space-y-1",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Var"}),u.jsxs(Ne,{value:R.variable,onValueChange:D=>E(A.id,R.id,"variable",D),children:[u.jsx(Re,{className:"h-8 font-mono",children:u.jsx(Ee,{placeholder:"var"})}),u.jsx(Ae,{children:P.map(D=>u.jsx(ne,{value:D,children:D},D))})]})]}),u.jsxs("div",{className:"flex-1 min-w-24 space-y-1",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Property"}),u.jsx(yn,{value:R.property,onChange:D=>E(A.id,R.id,"property",D.target.value),placeholder:"name",className:"h-8"})]}),u.jsxs("div",{className:"w-24 space-y-1",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Op"}),u.jsxs(Ne,{value:R.operator,onValueChange:D=>E(A.id,R.id,"operator",D),children:[u.jsx(Re,{className:"h-8",children:u.jsx(Ee,{})}),u.jsxs(Ae,{children:[u.jsx(ne,{value:"=",children:"="}),u.jsx(ne,{value:"!=",children:"!="}),u.jsx(ne,{value:">",children:">"}),u.jsx(ne,{value:"<",children:"<"}),u.jsx(ne,{value:">=",children:">="}),u.jsx(ne,{value:"<=",children:"<="}),u.jsx(ne,{value:"contains",children:"contains"}),u.jsx(ne,{value:"starts_with",children:"starts with"})]})]})]}),u.jsxs("div",{className:"flex-1 min-w-24 space-y-1",children:[u.jsx(fe,{className:"text-xs text-muted-foreground",children:"Value"}),u.jsx(yn,{value:R.value,onChange:D=>E(A.id,R.id,"value",D.target.value),placeholder:"value",className:"h-8"})]}),A.filters.length>1&&u.jsx(ae,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>T(A.id,R.id),children:u.jsx(er,{className:"h-4 w-4"})})]},R.id))]},A.id))]})]})]})}var vr="rovingFocusGroup.onEntryFocus",vv={bubbles:!1,cancelable:!0},Zt="RovingFocusGroup",[Vr,Da,xv]=Jr(Zt),[yv,La]=lt(Zt,[xv]),[wv,bv]=yv(Zt),$a=d.forwardRef((e,t)=>u.jsx(Vr.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Vr.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Sv,{...e,ref:t})})}));$a.displayName=Zt;var Sv=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,m=d.useRef(null),v=ee(t,m),b=Bn(i),[p,g]=Et({prop:s,defaultProp:a??null,onChange:l,caller:Zt}),[x,w]=d.useState(!1),S=Ge(c),y=Da(n),_=d.useRef(!1),[T,E]=d.useState(0);return d.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(vr,S),()=>P.removeEventListener(vr,S)},[S]),u.jsx(wv,{scope:n,orientation:r,dir:b,loop:o,currentTabStopId:p,onItemFocus:d.useCallback(P=>g(P),[g]),onItemShiftTab:d.useCallback(()=>w(!0),[]),onFocusableItemAdd:d.useCallback(()=>E(P=>P+1),[]),onFocusableItemRemove:d.useCallback(()=>E(P=>P-1),[]),children:u.jsx(q.div,{tabIndex:x||T===0?-1:0,"data-orientation":r,...h,ref:v,style:{outline:"none",...e.style},onMouseDown:G(e.onMouseDown,()=>{_.current=!0}),onFocus:G(e.onFocus,P=>{const A=!_.current;if(P.target===P.currentTarget&&A&&!x){const j=new CustomEvent(vr,vv);if(P.currentTarget.dispatchEvent(j),!j.defaultPrevented){const R=y().filter(N=>N.focusable),O=R.find(N=>N.active),D=R.find(N=>N.id===p),I=[O,D,...R].filter(Boolean).map(N=>N.ref.current);Ba(I,f)}}_.current=!1}),onBlur:G(e.onBlur,()=>w(!1))})})}),Fa="RovingFocusGroupItem",za=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:s,...a}=e,l=Yt(),c=i||l,f=bv(Fa,n),h=f.currentTabStopId===c,m=Da(n),{onFocusableItemAdd:v,onFocusableItemRemove:b,currentTabStopId:p}=f;return d.useEffect(()=>{if(r)return v(),()=>b()},[r,v,b]),u.jsx(Vr.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:u.jsx(q.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...a,ref:t,onMouseDown:G(e.onMouseDown,g=>{r?f.onItemFocus(c):g.preventDefault()}),onFocus:G(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:G(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){f.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=Nv(g,f.orientation,f.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let S=m().filter(y=>y.focusable).map(y=>y.ref.current);if(x==="last")S.reverse();else if(x==="prev"||x==="next"){x==="prev"&&S.reverse();const y=S.indexOf(g.currentTarget);S=f.loop?Ev(S,y+1):S.slice(y+1)}setTimeout(()=>Ba(S))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:p!=null}):s})})});za.displayName=Fa;var _v={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cv(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Nv(e,t,n){const r=Cv(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _v[r]}function Ba(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Ev(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Rv=$a,Av=za;function jv(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var Va=e=>{const{present:t,children:n}=e,r=Tv(t),o=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),i=ee(r.ref,Pv(o));return typeof n=="function"||r.isPresent?d.cloneElement(o,{ref:i}):null};Va.displayName="Presence";function Tv(e){const[t,n]=d.useState(),r=d.useRef(null),o=d.useRef(e),i=d.useRef("none"),s=e?"mounted":"unmounted",[a,l]=jv(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const c=hn(r.current);i.current=a==="mounted"?c:"none"},[a]),se(()=>{const c=r.current,f=o.current;if(f!==e){const m=i.current,v=hn(c);e?l("MOUNT"):v==="none"||c?.display==="none"?l("UNMOUNT"):l(f&&m!==v?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),se(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=v=>{const p=hn(r.current).includes(CSS.escape(v.animationName));if(v.target===t&&p&&(l("ANIMATION_END"),!o.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},m=v=>{v.target===t&&(i.current=hn(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:d.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function hn(e){return e?.animationName||"none"}function Pv(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Jn="Tabs",[Mv]=lt(Jn,[La]),Ha=La(),[Iv,ho]=Mv(Jn),Wa=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:i,orientation:s="horizontal",dir:a,activationMode:l="automatic",...c}=e,f=Bn(a),[h,m]=Et({prop:r,onChange:o,defaultProp:i??"",caller:Jn});return u.jsx(Iv,{scope:n,baseId:Yt(),value:h,onValueChange:m,orientation:s,dir:f,activationMode:l,children:u.jsx(q.div,{dir:f,"data-orientation":s,...c,ref:t})})});Wa.displayName=Jn;var Ua="TabsList",Ka=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,i=ho(Ua,n),s=Ha(n);return u.jsx(Rv,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:u.jsx(q.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:t})})});Ka.displayName=Ua;var Ga="TabsTrigger",Xa=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...i}=e,s=ho(Ga,n),a=Ha(n),l=Za(s.baseId,r),c=Qa(s.baseId,r),f=r===s.value;return u.jsx(Av,{asChild:!0,...a,focusable:!o,active:f,children:u.jsx(q.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...i,ref:t,onMouseDown:G(e.onMouseDown,h=>{!o&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:G(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:G(e.onFocus,()=>{const h=s.activationMode!=="manual";!f&&!o&&h&&s.onValueChange(r)})})})});Xa.displayName=Ga;var Ya="TabsContent",qa=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:i,...s}=e,a=ho(Ya,n),l=Za(a.baseId,r),c=Qa(a.baseId,r),f=r===a.value,h=d.useRef(f);return d.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),u.jsx(Va,{present:o||f,children:({present:m})=>u.jsx(q.div,{"data-state":f?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});qa.displayName=Ya;function Za(e,t){return`${e}-trigger-${t}`}function Qa(e,t){return`${e}-content-${t}`}var kv=Wa,Ov=Ka,Dv=Xa,Lv=qa;function $v({className:e,...t}){return u.jsx(kv,{"data-slot":"tabs",className:ie("flex flex-col gap-2",e),...t})}function Fv({className:e,...t}){return u.jsx(Ov,{"data-slot":"tabs-list",className:ie("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function wi({className:e,...t}){return u.jsx(Dv,{"data-slot":"tabs-trigger",className:ie("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function bi({className:e,...t}){return u.jsx(Lv,{"data-slot":"tabs-content",className:ie("flex-1 outline-none",e),...t})}const xr=250,Si=25,_i=1e3;function Ja(e){const[t,n]=d.useState(null),[r,o]=d.useState(null);d.useEffect(()=>{let s=!1;return Tc(()=>import("./reagraph-canvas-e1Taxmzx.js"),__vite__mapDeps([0,1,2,3,4,5])).then(a=>{s||n(()=>a.ReagraphCanvas)}).catch(a=>{console.error("Failed to load Reagraph renderer",a),s||o(a instanceof Error?a.message:String(a))}),()=>{s=!0}},[]);const i=t??(({height:s=540})=>u.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-2xl border bg-muted/30 text-sm text-muted-foreground",style:{height:s},children:r?u.jsx("span",{children:"Failed to load graph renderer. Please refresh."}):u.jsx("span",{children:"Loading graph renderer"})}));return u.jsx(iv,{...e,GraphRenderer:i})}function Gv(){return[{title:"Graph Explorer  Sombra"},{name:"description",content:"Visualize database rows as a WebGL-powered graph without overwhelming the browser."}]}const Xv=oc(function(){return u.jsx(zv,{GraphComponent:Ja})});function zv({GraphComponent:e=Ja}){const[t,n]=d.useState("visual"),[r,o]=d.useState(()=>JSON.stringify(go,null,2)),[i,s]=d.useState(null),[a,l]=d.useState(xr),[c,f]=d.useState([]),[h,m]=d.useState(!1),[v,b]=d.useState(null),[p,g]=d.useState(null),[x,w]=d.useState(null),[S,y]=d.useState(!0);d.useEffect(()=>{let R=!1;return y(!0),ac().then(O=>{if(!R){w(O);const D=Vv(O);f(D),g({limit:D.length,truncated:!1,rowCount:D.length,executedAt:new Date().toISOString()})}}).catch(O=>{R||(console.error("Failed to load full graph:",O),b(O instanceof Error?O.message:String(O)))}).finally(()=>{R||y(!1)}),()=>{R=!0}},[]);const _=d.useCallback(async R=>{m(!0),b(null);try{const O=await cc(R,{maxRows:a}),D=lc(O)??[],C=Bv(O);f(D),g({limit:C.limit??a,truncated:C.truncated,rowCount:D.length,executedAt:new Date().toISOString()})}catch(O){f([]),g(null),b(O instanceof Error?O.message:String(O))}finally{m(!1)}},[a]),T=d.useCallback(async R=>{R.preventDefault();try{const O=JSON.parse(r);await _(O)}catch(O){b(O instanceof Error?O.message:String(O))}},[_,r]),E=d.useCallback(async()=>{if(!i){b("No query defined. Add at least one node.");return}await _(i)},[_,i]),P=d.useCallback(R=>{s(R)},[]),A=d.useCallback(()=>{i&&(o(JSON.stringify(i,null,2)),n("json"))},[i]),j=()=>{o(JSON.stringify(go,null,2))};return u.jsxs("div",{className:"space-y-6 px-4 py-10 max-w-6xl mx-auto",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx(St,{variant:"secondary",className:"uppercase tracking-wide",children:"Graph explorer"}),u.jsx("h1",{className:"text-3xl font-semibold",children:"Visualize relationships"}),u.jsx("p",{className:"text-muted-foreground max-w-3xl",children:x?u.jsxs(u.Fragment,{children:["Loaded ",x.nodes.length," nodes and ",x.edges.length," edges. Use the query tools below to filter, or explore the full graph."]}):S?u.jsx(u.Fragment,{children:"Loading full graph from database..."}):u.jsx(u.Fragment,{children:"Query the database and render the results as an interactive graph."})})]}),u.jsxs("section",{className:"space-y-6",children:[u.jsxs(tt,{children:[u.jsxs(nt,{children:[u.jsx(rt,{children:"Query"}),u.jsx(pn,{children:"Build a query visually or write JSON directly."})]}),u.jsxs(Lt,{className:"space-y-5",children:[u.jsxs($v,{value:t,onValueChange:R=>n(R),children:[u.jsxs(Fv,{className:"mb-4",children:[u.jsx(wi,{value:"visual",children:"Visual Builder"}),u.jsx(wi,{value:"json",children:"JSON"})]}),u.jsxs(bi,{value:"visual",className:"space-y-4",children:[u.jsx(gv,{onQueryChange:P}),i&&u.jsxs("details",{className:"text-sm",children:[u.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"Preview generated JSON"}),u.jsx("pre",{className:"mt-2 p-3 rounded-md bg-muted font-mono text-xs overflow-auto max-h-48",children:JSON.stringify(i,null,2)})]}),u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[u.jsxs("div",{className:"space-y-2 sm:w-64",children:[u.jsxs(fe,{className:"text-sm text-muted-foreground",children:["Row limit (",a,")"]}),u.jsx(zr,{value:[a],min:Si,max:_i,step:25,onValueChange:R=>l(R[0]??xr)})]}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[u.jsx(ae,{type:"button",onClick:E,disabled:h,children:h?"Running...":"Run query"}),u.jsx(ae,{type:"button",variant:"outline",onClick:A,children:"Copy to JSON"})]})]})]}),u.jsx(bi,{value:"json",className:"space-y-4",children:u.jsxs("form",{className:"space-y-4",onSubmit:T,children:[u.jsx(uc,{value:r,onChange:R=>o(R.target.value),rows:10,className:"font-mono text-xs",spellCheck:!1,placeholder:'{"match": [{"node": "n", "labels": ["Person"]}], "return": ["n"]}'}),u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[u.jsxs("div",{className:"space-y-2 sm:w-64",children:[u.jsxs(fe,{className:"text-sm text-muted-foreground",children:["Row limit (",a,")"]}),u.jsx(zr,{value:[a],min:Si,max:_i,step:25,onValueChange:R=>l(R[0]??xr)})]}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[u.jsx(ae,{type:"submit",disabled:h,children:h?"Running...":"Run query"}),u.jsx(ae,{type:"button",variant:"ghost",disabled:h,onClick:j,children:"Reset"})]})]})]})})]}),v&&u.jsxs(vo,{variant:"destructive",children:[u.jsx(xo,{children:"Query failed"}),u.jsx(yo,{className:"font-mono text-xs",children:v})]}),p&&u.jsxs("div",{className:"flex flex-col gap-1 text-sm text-muted-foreground sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("span",{children:["Loaded ",p.rowCount," row",p.rowCount===1?"":"s"," (limit ",p.limit,")"]}),u.jsxs("span",{children:["Last run ",new Date(p.executedAt).toLocaleTimeString()]})]}),p?.truncated&&u.jsxs(vo,{children:[u.jsx(xo,{children:"Result truncated"}),u.jsxs(yo,{children:["Only the first ",p.limit," rows were returned. Increase the limit to see more."]})]})]})]}),S?u.jsx(tt,{className:"border-dashed",children:u.jsxs(nt,{children:[u.jsx(rt,{children:"Loading graph..."}),u.jsx(pn,{children:"Fetching all nodes and edges from the database."})]})}):c.length>0?u.jsx(e,{rows:c}):u.jsx(tt,{className:"border-dashed",children:u.jsxs(nt,{children:[u.jsx(rt,{children:"No graph rendered yet"}),u.jsx(pn,{children:"Run a query above to fetch nodes and edges."})]})})]})]})}function Bv(e){if(!e||typeof e!="object")return{limit:null,truncated:!1};const t=e,n=t.row_limit??t.rowLimit,r=typeof n=="number"&&Number.isFinite(n)?Math.floor(n):null,o=t.truncated;return{limit:r,truncated:typeof o=="boolean"?o:!1}}function Vv(e){const t=new Map;for(const o of e.nodes)t.set(o._id,o);const n=[];for(const o of e.edges){const i=t.get(o._source),s=t.get(o._target);i&&s&&n.push({a:{_id:i._id,labels:i._labels,props:Object.fromEntries(Object.entries(i).filter(([a])=>!a.startsWith("_")))},b:{_id:s._id,labels:s._labels,props:Object.fromEntries(Object.entries(s).filter(([a])=>!a.startsWith("_")))}})}const r=new Set;for(const o of e.edges)r.add(o._source),r.add(o._target);for(const o of e.nodes)r.has(o._id)||n.push({a:{_id:o._id,labels:o._labels,props:Object.fromEntries(Object.entries(o).filter(([i])=>!i.startsWith("_")))}});return n}export{Sc as M,Po as a,Du as b,Wi as c,Vt as d,Kt as e,Xv as g,Ue as i,Gv as m,Zr as q,Xr as t};
