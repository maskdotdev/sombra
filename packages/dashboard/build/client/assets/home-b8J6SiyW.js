import{o as l,R as B,w as It,r as z,v as vt}from"./chunk-UIGDSWPH-5nd72nXt.js";import{f as Mt,a as Pt,A as Ie,b as Me,c as Pe,B as Bt,C as ee,d as te,e as ce,g as se,h as le,D as qt,T as Ht,P as Wt,i as zt,j as Qt}from"./property-value-BhhgLb4z.js";import{a as ye,B as Ae}from"./button-CUtCf1f6.js";function Be({className:e,...s}){return l.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:l.jsx("table",{"data-slot":"table",className:ye("w-full caption-bottom text-sm",e),...s})})}function jt({className:e,...s}){return l.jsx("thead",{"data-slot":"table-header",className:ye("[&_tr]:border-b",e),...s})}function qe({className:e,...s}){return l.jsx("tbody",{"data-slot":"table-body",className:ye("[&_tr:last-child]:border-0",e),...s})}function ne({className:e,...s}){return l.jsx("tr",{"data-slot":"table-row",className:ye("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function He({className:e,...s}){return l.jsx("th",{"data-slot":"table-head",className:ye("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function q({className:e,...s}){return l.jsx("td",{"data-slot":"table-cell",className:ye("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}var we=e=>e.type==="checkbox",he=e=>e instanceof Date,P=e=>e==null;const _t=e=>typeof e=="object";var E=e=>!P(e)&&!Array.isArray(e)&&_t(e)&&!he(e),$t=e=>E(e)&&e.target?we(e.target)?e.target.checked:e.target.value:e,Jt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Gt=(e,s)=>e.has(Jt(s)),Kt=e=>{const s=e.constructor&&e.constructor.prototype;return E(s)&&s.hasOwnProperty("isPrototypeOf")},Qe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function T(e){let s;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Qe&&(e instanceof Blob||i))&&(r||E(e)))if(s=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Kt(e))s=e;else for(const d in e)e.hasOwnProperty(d)&&(s[d]=T(e[d]));else return e;return s}var De=e=>/^\w*$/.test(e),D=e=>e===void 0,$e=e=>Array.isArray(e)?e.filter(Boolean):[],Je=e=>$e(e.replace(/["|']|\]/g,"").split(/\.|\[/)),x=(e,s,r)=>{if(!s||!E(e))return r;const i=(De(s)?[s]:Je(s)).reduce((d,o)=>P(d)?d:d[o],e);return D(i)||i===e?D(e[s])?r:e[s]:i},Z=e=>typeof e=="boolean",A=(e,s,r)=>{let i=-1;const d=De(s)?[s]:Je(s),o=d.length,f=o-1;for(;++i<o;){const h=d[i];let O=r;if(i!==f){const F=e[h];O=E(F)||Array.isArray(F)?F:isNaN(+d[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=O,e=e[h]}};const nt={BLUR:"blur",FOCUS_OUT:"focusout"},$={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ie={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Yt=B.createContext(null);Yt.displayName="HookFormContext";var Xt=(e,s,r,i=!0)=>{const d={defaultValues:s._defaultValues};for(const o in e)Object.defineProperty(d,o,{get:()=>{const f=o;return s._proxyFormState[f]!==$.all&&(s._proxyFormState[f]=!i||$.all),e[f]}});return d};const Zt=typeof window<"u"?B.useLayoutEffect:B.useEffect;var H=e=>typeof e=="string",es=(e,s,r,i,d)=>H(e)?(i&&s.watch.add(e),x(r,e,d)):Array.isArray(e)?e.map(o=>(i&&s.watch.add(o),x(r,o))):(i&&(s.watchAll=!0),r),We=e=>P(e)||!_t(e);function ue(e,s,r=new WeakSet){if(We(e)||We(s))return e===s;if(he(e)&&he(s))return e.getTime()===s.getTime();const i=Object.keys(e),d=Object.keys(s);if(i.length!==d.length)return!1;if(r.has(e)||r.has(s))return!0;r.add(e),r.add(s);for(const o of i){const f=e[o];if(!d.includes(o))return!1;if(o!=="ref"){const h=s[o];if(he(f)&&he(h)||E(f)&&E(h)||Array.isArray(f)&&Array.isArray(h)?!ue(f,h,r):f!==h)return!1}}return!0}var ts=(e,s,r,i,d)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:d||!0}}:{},je=e=>Array.isArray(e)?e:[e],ot=()=>{let e=[];return{get observers(){return e},next:d=>{for(const o of e)o.next&&o.next(d)},subscribe:d=>(e.push(d),{unsubscribe:()=>{e=e.filter(o=>o!==d)}}),unsubscribe:()=>{e=[]}}};function wt(e,s){const r={};for(const i in e)if(e.hasOwnProperty(i)){const d=e[i],o=s[i];if(d&&E(d)&&o){const f=wt(d,o);E(f)&&(r[i]=f)}else e[i]&&(r[i]=o)}return r}var I=e=>E(e)&&!Object.keys(e).length,Ge=e=>e.type==="file",J=e=>typeof e=="function",Ne=e=>{if(!Qe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},pt=e=>e.type==="select-multiple",Ke=e=>e.type==="radio",ss=e=>Ke(e)||we(e),Ue=e=>Ne(e)&&e.isConnected;function rs(e,s){const r=s.slice(0,-1).length;let i=0;for(;i<r;)e=D(e)?i++:e[s[i++]];return e}function is(e){for(const s in e)if(e.hasOwnProperty(s)&&!D(e[s]))return!1;return!0}function k(e,s){const r=Array.isArray(s)?s:De(s)?[s]:Je(s),i=r.length===1?e:rs(e,r),d=r.length-1,o=r[d];return i&&delete i[o],d!==0&&(E(i)&&I(i)||Array.isArray(i)&&is(i))&&k(e,r.slice(0,-1)),e}var as=e=>{for(const s in e)if(J(e[s]))return!0;return!1};function Vt(e){return Array.isArray(e)||E(e)&&!as(e)}function ze(e,s={}){for(const r in e)Vt(e[r])?(s[r]=Array.isArray(e[r])?[]:{},ze(e[r],s[r])):D(e[r])||(s[r]=!0);return s}function ge(e,s,r){r||(r=ze(s));for(const i in e)Vt(e[i])?D(s)||We(r[i])?r[i]=ze(e[i],Array.isArray(e[i])?[]:{}):ge(e[i],P(s)?{}:s[i],r[i]):r[i]=!ue(e[i],s[i]);return r}const dt={value:!1,isValid:!1},ct={value:!0,isValid:!0};var Ft=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?ct:{value:e[0].value,isValid:!0}:ct:dt}return dt},At=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:i})=>D(e)?e:s?e===""?NaN:e&&+e:r&&H(e)?new Date(e):i?i(e):e;const ut={isValid:!1,value:null};var Nt=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,ut):ut;function ft(e){const s=e.ref;return Ge(s)?s.files:Ke(s)?Nt(e.refs).value:pt(s)?[...s.selectedOptions].map(({value:r})=>r):we(s)?Ft(e.refs).value:At(D(s.value)?e.ref.value:s.value,e)}var ls=(e,s,r,i)=>{const d={};for(const o of e){const f=x(s,o);f&&A(d,o,f._f)}return{criteriaMode:r,names:[...e],fields:d,shouldUseNativeValidation:i}},Se=e=>e instanceof RegExp,ve=e=>D(e)?e:Se(e)?e.source:E(e)?Se(e.value)?e.value.source:e.value:e,ht=e=>({isOnSubmit:!e||e===$.onSubmit,isOnBlur:e===$.onBlur,isOnChange:e===$.onChange,isOnAll:e===$.all,isOnTouch:e===$.onTouched});const yt="AsyncFunction";var ns=e=>!!e&&!!e.validate&&!!(J(e.validate)&&e.validate.constructor.name===yt||E(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===yt)),os=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),xt=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const _e=(e,s,r,i)=>{for(const d of r||Object.keys(e)){const o=x(e,d);if(o){const{_f:f,...h}=o;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],d)&&!i)return!0;if(f.ref&&s(f.ref,f.name)&&!i)return!0;if(_e(h,s))break}else if(E(h)&&_e(h,s))break}}};function mt(e,s,r){const i=x(e,r);if(i||De(r))return{error:i,name:r};const d=r.split(".");for(;d.length;){const o=d.join("."),f=x(s,o),h=x(e,o);if(f&&!Array.isArray(f)&&r!==o)return{name:r};if(h&&h.type)return{name:o,error:h};if(h&&h.root&&h.root.type)return{name:`${o}.root`,error:h.root};d.pop()}return{name:r}}var ds=(e,s,r,i)=>{r(e);const{name:d,...o}=e;return I(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(f=>s[f]===(!i||$.all))},cs=(e,s,r)=>!e||!s||e===s||je(e).some(i=>i&&(r?i===s:i.startsWith(s)||s.startsWith(i))),us=(e,s,r,i,d)=>d.isOnAll?!1:!r&&d.isOnTouch?!(s||e):(r?i.isOnBlur:d.isOnBlur)?!e:(r?i.isOnChange:d.isOnChange)?e:!0,fs=(e,s)=>!$e(x(e,s)).length&&k(e,s),hs=(e,s,r)=>{const i=je(x(e,r));return A(i,"root",s[r]),A(e,r,i),e};function gt(e,s,r="validate"){if(H(e)||Array.isArray(e)&&e.every(H)||Z(e)&&!e)return{type:r,message:H(e)?e:"",ref:s}}var me=e=>E(e)&&!Se(e)?e:{value:e,message:""},bt=async(e,s,r,i,d,o)=>{const{ref:f,refs:h,required:O,maxLength:F,minLength:_,min:b,max:g,pattern:R,validate:L,name:N,valueAsNumber:G,mount:ke}=e._f,j=x(r,N);if(!ke||s.has(N))return{};const re=h?h[0]:f,K=v=>{d&&re.reportValidity&&(re.setCustomValidity(Z(v)?"":v||""),re.reportValidity())},C={},pe=Ke(f),oe=we(f),Ee=pe||oe,Q=(G||Ge(f))&&D(f.value)&&D(j)||Ne(f)&&f.value===""||j===""||Array.isArray(j)&&!j.length,fe=ts.bind(null,N,i,C),Y=(v,p,S,U=ie.maxLength,M=ie.minLength)=>{const X=v?p:S;C[N]={type:v?U:M,message:X,ref:f,...fe(v?U:M,X)}};if(o?!Array.isArray(j)||!j.length:O&&(!Ee&&(Q||P(j))||Z(j)&&!j||oe&&!Ft(h).isValid||pe&&!Nt(h).isValid)){const{value:v,message:p}=H(O)?{value:!!O,message:O}:me(O);if(v&&(C[N]={type:ie.required,message:p,ref:re,...fe(ie.required,p)},!i))return K(p),C}if(!Q&&(!P(b)||!P(g))){let v,p;const S=me(g),U=me(b);if(!P(j)&&!isNaN(j)){const M=f.valueAsNumber||j&&+j;P(S.value)||(v=M>S.value),P(U.value)||(p=M<U.value)}else{const M=f.valueAsDate||new Date(j),X=Ve=>new Date(new Date().toDateString()+" "+Ve),be=f.type=="time",xe=f.type=="week";H(S.value)&&j&&(v=be?X(j)>X(S.value):xe?j>S.value:M>new Date(S.value)),H(U.value)&&j&&(p=be?X(j)<X(U.value):xe?j<U.value:M<new Date(U.value))}if((v||p)&&(Y(!!v,S.message,U.message,ie.max,ie.min),!i))return K(C[N].message),C}if((F||_)&&!Q&&(H(j)||o&&Array.isArray(j))){const v=me(F),p=me(_),S=!P(v.value)&&j.length>+v.value,U=!P(p.value)&&j.length<+p.value;if((S||U)&&(Y(S,v.message,p.message),!i))return K(C[N].message),C}if(R&&!Q&&H(j)){const{value:v,message:p}=me(R);if(Se(v)&&!j.match(v)&&(C[N]={type:ie.pattern,message:p,ref:f,...fe(ie.pattern,p)},!i))return K(p),C}if(L){if(J(L)){const v=await L(j,r),p=gt(v,re);if(p&&(C[N]={...p,...fe(ie.validate,p.message)},!i))return K(p.message),C}else if(E(L)){let v={};for(const p in L){if(!I(v)&&!i)break;const S=gt(await L[p](j,r),re,p);S&&(v={...S,...fe(p,S.message)},K(S.message),i&&(C[N]=v))}if(!I(v)&&(C[N]={ref:re,...v},!i))return C}}return K(!0),C};const ys={mode:$.onSubmit,reValidateMode:$.onChange,shouldFocusError:!0};function xs(e={}){let s={...ys,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:J(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},d=E(s.defaultValues)||E(s.values)?T(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:T(d),f={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},O,F=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={..._};const g={array:ot(),state:ot()},R=s.criteriaMode===$.all,L=t=>a=>{clearTimeout(F),F=setTimeout(t,a)},N=async t=>{if(!s.disabled&&(_.isValid||b.isValid||t)){const a=s.resolver?I((await oe()).errors):await Q(i,!0);a!==r.isValid&&g.state.next({isValid:a})}},G=(t,a)=>{!s.disabled&&(_.isValidating||_.validatingFields||b.isValidating||b.validatingFields)&&((t||Array.from(h.mount)).forEach(n=>{n&&(a?A(r.validatingFields,n,a):k(r.validatingFields,n))}),g.state.next({validatingFields:r.validatingFields,isValidating:!I(r.validatingFields)}))},ke=(t,a=[],n,y,u=!0,c=!0)=>{if(y&&n&&!s.disabled){if(f.action=!0,c&&Array.isArray(x(i,t))){const m=n(x(i,t),y.argA,y.argB);u&&A(i,t,m)}if(c&&Array.isArray(x(r.errors,t))){const m=n(x(r.errors,t),y.argA,y.argB);u&&A(r.errors,t,m),fs(r.errors,t)}if((_.touchedFields||b.touchedFields)&&c&&Array.isArray(x(r.touchedFields,t))){const m=n(x(r.touchedFields,t),y.argA,y.argB);u&&A(r.touchedFields,t,m)}(_.dirtyFields||b.dirtyFields)&&(r.dirtyFields=ge(d,o)),g.state.next({name:t,isDirty:Y(t,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else A(o,t,a)},j=(t,a)=>{A(r.errors,t,a),g.state.next({errors:r.errors})},re=t=>{r.errors=t,g.state.next({errors:r.errors,isValid:!1})},K=(t,a,n,y)=>{const u=x(i,t);if(u){const c=x(o,t,D(n)?x(d,t):n);D(c)||y&&y.defaultChecked||a?A(o,t,a?c:ft(u._f)):S(t,c),f.mount&&N()}},C=(t,a,n,y,u)=>{let c=!1,m=!1;const w={name:t};if(!s.disabled){if(!n||y){(_.isDirty||b.isDirty)&&(m=r.isDirty,r.isDirty=w.isDirty=Y(),c=m!==w.isDirty);const V=ue(x(d,t),a);m=!!x(r.dirtyFields,t),V?k(r.dirtyFields,t):A(r.dirtyFields,t,!0),w.dirtyFields=r.dirtyFields,c=c||(_.dirtyFields||b.dirtyFields)&&m!==!V}if(n){const V=x(r.touchedFields,t);V||(A(r.touchedFields,t,n),w.touchedFields=r.touchedFields,c=c||(_.touchedFields||b.touchedFields)&&V!==n)}c&&u&&g.state.next(w)}return c?w:{}},pe=(t,a,n,y)=>{const u=x(r.errors,t),c=(_.isValid||b.isValid)&&Z(a)&&r.isValid!==a;if(s.delayError&&n?(O=L(()=>j(t,n)),O(s.delayError)):(clearTimeout(F),O=null,n?A(r.errors,t,n):k(r.errors,t)),(n?!ue(u,n):u)||!I(y)||c){const m={...y,...c&&Z(a)?{isValid:a}:{},errors:r.errors,name:t};r={...r,...m},g.state.next(m)}},oe=async t=>{G(t,!0);const a=await s.resolver(o,s.context,ls(t||h.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return G(t),a},Ee=async t=>{const{errors:a}=await oe(t);if(t)for(const n of t){const y=x(a,n);y?A(r.errors,n,y):k(r.errors,n)}else r.errors=a;return a},Q=async(t,a,n={valid:!0})=>{for(const y in t){const u=t[y];if(u){const{_f:c,...m}=u;if(c){const w=h.array.has(c.name),V=u._f&&ns(u._f);V&&_.validatingFields&&G([c.name],!0);const W=await bt(u,h.disabled,o,R,s.shouldUseNativeValidation&&!a,w);if(V&&_.validatingFields&&G([c.name]),W[c.name]&&(n.valid=!1,a))break;!a&&(x(W,c.name)?w?hs(r.errors,W,c.name):A(r.errors,c.name,W[c.name]):k(r.errors,c.name))}!I(m)&&await Q(m,a,n)}}return n.valid},fe=()=>{for(const t of h.unMount){const a=x(i,t);a&&(a._f.refs?a._f.refs.every(n=>!Ue(n)):!Ue(a._f.ref))&&Ce(t)}h.unMount=new Set},Y=(t,a)=>!s.disabled&&(t&&a&&A(o,t,a),!ue(Ve(),d)),v=(t,a,n)=>es(t,h,{...f.mount?o:D(a)?d:H(t)?{[t]:a}:a},n,a),p=t=>$e(x(f.mount?o:d,t,s.shouldUnregister?x(d,t,[]):[])),S=(t,a,n={})=>{const y=x(i,t);let u=a;if(y){const c=y._f;c&&(!c.disabled&&A(o,t,At(a,c)),u=Ne(c.ref)&&P(a)?"":a,pt(c.ref)?[...c.ref.options].forEach(m=>m.selected=u.includes(m.value)):c.refs?we(c.ref)?c.refs.forEach(m=>{(!m.defaultChecked||!m.disabled)&&(Array.isArray(u)?m.checked=!!u.find(w=>w===m.value):m.checked=u===m.value||!!u)}):c.refs.forEach(m=>m.checked=m.value===u):Ge(c.ref)?c.ref.value="":(c.ref.value=u,c.ref.type||g.state.next({name:t,values:T(o)})))}(n.shouldDirty||n.shouldTouch)&&C(t,u,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&xe(t)},U=(t,a,n)=>{for(const y in a){if(!a.hasOwnProperty(y))return;const u=a[y],c=t+"."+y,m=x(i,c);(h.array.has(t)||E(u)||m&&!m._f)&&!he(u)?U(c,u,n):S(c,u,n)}},M=(t,a,n={})=>{const y=x(i,t),u=h.array.has(t),c=T(a);A(o,t,c),u?(g.array.next({name:t,values:T(o)}),(_.isDirty||_.dirtyFields||b.isDirty||b.dirtyFields)&&n.shouldDirty&&g.state.next({name:t,dirtyFields:ge(d,o),isDirty:Y(t,c)})):y&&!y._f&&!P(c)?U(t,c,n):S(t,c,n),xt(t,h)&&g.state.next({...r,name:t}),g.state.next({name:f.mount?t:void 0,values:T(o)})},X=async t=>{f.mount=!0;const a=t.target;let n=a.name,y=!0;const u=x(i,n),c=V=>{y=Number.isNaN(V)||he(V)&&isNaN(V.getTime())||ue(V,x(o,n,V))},m=ht(s.mode),w=ht(s.reValidateMode);if(u){let V,W;const Fe=a.type?ft(u._f):$t(t),de=t.type===nt.BLUR||t.type===nt.FOCUS_OUT,Tt=!os(u._f)&&!s.resolver&&!x(r.errors,n)&&!u._f.deps||us(de,x(r.touchedFields,n),r.isSubmitted,w,m),Te=xt(n,h,de);A(o,n,Fe),de?(!a||!a.readOnly)&&(u._f.onBlur&&u._f.onBlur(t),O&&O(0)):u._f.onChange&&u._f.onChange(t);const Re=C(n,Fe,de),Rt=!I(Re)||Te;if(!de&&g.state.next({name:n,type:t.type,values:T(o)}),Tt)return(_.isValid||b.isValid)&&(s.mode==="onBlur"?de&&N():de||N()),Rt&&g.state.next({name:n,...Te?{}:Re});if(!de&&Te&&g.state.next({...r}),s.resolver){const{errors:at}=await oe([n]);if(c(Fe),y){const Ut=mt(r.errors,i,n),lt=mt(at,i,Ut.name||n);V=lt.error,n=lt.name,W=I(at)}}else G([n],!0),V=(await bt(u,h.disabled,o,R,s.shouldUseNativeValidation))[n],G([n]),c(Fe),y&&(V?W=!1:(_.isValid||b.isValid)&&(W=await Q(i,!0)));y&&(u._f.deps&&(!Array.isArray(u._f.deps)||u._f.deps.length>0)&&xe(u._f.deps),pe(n,W,V,Re))}},be=(t,a)=>{if(x(r.errors,a)&&t.focus)return t.focus(),1},xe=async(t,a={})=>{let n,y;const u=je(t);if(s.resolver){const c=await Ee(D(t)?t:u);n=I(c),y=t?!u.some(m=>x(c,m)):n}else t?(y=(await Promise.all(u.map(async c=>{const m=x(i,c);return await Q(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!y&&!r.isValid)&&N()):y=n=await Q(i);return g.state.next({...!H(t)||(_.isValid||b.isValid)&&n!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:n}:{},errors:r.errors}),a.shouldFocus&&!y&&_e(i,be,t?u:h.mount),y},Ve=(t,a)=>{let n={...f.mount?o:d};return a&&(n=wt(a.dirtyFields?r.dirtyFields:r.touchedFields,n)),D(t)?n:H(t)?x(n,t):t.map(y=>x(n,y))},Ye=(t,a)=>({invalid:!!x((a||r).errors,t),isDirty:!!x((a||r).dirtyFields,t),error:x((a||r).errors,t),isValidating:!!x(r.validatingFields,t),isTouched:!!x((a||r).touchedFields,t)}),St=t=>{t&&je(t).forEach(a=>k(r.errors,a)),g.state.next({errors:t?r.errors:{}})},Xe=(t,a,n)=>{const y=(x(i,t,{_f:{}})._f||{}).ref,u=x(r.errors,t)||{},{ref:c,message:m,type:w,...V}=u;A(r.errors,t,{...V,...a,ref:y}),g.state.next({name:t,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&y&&y.focus&&y.focus()},Dt=(t,a)=>J(t)?g.state.subscribe({next:n=>"values"in n&&t(v(void 0,a),n)}):v(t,a,!0),Ze=t=>g.state.subscribe({next:a=>{cs(t.name,a.name,t.exact)&&ds(a,t.formState||_,Lt,t.reRenderRoot)&&t.callback({values:{...o},...r,...a,defaultValues:d})}}).unsubscribe,kt=t=>(f.mount=!0,b={...b,...t.formState},Ze({...t,formState:b})),Ce=(t,a={})=>{for(const n of t?je(t):h.mount)h.mount.delete(n),h.array.delete(n),a.keepValue||(k(i,n),k(o,n)),!a.keepError&&k(r.errors,n),!a.keepDirty&&k(r.dirtyFields,n),!a.keepTouched&&k(r.touchedFields,n),!a.keepIsValidating&&k(r.validatingFields,n),!s.shouldUnregister&&!a.keepDefaultValue&&k(d,n);g.state.next({values:T(o)}),g.state.next({...r,...a.keepDirty?{isDirty:Y()}:{}}),!a.keepIsValid&&N()},et=({disabled:t,name:a})=>{(Z(t)&&f.mount||t||h.disabled.has(a))&&(t?h.disabled.add(a):h.disabled.delete(a))},Oe=(t,a={})=>{let n=x(i,t);const y=Z(a.disabled)||Z(s.disabled);return A(i,t,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:t}},name:t,mount:!0,...a}}),h.mount.add(t),n?et({disabled:Z(a.disabled)?a.disabled:s.disabled,name:t}):K(t,!0,a.value),{...y?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:ve(a.min),max:ve(a.max),minLength:ve(a.minLength),maxLength:ve(a.maxLength),pattern:ve(a.pattern)}:{},name:t,onChange:X,onBlur:X,ref:u=>{if(u){Oe(t,a),n=x(i,t);const c=D(u.value)&&u.querySelectorAll&&u.querySelectorAll("input,select,textarea")[0]||u,m=ss(c),w=n._f.refs||[];if(m?w.find(V=>V===c):c===n._f.ref)return;A(i,t,{_f:{...n._f,...m?{refs:[...w.filter(Ue),c,...Array.isArray(x(d,t))?[{}]:[]],ref:{type:c.type,name:t}}:{ref:c}}}),K(t,!1,void 0,c)}else n=x(i,t,{}),n._f&&(n._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(Gt(h.array,t)&&f.action)&&h.unMount.add(t)}}},Le=()=>s.shouldFocusError&&_e(i,be,h.mount),Et=t=>{Z(t)&&(g.state.next({disabled:t}),_e(i,(a,n)=>{const y=x(i,n);y&&(a.disabled=y._f.disabled||t,Array.isArray(y._f.refs)&&y._f.refs.forEach(u=>{u.disabled=y._f.disabled||t}))},0,!1))},tt=(t,a)=>async n=>{let y;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let u=T(o);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:m}=await oe();r.errors=c,u=T(m)}else await Q(i);if(h.disabled.size)for(const c of h.disabled)k(u,c);if(k(r.errors,"root"),I(r.errors)){g.state.next({errors:{}});try{await t(u,n)}catch(c){y=c}}else a&&await a({...r.errors},n),Le(),setTimeout(Le);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(r.errors)&&!y,submitCount:r.submitCount+1,errors:r.errors}),y)throw y},Ct=(t,a={})=>{x(i,t)&&(D(a.defaultValue)?M(t,T(x(d,t))):(M(t,a.defaultValue),A(d,t,T(a.defaultValue))),a.keepTouched||k(r.touchedFields,t),a.keepDirty||(k(r.dirtyFields,t),r.isDirty=a.defaultValue?Y(t,T(x(d,t))):Y()),a.keepError||(k(r.errors,t),_.isValid&&N()),g.state.next({...r}))},st=(t,a={})=>{const n=t?T(t):d,y=T(n),u=I(t),c=u?d:y;if(a.keepDefaultValues||(d=n),!a.keepValues){if(a.keepDirtyValues){const m=new Set([...h.mount,...Object.keys(ge(d,o))]);for(const w of Array.from(m))x(r.dirtyFields,w)?A(c,w,x(o,w)):M(w,x(c,w))}else{if(Qe&&D(t))for(const m of h.mount){const w=x(i,m);if(w&&w._f){const V=Array.isArray(w._f.refs)?w._f.refs[0]:w._f.ref;if(Ne(V)){const W=V.closest("form");if(W){W.reset();break}}}}if(a.keepFieldsRef)for(const m of h.mount)M(m,x(c,m));else i={}}o=s.shouldUnregister?a.keepDefaultValues?T(d):{}:T(c),g.array.next({values:{...c}}),g.state.next({values:{...c}})}h={mount:a.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!s.shouldUnregister&&!I(c),f.watch=!!s.shouldUnregister,g.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:u?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!ue(t,d)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:u?{}:a.keepDirtyValues?a.keepDefaultValues&&o?ge(d,o):r.dirtyFields:a.keepDefaultValues&&t?ge(d,t):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:d})},rt=(t,a)=>st(J(t)?t(o):t,a),Ot=(t,a={})=>{const n=x(i,t),y=n&&n._f;if(y){const u=y.refs?y.refs[0]:y.ref;u.focus&&(u.focus(),a.shouldSelect&&J(u.select)&&u.select())}},Lt=t=>{r={...r,...t}},it={control:{register:Oe,unregister:Ce,getFieldState:Ye,handleSubmit:tt,setError:Xe,_subscribe:Ze,_runSchema:oe,_focusError:Le,_getWatch:v,_getDirty:Y,_setValid:N,_setFieldArray:ke,_setDisabledField:et,_setErrors:re,_getFieldArray:p,_reset:st,_resetDefaultValues:()=>J(s.defaultValues)&&s.defaultValues().then(t=>{rt(t,s.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:fe,_disableForm:Et,_subjects:g,_proxyFormState:_,get _fields(){return i},get _formValues(){return o},get _state(){return f},set _state(t){f=t},get _defaultValues(){return d},get _names(){return h},set _names(t){h=t},get _formState(){return r},get _options(){return s},set _options(t){s={...s,...t}}},subscribe:kt,trigger:xe,register:Oe,handleSubmit:tt,watch:Dt,setValue:M,getValues:Ve,reset:rt,resetField:Ct,clearErrors:St,unregister:Ce,setError:Xe,setFocus:Ot,getFieldState:Ye};return{...it,formControl:it}}function ms(e={}){const s=B.useRef(void 0),r=B.useRef(void 0),[i,d]=B.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:J(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!J(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...h}=xs(e);s.current={...h,formState:i}}const o=s.current.control;return o._options=e,Zt(()=>{const f=o._subscribe({formState:o._proxyFormState,callback:()=>d({...o._formState}),reRenderRoot:!0});return d(h=>({...h,isReady:!0})),o._formState.isReady=!0,f},[o]),B.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),B.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),B.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),B.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),B.useEffect(()=>{if(o._proxyFormState.isDirty){const f=o._getDirty();f!==i.isDirty&&o._subjects.state.next({isDirty:f})}},[o,i.isDirty]),B.useEffect(()=>{e.values&&!ue(e.values,r.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),r.current=e.values,d(f=>({...f}))):o._resetDefaultValues()},[o,e.values]),B.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),s.current.formState=Xt(i,o),s.current}function ps(){return[{title:"Sombra Dashboard"},{name:"description",content:"Operational overview for Sombra databases"}]}const Vs=It(function(){const[s,r]=z.useState(null),[i,d]=z.useState(null),[o,f]=z.useState(null),[h,O]=z.useState(!0),[F,_]=z.useState(null);z.useEffect(()=>{Promise.all([Mt(),Pt()]).then(([L,N])=>{r(L),d(N),f(new Date().toISOString())}).catch(L=>_(L instanceof Error?L.message:String(L))).finally(()=>O(!1))},[]);const b=new Intl.NumberFormat,g=new Intl.NumberFormat(void 0,{style:"unit",unit:"byte",unitDisplay:"narrow"});if(h)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})});if(F||!s||!i)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs(Ie,{variant:"destructive",className:"max-w-md",children:[l.jsx(Me,{children:"Failed to load dashboard"}),l.jsx(Pe,{children:F??"Unknown error"})]})});const R=i.storage.estimated_node_count===0;return l.jsxs("div",{className:"space-y-6 px-4 py-10 max-w-6xl mx-auto",children:[l.jsxs("header",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Bt,{variant:s.status==="ok"?"default":"secondary",className:ye("uppercase tracking-wide",s.status==="ok"?"bg-emerald-500 text-white hover:bg-emerald-500":"bg-amber-500 text-black hover:bg-amber-500"),children:s.status}),l.jsxs("span",{className:"text-muted-foreground text-sm",children:["Last refreshed ",o?new Date(o).toLocaleTimeString():"—"]})]}),l.jsx("h1",{className:"text-3xl font-semibold",children:"Database Overview"}),l.jsx("p",{className:"text-muted-foreground",children:"Real-time signals surfaced from the Sombra CLI dashboard server."})]}),l.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[l.jsxs(ee,{children:[l.jsxs(te,{className:"space-y-1",children:[l.jsx(ce,{children:"Read-only mode"}),l.jsx(se,{className:"text-2xl",children:s.read_only?"Enabled":"Disabled"})]}),l.jsxs(le,{className:"text-sm text-muted-foreground",children:["Mutating admin commands (vacuum, import, checkpoint) are"," ",s.read_only?"currently disabled.":"available."]})]}),l.jsxs(ee,{children:[l.jsxs(te,{className:"space-y-1",children:[l.jsx(ce,{children:"Pager cache pages"}),l.jsx(se,{className:"text-2xl",children:b.format(i.pager.cache_pages)})]}),l.jsxs(le,{className:"text-sm text-muted-foreground",children:["Page size ",b.format(i.pager.page_size)," bytes"]})]}),l.jsxs(ee,{children:[l.jsxs(te,{className:"space-y-1",children:[l.jsx(ce,{children:"Estimated records"}),l.jsxs(se,{className:"text-2xl",children:[b.format(i.storage.estimated_node_count)," nodes"]})]}),l.jsxs(le,{className:"text-sm text-muted-foreground",children:[b.format(i.storage.estimated_edge_count)," edges"]})]})]}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs(ee,{children:[l.jsxs(te,{children:[l.jsx(se,{children:"Pager & WAL"}),l.jsx(ce,{children:"Cache behaviour and write-ahead log state."})]}),l.jsx(le,{children:l.jsxs(Be,{children:[l.jsx(jt,{children:l.jsxs(ne,{children:[l.jsx(He,{children:"Metric"}),l.jsx(He,{className:"text-right",children:"Value"})]})}),l.jsxs(qe,{children:[l.jsx(ae,{label:"Cache hits",value:i.pager.hits}),l.jsx(ae,{label:"Cache misses",value:i.pager.misses}),l.jsx(ae,{label:"Evictions",value:i.pager.evictions}),l.jsx(ae,{label:"Dirty writebacks",value:i.pager.dirty_writebacks}),l.jsx(ae,{label:"Last checkpoint LSN",value:i.pager.last_checkpoint_lsn}),l.jsxs(ne,{children:[l.jsx(q,{children:"WAL size"}),l.jsx(q,{className:"text-right font-mono",children:g.format(i.wal.size_bytes)})]}),l.jsxs(ne,{children:[l.jsx(q,{children:"WAL file"}),l.jsx(q,{className:"text-right text-sm text-muted-foreground",children:i.wal.exists?i.wal.path:"not present"})]})]})]})})]}),l.jsxs(ee,{children:[l.jsxs(te,{children:[l.jsx(se,{children:"Storage layout"}),l.jsx(ce,{children:"Internals of the current dataset."})]}),l.jsx(le,{children:l.jsx(Be,{children:l.jsxs(qe,{children:[l.jsx(ae,{label:"Next node ID",value:i.storage.next_node_id}),l.jsx(ae,{label:"Next edge ID",value:i.storage.next_edge_id}),l.jsx(ae,{label:"Inline property blob",value:i.storage.inline_prop_blob}),l.jsx(ae,{label:"Inline property value",value:i.storage.inline_prop_value}),l.jsxs(ne,{children:[l.jsx(q,{children:"Distinct neighbors default"}),l.jsx(q,{className:"text-right font-mono",children:i.storage.distinct_neighbors_default?"true":"false"})]}),l.jsxs(ne,{children:[l.jsx(q,{children:"Database file"}),l.jsx(q,{className:"text-right text-sm text-muted-foreground",children:i.filesystem.db_path})]}),l.jsxs(ne,{children:[l.jsx(q,{children:"DB size"}),l.jsx(q,{className:"text-right font-mono",children:g.format(i.filesystem.db_size_bytes)})]})]})})})]})]}),l.jsx("section",{className:"grid gap-6 lg:grid-cols-2",children:l.jsxs(ee,{className:"col-span-full",children:[l.jsxs(te,{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{children:[l.jsx(se,{children:"Query console"}),l.jsx(ce,{children:"Paste a JSON query specification and run it against the connected database. Queries are limited to read-only operations in the MVP."})]}),l.jsx(Ae,{asChild:!0,variant:"outline",size:"sm",children:l.jsx(vt,{to:"/graph",children:"Open Graph Explorer"})})]}),l.jsxs(le,{className:"space-y-4",children:[R&&l.jsxs(Ie,{children:[l.jsx(Me,{children:"No data detected"}),l.jsxs(Pe,{children:[l.jsx("p",{children:"The connected database has zero nodes, so the sample query below will fail until you seed demo data or import your own graph."}),l.jsxs("code",{className:"rounded bg-muted px-2 py-1 font-mono text-xs",children:["sombra seed-demo ",i.filesystem.db_path," --create"]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["(Use ",l.jsx("code",{children:"cargo run --bin cli -- seed-demo ..."})," if you do not have the ",l.jsx("code",{children:"sombra"})," binary installed.)"]})]})]}),l.jsx(gs,{})]})]})})]})});function ae({label:e,value:s}){const r=new Intl.NumberFormat;return l.jsxs(ne,{children:[l.jsx(q,{children:e}),l.jsx(q,{className:"text-right font-mono",children:r.format(s)})]})}function gs(){const e=ms({defaultValues:{payload:JSON.stringify(qt,null,2)}}),[s,r]=z.useState(null),[i,d]=z.useState(null),[o,f]=z.useState(!1),[h,O]=z.useState([]),F=z.useMemo(()=>s?.rows??null,[s]),_=z.useMemo(()=>{if(!F||F.length===0)return[];const b=new Set;for(const g of F)Object.keys(g).forEach(R=>b.add(R));return Array.from(b)},[F]);return l.jsxs("form",{className:"space-y-4",onSubmit:e.handleSubmit(async b=>{f(!0),d(null);try{const g=JSON.parse(b.payload),R=await zt(g),L=Qt(R);r({raw:R,rows:L});const N={id:crypto.randomUUID?.()??`${Date.now()}`,payload:b.payload,timestamp:new Date().toISOString(),rowCount:Array.isArray(L)?L.length:null};O(G=>[N,...G].slice(0,5))}catch(g){r(null),d(g instanceof Error?g.message:String(g))}finally{f(!1)}}),children:[l.jsx(Ht,{...e.register("payload"),minLength:2,rows:10,className:"font-mono text-sm"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ae,{type:"submit",disabled:o,children:o?"Running…":"Run query"}),i&&l.jsxs(Ie,{variant:"destructive",className:"flex-1",children:[l.jsx(Me,{children:"Query failed"}),l.jsx(Pe,{className:"font-mono text-xs",children:i})]})]}),F&&F.length>0&&l.jsxs(ee,{children:[l.jsx(te,{children:l.jsx(se,{className:"text-base",children:"Rows"})}),l.jsx(le,{children:l.jsx("div",{className:"overflow-auto",children:l.jsxs(Be,{children:[l.jsx(jt,{children:l.jsx(ne,{children:_.map(b=>l.jsx(He,{children:b},b))})}),l.jsx(qe,{children:F.map((b,g)=>l.jsx(ne,{children:_.map(R=>l.jsx(q,{className:"font-mono text-xs",children:l.jsx(Wt,{value:b[R],propertyKey:R})},R))},g))})]})})})]}),F&&F.length>0&&l.jsx(bs,{rowCount:F.length}),s!==null&&l.jsxs(ee,{children:[l.jsx(te,{children:l.jsx(se,{className:"text-base",children:"Result"})}),l.jsx(le,{children:l.jsx("pre",{className:"text-xs bg-muted p-4 rounded-md overflow-auto",children:l.jsx("code",{children:JSON.stringify(s.raw,null,2)})})})]}),l.jsxs(ee,{children:[l.jsxs(te,{children:[l.jsx(se,{className:"text-base",children:"Recent queries"}),l.jsx(ce,{children:"Stored locally for this session (last 5 entries)."})]}),l.jsxs(le,{className:"space-y-3",children:[h.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Run a query to build history."}),h.map(b=>l.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-md border p-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:b.rowCount===null?"Unknown row count":`${b.rowCount} row${b.rowCount===1?"":"s"}`}),l.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(b.timestamp).toLocaleTimeString()})]}),l.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>e.setValue("payload",b.payload,{shouldDirty:!0}),children:"Load"})]},b.id))]})]})]})}function bs({rowCount:e}){return l.jsx(ee,{className:"border-dashed bg-muted/30",children:l.jsxs(te,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx(se,{className:"text-base",children:"Visualize this result"}),l.jsxs(ce,{children:["Open the Graph Explorer to map the ",e," row",e===1?"":"s"," that just ran without overloading the console view."]})]}),l.jsx(Ae,{asChild:!0,size:"sm",children:l.jsx(vt,{to:"/graph",children:"Launch Graph Explorer"})})]})})}export{Vs as default,ps as meta};
