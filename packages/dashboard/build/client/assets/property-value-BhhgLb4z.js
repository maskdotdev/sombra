import{o as t,r as b}from"./chunk-UIGDSWPH-5nd72nXt.js";import{c as f,S as R,a as l,e as T,B as y}from"./button-CUtCf1f6.js";const q=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],S=f("check",q);const I=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],w=f("chevron-down",I);const V=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],k=f("chevron-right",V);const D=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_=f("copy",D);const P=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],A=f("file-code",P);const J=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],E=f("import",J);const F=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],L=f("link",F);const U=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],W=f("square-function",U);function O(e,s){return e}async function z(e,s){const a=await fetch(O(e),{headers:{Accept:"application/json","Content-Type":"application/json",...s?.headers??{}},...s});if(!a.ok){const d=await a.text();throw new Error(`Request failed (${a.status} ${a.statusText}): ${d}`)}return await a.json()}async function se(){return await(await fetch(O("/health"),{headers:{Accept:"application/json"}})).json()}async function ae(){return z("/api/stats")}async function re(){return(await z("/api/labels")).labels}async function ne(e,s){const a=new URLSearchParams;typeof s?.maxRows=="number"&&Number.isFinite(s.maxRows)&&s.maxRows>0&&a.set("max_rows",String(Math.round(s.maxRows)));const d=a.size>0?`/api/query?${a.toString()}`:"/api/query";return z(d,{method:"POST",body:JSON.stringify(e)})}async function ie(){return z("/api/graph/full")}const H=T("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function j({className:e,variant:s,asChild:a=!1,...d}){const r=a?R:"span";return t.jsx(r,{"data-slot":"badge",className:l(H({variant:s}),e),...d})}function oe({className:e,...s}){return t.jsx("div",{"data-slot":"card",className:l("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function ce({className:e,...s}){return t.jsx("div",{"data-slot":"card-header",className:l("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function le({className:e,...s}){return t.jsx("div",{"data-slot":"card-title",className:l("leading-none font-semibold",e),...s})}function de({className:e,...s}){return t.jsx("div",{"data-slot":"card-description",className:l("text-muted-foreground text-sm",e),...s})}function me({className:e,...s}){return t.jsx("div",{"data-slot":"card-content",className:l("px-6",e),...s})}function pe({className:e,...s}){return t.jsx("textarea",{"data-slot":"textarea",className:l("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}const B=T("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function xe({className:e,variant:s,...a}){return t.jsx("div",{"data-slot":"alert",role:"alert",className:l(B({variant:s}),e),...a})}function ue({className:e,...s}){return t.jsx("div",{"data-slot":"alert-title",className:l("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...s})}function he({className:e,...s}){return t.jsx("div",{"data-slot":"alert-description",className:l("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}const fe={$schemaVersion:1,matches:[{var:"follower",label:"User"},{var:"followee",label:"User"}],edges:[{from:"follower",to:"followee",edge_type:"FOLLOWS",direction:"out"}],projections:[{kind:"var",var:"follower"},{kind:"var",var:"followee"}]};function ge(e){if(!e||typeof e!="object")return null;const s=e.rows;return Array.isArray(s)?s.filter(a=>a!==null&&typeof a=="object"&&!Array.isArray(a)):null}const $=["imports","exports","references","docstring"];function Q({value:e,propertyKey:s,maxHeight:a=200,compact:d=!1}){const[r,p]=b.useState(!1),[i,m]=b.useState(!1),n=b.useMemo(()=>M(e,s),[e,s]),x=async()=>{const c=n.type==="json"||n.type==="metadata"?JSON.stringify(n.parsed,null,2):String(e);await navigator.clipboard.writeText(c),m(!0),setTimeout(()=>m(!1),1500)};if(n.type==="primitive")return t.jsx("span",{className:"font-mono text-xs break-words",children:n.display});if(n.type==="empty")return t.jsx("span",{className:"text-muted-foreground text-xs italic",children:"null"});if(d)return t.jsx("span",{className:"font-mono text-xs truncate block",children:n.preview});if(n.type==="metadata")return t.jsx(Z,{data:n.parsed,isExpanded:r,onToggleExpand:()=>p(!r),onCopy:x,copied:i,maxHeight:a});if(n.type==="json"){const c=JSON.stringify(n.parsed,null,2),u=c.split(`
`),h=u.length>8;return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[h&&t.jsxs(y,{variant:"ghost",size:"sm",className:"h-5 px-1",onClick:()=>p(!r),children:[r?t.jsx(w,{className:"size-3"}):t.jsx(k,{className:"size-3"}),t.jsxs("span",{className:"text-[0.65rem] text-muted-foreground ml-1",children:[u.length," lines"]})]}),t.jsx(y,{variant:"ghost",size:"sm",className:"h-5 px-1 ml-auto",onClick:x,children:i?t.jsx(S,{className:"size-3 text-emerald-500"}):t.jsx(_,{className:"size-3"})})]}),t.jsx("div",{className:l("rounded-md bg-muted/50 overflow-auto",!r&&h&&"max-h-[160px]"),style:{maxHeight:r?void 0:a},children:t.jsx("pre",{className:"p-2 text-xs font-mono",children:t.jsx("code",{children:c})})})]})}if(n.type==="code"){const c=n.content.split(`
`),u=c.length>10;return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[u&&t.jsxs(y,{variant:"ghost",size:"sm",className:"h-5 px-1",onClick:()=>p(!r),children:[r?t.jsx(w,{className:"size-3"}):t.jsx(k,{className:"size-3"}),t.jsxs("span",{className:"text-[0.65rem] text-muted-foreground ml-1",children:[c.length," lines"]})]}),n.language&&t.jsx("span",{className:"text-[0.6rem] uppercase tracking-wide text-muted-foreground bg-muted px-1.5 py-0.5 rounded",children:n.language}),t.jsx(y,{variant:"ghost",size:"sm",className:"h-5 px-1 ml-auto",onClick:x,children:i?t.jsx(S,{className:"size-3 text-emerald-500"}):t.jsx(_,{className:"size-3"})})]}),t.jsx("div",{className:l("rounded-md bg-slate-950 dark:bg-slate-900 overflow-auto border border-slate-800",!r&&u&&"max-h-[200px]"),style:{maxHeight:r?void 0:a},children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-none py-2 pl-2 pr-3 text-right select-none border-r border-slate-800",children:c.map((h,o)=>t.jsx("div",{className:"text-[0.65rem] leading-[1.4rem] text-slate-600 font-mono",children:o+1},o))}),t.jsx("pre",{className:"flex-1 p-2 text-xs font-mono text-slate-200 overflow-x-auto",children:t.jsx("code",{children:c.map((h,o)=>t.jsx("div",{className:"leading-[1.4rem]",children:h||" "},o))})})]})})]})}if(n.type==="longstring"){const c=n.content.length>200;return t.jsxs("div",{className:"space-y-1",children:[c&&t.jsxs(y,{variant:"ghost",size:"sm",className:"h-5 px-1",onClick:()=>p(!r),children:[r?t.jsx(w,{className:"size-3"}):t.jsx(k,{className:"size-3"}),t.jsxs("span",{className:"text-[0.65rem] text-muted-foreground ml-1",children:[n.content.length," chars"]})]}),t.jsx("p",{className:l("font-mono text-xs break-words whitespace-pre-wrap",!r&&c&&"line-clamp-4"),children:n.content})]})}return t.jsx("span",{className:"font-mono text-xs break-words",children:JSON.stringify(e)})}function C(e){if(!e||typeof e!="object"||Array.isArray(e))return!1;const s=e;return $.some(a=>a in s)}function M(e,s){if(e==null)return{type:"empty"};if(typeof e=="boolean"||typeof e=="number")return{type:"primitive",display:String(e)};if(typeof e=="string"){if(e.trim()==="")return{type:"primitive",display:'""'};const a=e.trim();if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))try{const i=JSON.parse(e);return C(i)?{type:"metadata",parsed:i,preview:g(a,50)}:{type:"json",parsed:i,preview:g(a,50)}}catch{}if(s?.toLowerCase()==="metadata")try{const i=JSON.parse(e);if(C(i))return{type:"metadata",parsed:i,preview:g(e,50)}}catch{}const r=s?["codeText","code","source","sourceCode","content","body","snippet"].some(i=>s.toLowerCase().includes(i.toLowerCase())):!1,p=e.includes(`
`)&&(e.includes("  ")||e.includes("	"))||/^(import|export|function|class|const|let|var|if|for|while|def |async |await )/.test(a)||/<[A-Z][a-zA-Z]*/.test(e)||/=>|:\s*(string|number|boolean|void|any|unknown)/.test(e);if(r||p){const i=Y(e,s);return{type:"code",content:e,language:i,preview:g(e.split(`
`)[0]||e,50)}}return e.length>100||e.includes(`
`)?{type:"longstring",content:e,preview:g(e,50)}:{type:"primitive",display:e}}return typeof e=="object"?C(e)?{type:"metadata",parsed:e,preview:g(JSON.stringify(e),50)}:{type:"json",parsed:e,preview:g(JSON.stringify(e),50)}:{type:"primitive",display:String(e)}}function Y(e,s){if(s){const a=s.toLowerCase();if(a.includes("typescript")||a.includes("ts"))return"typescript";if(a.includes("javascript")||a.includes("js"))return"javascript";if(a.includes("python")||a.includes("py"))return"python";if(a.includes("rust")||a.includes("rs"))return"rust";if(a.includes("sql"))return"sql";if(a.includes("json"))return"json"}return/:\s*(string|number|boolean|void|any|unknown|React\.)/.test(e)?"typescript":/^(import|export|const|let|var|function|class|async|await)\s/.test(e.trim())?"javascript":/^(def |class |import |from |if __name__)/.test(e.trim())?"python":/^(fn |let |mut |impl |struct |enum |use |pub )/.test(e.trim())?"rust":/^(SELECT|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP)\s/i.test(e.trim())?"sql":null}function g(e,s){const a=e.replace(/\n/g," ").replace(/\s+/g," ");return a.length<=s?a:a.slice(0,s-1)+"..."}function Z({data:e,isExpanded:s,onToggleExpand:a,onCopy:d,copied:r,maxHeight:p}){const i=Array.isArray(e.imports)?e.imports:[],m=Array.isArray(e.exports)?e.exports:[],n=Array.isArray(e.references)?e.references:[],x=typeof e.docstring=="string"?e.docstring:null,c=Object.keys(e).filter(o=>!$.includes(o)),u=i.length>0||m.length>0||n.length>0||x||c.length>0,h=i.length+m.length+n.length+(x?1:0)+c.length;return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(y,{variant:"ghost",size:"sm",className:"h-5 px-1",onClick:a,children:[s?t.jsx(w,{className:"size-3"}):t.jsx(k,{className:"size-3"}),t.jsxs("span",{className:"text-[0.65rem] text-muted-foreground ml-1",children:[h," ",h===1?"item":"items"]})]}),t.jsxs("div",{className:"flex gap-1.5 ml-auto",children:[i.length>0&&t.jsxs(j,{variant:"outline",className:"text-[0.6rem] px-1.5 py-0 h-4",children:[t.jsx(E,{className:"size-2.5 mr-1"}),i.length]}),m.length>0&&t.jsxs(j,{variant:"outline",className:"text-[0.6rem] px-1.5 py-0 h-4",children:[t.jsx(A,{className:"size-2.5 mr-1"}),m.length]}),n.length>0&&t.jsxs(j,{variant:"outline",className:"text-[0.6rem] px-1.5 py-0 h-4",children:[t.jsx(L,{className:"size-2.5 mr-1"}),n.length]})]}),t.jsx(y,{variant:"ghost",size:"sm",className:"h-5 px-1",onClick:d,children:r?t.jsx(S,{className:"size-3 text-emerald-500"}):t.jsx(_,{className:"size-3"})})]}),!u&&t.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No metadata"}),u&&t.jsx("div",{className:l("rounded-md bg-muted/30 overflow-auto",!s&&"max-h-[180px]"),style:{maxHeight:s?void 0:p},children:t.jsxs("div",{className:"p-2.5 space-y-3",children:[x&&t.jsx(v,{title:"Docstring",icon:t.jsx(W,{className:"size-3"}),children:t.jsx("p",{className:"text-xs text-muted-foreground font-mono whitespace-pre-wrap",children:x})}),i.length>0&&t.jsx(v,{title:"Imports",icon:t.jsx(E,{className:"size-3"}),count:i.length,children:t.jsx("div",{className:"space-y-1",children:i.map((o,N)=>t.jsx(G,{entry:o},`${o.module}-${N}`))})}),m.length>0&&t.jsx(v,{title:"Exports",icon:t.jsx(A,{className:"size-3"}),count:m.length,children:t.jsx("div",{className:"flex flex-wrap gap-1.5",children:m.map((o,N)=>t.jsx(X,{entry:o},`${o.symbol}-${N}`))})}),n.length>0&&t.jsx(v,{title:"References",icon:t.jsx(L,{className:"size-3"}),count:n.length,children:t.jsx("div",{className:"space-y-1",children:n.map((o,N)=>t.jsx(K,{entry:o},`${o.name}-${N}`))})}),c.length>0&&t.jsx(v,{title:"Other",children:t.jsx("div",{className:"space-y-1.5",children:c.map(o=>t.jsxs("div",{className:"text-xs",children:[t.jsxs("span",{className:"text-muted-foreground",children:[o,":"]})," ",t.jsx("span",{className:"font-mono",children:typeof e[o]=="object"?JSON.stringify(e[o]):String(e[o])})]},o))})})]})})]})}function v({title:e,icon:s,count:a,children:d}){return t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-[0.65rem] uppercase tracking-wide text-muted-foreground font-medium",children:[s,t.jsx("span",{children:e}),a!==void 0&&t.jsxs("span",{className:"text-foreground/50",children:["(",a,")"]})]}),d]})}function G({entry:e}){const s=e.symbols??[];return t.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[t.jsx("span",{className:"font-mono text-blue-500 dark:text-blue-400 shrink-0",children:e.module}),s.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(a=>t.jsx(j,{variant:"secondary",className:"text-[0.6rem] px-1.5 py-0 h-4 font-mono",children:a},a))}),e.isTypeOnly&&t.jsx(j,{variant:"outline",className:"text-[0.55rem] px-1 py-0 h-3.5",children:"type"})]})}function X({entry:e}){return t.jsxs(j,{variant:e.isDefault?"default":"secondary",className:"text-[0.65rem] px-1.5 py-0.5 font-mono",children:[e.isDefault&&t.jsx("span",{className:"opacity-60 mr-1",children:"default"}),e.symbol,e.alias&&e.alias!==e.symbol&&t.jsxs("span",{className:"opacity-60 ml-1",children:["as ",e.alias]})]})}function K({entry:e}){const s={call:"text-amber-500 dark:text-amber-400",new:"text-purple-500 dark:text-purple-400",reference:"text-slate-500 dark:text-slate-400"},a=s[e.kind]??s.reference;return t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(j,{variant:"outline",className:l("text-[0.55rem] px-1 py-0 h-3.5",a),children:e.kind}),t.jsx("span",{className:"font-mono",children:e.name}),e.range?.start&&t.jsxs("span",{className:"text-[0.6rem] text-muted-foreground",children:["L",e.range.start.row,e.range.start.column!==void 0&&`:${e.range.start.column}`]})]})}function ye({value:e,propertyKey:s}){const[a,d]=b.useState(!1),r=b.useMemo(()=>M(e,s),[e,s]);return r.type==="primitive"||r.type==="empty"?t.jsx("span",{className:l(r.type==="empty"&&"text-muted-foreground italic"),children:r.type==="empty"?"null":r.display}):t.jsxs("div",{className:"relative group",children:[t.jsxs("button",{type:"button",onClick:()=>d(!a),className:"text-left font-mono hover:bg-muted/50 rounded px-1 -mx-1 transition-colors",children:[t.jsxs("span",{className:"text-muted-foreground",children:[(r.type==="json"||r.type==="metadata")&&t.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"{}"}),r.type==="code"&&t.jsx("span",{className:"text-emerald-500 dark:text-emerald-400",children:"</>"}),r.type==="longstring"&&t.jsx("span",{className:"text-amber-500 dark:text-amber-400",children:"..."})," "]}),t.jsx("span",{className:"truncate max-w-[200px] inline-block align-bottom",children:r.preview})]}),a&&t.jsx("div",{className:"absolute z-50 left-0 top-full mt-1 w-[400px] max-h-[300px] overflow-auto bg-popover border rounded-lg shadow-lg p-3",children:t.jsx(Q,{value:e,propertyKey:s,maxHeight:250})})]})}export{xe as A,j as B,oe as C,fe as D,ye as P,pe as T,ae as a,ue as b,he as c,ce as d,de as e,se as f,le as g,me as h,ne as i,ge as j,Q as k,w as l,S as m,re as n,ie as o};
